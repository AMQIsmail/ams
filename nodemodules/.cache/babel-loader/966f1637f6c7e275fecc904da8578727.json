{"ast":null,"code":"var _regeneratorRuntime = require(\"C:\\\\Users\\\\Ismail Saheb\\\\Desktop\\\\react\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\");\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) : typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) : (global = global || self, factory(global.ReactTable = {}, global.React));\n})(this, function (exports, React) {\n  'use strict';\n\n  React = React && Object.prototype.hasOwnProperty.call(React, 'default') ? React['default'] : React;\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function () {\n      var self = this,\n          args = arguments;\n      return new Promise(function (resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== \"object\" || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || \"default\");\n      if (typeof res !== \"object\") return res;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n\n    return (hint === \"string\" ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, \"string\");\n\n    return typeof key === \"symbol\" ? key : String(key);\n  }\n\n  var renderErr = 'Renderer Error ☝️';\n  var actions = {\n    init: 'init'\n  };\n\n  var defaultRenderer = function defaultRenderer(_ref) {\n    var _ref$value = _ref.value,\n        value = _ref$value === void 0 ? '' : _ref$value;\n    return value;\n  };\n\n  var emptyRenderer = function emptyRenderer() {\n    return React.createElement(React.Fragment, null, \"\\xA0\");\n  };\n\n  var defaultColumn = {\n    Cell: defaultRenderer,\n    width: 150,\n    minWidth: 0,\n    maxWidth: Number.MAX_SAFE_INTEGER\n  };\n\n  function mergeProps() {\n    for (var _len = arguments.length, propList = new Array(_len), _key = 0; _key < _len; _key++) {\n      propList[_key] = arguments[_key];\n    }\n\n    return propList.reduce(function (props, next) {\n      var style = next.style,\n          className = next.className,\n          rest = _objectWithoutPropertiesLoose(next, [\"style\", \"className\"]);\n\n      props = _extends({}, props, {}, rest);\n\n      if (style) {\n        props.style = props.style ? _extends({}, props.style || {}, {}, style || {}) : style;\n      }\n\n      if (className) {\n        props.className = props.className ? props.className + ' ' + className : className;\n      }\n\n      if (props.className === '') {\n        delete props.className;\n      }\n\n      return props;\n    }, {});\n  }\n\n  function handlePropGetter(prevProps, userProps, meta) {\n    // Handle a lambda, pass it the previous props\n    if (typeof userProps === 'function') {\n      return handlePropGetter({}, userProps(prevProps, meta));\n    } // Handle an array, merge each item as separate props\n\n\n    if (Array.isArray(userProps)) {\n      return mergeProps.apply(void 0, [prevProps].concat(userProps));\n    } // Handle an object by default, merge the two objects\n\n\n    return mergeProps(prevProps, userProps);\n  }\n\n  var makePropGetter = function makePropGetter(hooks, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return function (userProps) {\n      if (userProps === void 0) {\n        userProps = {};\n      }\n\n      return [].concat(hooks, [userProps]).reduce(function (prev, next) {\n        return handlePropGetter(prev, next, _extends({}, meta, {\n          userProps: userProps\n        }));\n      }, {});\n    };\n  };\n\n  var reduceHooks = function reduceHooks(hooks, initial, meta, allowUndefined) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return hooks.reduce(function (prev, next) {\n      var nextValue = next(prev, meta);\n      {\n        if (!allowUndefined && typeof nextValue === 'undefined') {\n          console.info(next);\n          throw new Error('React Table: A reducer hook ☝️ just returned undefined! This is not allowed.');\n        }\n      }\n      return nextValue;\n    }, initial);\n  };\n\n  var loopHooks = function loopHooks(hooks, context, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return hooks.forEach(function (hook) {\n      var nextValue = hook(context, meta);\n      {\n        if (typeof nextValue !== 'undefined') {\n          console.info(hook, nextValue);\n          throw new Error('React Table: A loop-type hook ☝️ just returned a value! This is not allowed.');\n        }\n      }\n    });\n  };\n\n  function ensurePluginOrder(plugins, befores, pluginName, afters) {\n    if (afters) {\n      throw new Error(\"Defining plugins in the \\\"after\\\" section of ensurePluginOrder is no longer supported (see plugin \" + pluginName + \")\");\n    }\n\n    var pluginIndex = plugins.findIndex(function (plugin) {\n      return plugin.pluginName === pluginName;\n    });\n\n    if (pluginIndex === -1) {\n      {\n        throw new Error(\"The plugin \\\"\" + pluginName + \"\\\" was not found in the plugin list!\\nThis usually means you need to need to name your plugin hook by setting the 'pluginName' property of the hook function, eg:\\n\\n  \" + pluginName + \".pluginName = '\" + pluginName + \"'\\n\");\n      }\n    }\n\n    befores.forEach(function (before) {\n      var beforeIndex = plugins.findIndex(function (plugin) {\n        return plugin.pluginName === before;\n      });\n\n      if (beforeIndex > -1 && beforeIndex > pluginIndex) {\n        {\n          throw new Error(\"React Table: The \" + pluginName + \" plugin hook must be placed after the \" + before + \" plugin hook!\");\n        }\n      }\n    });\n  }\n\n  function functionalUpdate(updater, old) {\n    return typeof updater === 'function' ? updater(old) : updater;\n  }\n\n  function useGetLatest(obj) {\n    var ref = React.useRef();\n    ref.current = obj;\n    return React.useCallback(function () {\n      return ref.current;\n    }, []);\n  } // SSR has issues with useLayoutEffect still, so use useEffect during SSR\n\n\n  var safeUseLayoutEffect = typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n\n  function useMountedLayoutEffect(fn, deps) {\n    var mountedRef = React.useRef(false);\n    safeUseLayoutEffect(function () {\n      if (mountedRef.current) {\n        fn();\n      }\n\n      mountedRef.current = true; // eslint-disable-next-line\n    }, deps);\n  }\n\n  function useAsyncDebounce(defaultFn, defaultWait) {\n    if (defaultWait === void 0) {\n      defaultWait = 0;\n    }\n\n    var debounceRef = React.useRef({});\n    var getDefaultFn = useGetLatest(defaultFn);\n    var getDefaultWait = useGetLatest(defaultWait);\n    return React.useCallback( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _len2,\n            args,\n            _key2,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                for (_len2 = _args2.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = _args2[_key2];\n                }\n\n                if (!debounceRef.current.promise) {\n                  debounceRef.current.promise = new Promise(function (resolve, reject) {\n                    debounceRef.current.resolve = resolve;\n                    debounceRef.current.reject = reject;\n                  });\n                }\n\n                if (debounceRef.current.timeout) {\n                  clearTimeout(debounceRef.current.timeout);\n                }\n\n                debounceRef.current.timeout = setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          delete debounceRef.current.timeout;\n                          _context.prev = 1;\n                          _context.t0 = debounceRef.current;\n                          _context.next = 5;\n                          return getDefaultFn().apply(void 0, args);\n\n                        case 5:\n                          _context.t1 = _context.sent;\n\n                          _context.t0.resolve.call(_context.t0, _context.t1);\n\n                          _context.next = 12;\n                          break;\n\n                        case 9:\n                          _context.prev = 9;\n                          _context.t2 = _context[\"catch\"](1);\n                          debounceRef.current.reject(_context.t2);\n\n                        case 12:\n                          _context.prev = 12;\n                          delete debounceRef.current.promise;\n                          return _context.finish(12);\n\n                        case 15:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee, null, [[1, 9, 12, 15]]);\n                })), getDefaultWait());\n                return _context2.abrupt(\"return\", debounceRef.current.promise);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function () {\n        return _ref2.apply(this, arguments);\n      };\n    }(), [getDefaultFn, getDefaultWait]);\n  }\n\n  function makeRenderer(instance, column, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return function (type, userProps) {\n      if (userProps === void 0) {\n        userProps = {};\n      }\n\n      var Comp = typeof type === 'string' ? column[type] : type;\n\n      if (typeof Comp === 'undefined') {\n        console.info(column);\n        throw new Error(renderErr);\n      }\n\n      return flexRender(Comp, _extends({}, instance, {\n        column: column\n      }, meta, {}, userProps));\n    };\n  }\n\n  function flexRender(Comp, props) {\n    return isReactComponent(Comp) ? React.createElement(Comp, props) : Comp;\n  }\n\n  function isReactComponent(component) {\n    return isClassComponent(component) || typeof component === 'function' || isExoticComponent(component);\n  }\n\n  function isClassComponent(component) {\n    return typeof component === 'function' && function () {\n      var proto = Object.getPrototypeOf(component);\n      return proto.prototype && proto.prototype.isReactComponent;\n    }();\n  }\n\n  function isExoticComponent(component) {\n    return typeof component === 'object' && typeof component.$$typeof === 'symbol' && ['react.memo', 'react.forward_ref'].includes(component.$$typeof.description);\n  }\n\n  function linkColumnStructure(columns, parent, depth) {\n    if (depth === void 0) {\n      depth = 0;\n    }\n\n    return columns.map(function (column) {\n      column = _extends({}, column, {\n        parent: parent,\n        depth: depth\n      });\n      assignColumnAccessor(column);\n\n      if (column.columns) {\n        column.columns = linkColumnStructure(column.columns, column, depth + 1);\n      }\n\n      return column;\n    });\n  }\n\n  function flattenColumns(columns) {\n    return flattenBy(columns, 'columns');\n  }\n\n  function assignColumnAccessor(column) {\n    // First check for string accessor\n    var id = column.id,\n        accessor = column.accessor,\n        Header = column.Header;\n\n    if (typeof accessor === 'string') {\n      id = id || accessor;\n      var accessorPath = accessor.split('.');\n\n      accessor = function accessor(row) {\n        return getBy(row, accessorPath);\n      };\n    }\n\n    if (!id && typeof Header === 'string' && Header) {\n      id = Header;\n    }\n\n    if (!id && column.columns) {\n      console.error(column);\n      throw new Error('A column ID (or unique \"Header\" value) is required!');\n    }\n\n    if (!id) {\n      console.error(column);\n      throw new Error('A column ID (or string accessor) is required!');\n    }\n\n    Object.assign(column, {\n      id: id,\n      accessor: accessor\n    });\n    return column;\n  }\n\n  function decorateColumn(column, userDefaultColumn) {\n    if (!userDefaultColumn) {\n      throw new Error();\n    }\n\n    Object.assign(column, _extends({\n      // Make sure there is a fallback header, just in case\n      Header: emptyRenderer,\n      Footer: emptyRenderer\n    }, defaultColumn, {}, userDefaultColumn, {}, column));\n    Object.assign(column, {\n      originalWidth: column.width\n    });\n    return column;\n  } // Build the header groups from the bottom up\n\n\n  function makeHeaderGroups(allColumns, defaultColumn, additionalHeaderProperties) {\n    if (additionalHeaderProperties === void 0) {\n      additionalHeaderProperties = function additionalHeaderProperties() {\n        return {};\n      };\n    }\n\n    var headerGroups = [];\n    var scanColumns = allColumns;\n    var uid = 0;\n\n    var getUID = function getUID() {\n      return uid++;\n    };\n\n    var _loop = function _loop() {\n      // The header group we are creating\n      var headerGroup = {\n        headers: []\n      }; // The parent columns we're going to scan next\n\n      var parentColumns = [];\n      var hasParents = scanColumns.some(function (d) {\n        return d.parent;\n      }); // Scan each column for parents\n\n      scanColumns.forEach(function (column) {\n        // What is the latest (last) parent column?\n        var latestParentColumn = [].concat(parentColumns).reverse()[0];\n        var newParent;\n\n        if (hasParents) {\n          // If the column has a parent, add it if necessary\n          if (column.parent) {\n            newParent = _extends({}, column.parent, {\n              originalId: column.parent.id,\n              id: column.parent.id + \"_\" + getUID(),\n              headers: [column]\n            }, additionalHeaderProperties(column));\n          } else {\n            // If other columns have parents, we'll need to add a place holder if necessary\n            var originalId = column.id + \"_placeholder\";\n            newParent = decorateColumn(_extends({\n              originalId: originalId,\n              id: column.id + \"_placeholder_\" + getUID(),\n              placeholderOf: column,\n              headers: [column]\n            }, additionalHeaderProperties(column)), defaultColumn);\n          } // If the resulting parent columns are the same, just add\n          // the column and increment the header span\n\n\n          if (latestParentColumn && latestParentColumn.originalId === newParent.originalId) {\n            latestParentColumn.headers.push(column);\n          } else {\n            parentColumns.push(newParent);\n          }\n        }\n\n        headerGroup.headers.push(column);\n      });\n      headerGroups.push(headerGroup); // Start scanning the parent columns\n\n      scanColumns = parentColumns;\n    };\n\n    while (scanColumns.length) {\n      _loop();\n    }\n\n    return headerGroups.reverse();\n  }\n\n  var pathObjCache = new Map();\n\n  function getBy(obj, path, def) {\n    if (!path) {\n      return obj;\n    }\n\n    var cacheKey = typeof path === 'function' ? path : JSON.stringify(path);\n\n    var pathObj = pathObjCache.get(cacheKey) || function () {\n      var pathObj = makePathArray(path);\n      pathObjCache.set(cacheKey, pathObj);\n      return pathObj;\n    }();\n\n    var val;\n\n    try {\n      val = pathObj.reduce(function (cursor, pathPart) {\n        return cursor[pathPart];\n      }, obj);\n    } catch (e) {// continue regardless of error\n    }\n\n    return typeof val !== 'undefined' ? val : def;\n  }\n\n  function getFirstDefined() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    for (var i = 0; i < args.length; i += 1) {\n      if (typeof args[i] !== 'undefined') {\n        return args[i];\n      }\n    }\n  }\n\n  function isFunction(a) {\n    if (typeof a === 'function') {\n      return a;\n    }\n  }\n\n  function flattenBy(arr, key) {\n    var flat = [];\n\n    var recurse = function recurse(arr) {\n      arr.forEach(function (d) {\n        if (!d[key]) {\n          flat.push(d);\n        } else {\n          recurse(d[key]);\n        }\n      });\n    };\n\n    recurse(arr);\n    return flat;\n  }\n\n  function expandRows(rows, _ref) {\n    var manualExpandedKey = _ref.manualExpandedKey,\n        expanded = _ref.expanded,\n        _ref$expandSubRows = _ref.expandSubRows,\n        expandSubRows = _ref$expandSubRows === void 0 ? true : _ref$expandSubRows;\n    var expandedRows = [];\n\n    var handleRow = function handleRow(row, addToExpandedRows) {\n      if (addToExpandedRows === void 0) {\n        addToExpandedRows = true;\n      }\n\n      row.isExpanded = row.original && row.original[manualExpandedKey] || expanded[row.id];\n      row.canExpand = row.subRows && !!row.subRows.length;\n\n      if (addToExpandedRows) {\n        expandedRows.push(row);\n      }\n\n      if (row.subRows && row.subRows.length && row.isExpanded) {\n        row.subRows.forEach(function (row) {\n          return handleRow(row, expandSubRows);\n        });\n      }\n    };\n\n    rows.forEach(function (row) {\n      return handleRow(row);\n    });\n    return expandedRows;\n  }\n\n  function getFilterMethod(filter, userFilterTypes, filterTypes) {\n    return isFunction(filter) || userFilterTypes[filter] || filterTypes[filter] || filterTypes.text;\n  }\n\n  function shouldAutoRemoveFilter(autoRemove, value, column) {\n    return autoRemove ? autoRemove(value, column) : typeof value === 'undefined';\n  }\n\n  function unpreparedAccessWarning() {\n    throw new Error('React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.');\n  }\n\n  var passiveSupported = null;\n\n  function passiveEventSupported() {\n    // memoize support to avoid adding multiple test events\n    if (typeof passiveSupported === 'boolean') return passiveSupported;\n    var supported = false;\n\n    try {\n      var options = {\n        get passive() {\n          supported = true;\n          return false;\n        }\n\n      };\n      window.addEventListener('test', null, options);\n      window.removeEventListener('test', null, options);\n    } catch (err) {\n      supported = false;\n    }\n\n    passiveSupported = supported;\n    return passiveSupported;\n  } //\n\n\n  var reOpenBracket = /\\[/g;\n  var reCloseBracket = /\\]/g;\n\n  function makePathArray(obj) {\n    return flattenDeep(obj) // remove all periods in parts\n    .map(function (d) {\n      return String(d).replace('.', '_');\n    }) // join parts using period\n    .join('.') // replace brackets with periods\n    .replace(reOpenBracket, '.').replace(reCloseBracket, '') // split it back out on periods\n    .split('.');\n  }\n\n  function flattenDeep(arr, newArr) {\n    if (newArr === void 0) {\n      newArr = [];\n    }\n\n    if (!Array.isArray(arr)) {\n      newArr.push(arr);\n    } else {\n      for (var i = 0; i < arr.length; i += 1) {\n        flattenDeep(arr[i], newArr);\n      }\n    }\n\n    return newArr;\n  }\n\n  var defaultGetTableProps = function defaultGetTableProps(props) {\n    return _extends({\n      role: 'table'\n    }, props);\n  };\n\n  var defaultGetTableBodyProps = function defaultGetTableBodyProps(props) {\n    return _extends({\n      role: 'rowgroup'\n    }, props);\n  };\n\n  var defaultGetHeaderProps = function defaultGetHeaderProps(props, _ref) {\n    var column = _ref.column;\n    return _extends({\n      key: \"header_\" + column.id,\n      colSpan: column.totalVisibleHeaderCount,\n      role: 'columnheader'\n    }, props);\n  };\n\n  var defaultGetFooterProps = function defaultGetFooterProps(props, _ref2) {\n    var column = _ref2.column;\n    return _extends({\n      key: \"footer_\" + column.id,\n      colSpan: column.totalVisibleHeaderCount\n    }, props);\n  };\n\n  var defaultGetHeaderGroupProps = function defaultGetHeaderGroupProps(props, _ref3) {\n    var index = _ref3.index;\n    return _extends({\n      key: \"headerGroup_\" + index,\n      role: 'row'\n    }, props);\n  };\n\n  var defaultGetFooterGroupProps = function defaultGetFooterGroupProps(props, _ref4) {\n    var index = _ref4.index;\n    return _extends({\n      key: \"footerGroup_\" + index\n    }, props);\n  };\n\n  var defaultGetRowProps = function defaultGetRowProps(props, _ref5) {\n    var row = _ref5.row;\n    return _extends({\n      key: \"row_\" + row.id,\n      role: 'row'\n    }, props);\n  };\n\n  var defaultGetCellProps = function defaultGetCellProps(props, _ref6) {\n    var cell = _ref6.cell;\n    return _extends({\n      key: \"cell_\" + cell.row.id + \"_\" + cell.column.id,\n      role: 'cell'\n    }, props);\n  };\n\n  function makeDefaultPluginHooks() {\n    return {\n      useOptions: [],\n      stateReducers: [],\n      useControlledState: [],\n      columns: [],\n      columnsDeps: [],\n      allColumns: [],\n      allColumnsDeps: [],\n      accessValue: [],\n      materializedColumns: [],\n      materializedColumnsDeps: [],\n      useInstanceAfterData: [],\n      visibleColumns: [],\n      visibleColumnsDeps: [],\n      headerGroups: [],\n      headerGroupsDeps: [],\n      useInstanceBeforeDimensions: [],\n      useInstance: [],\n      prepareRow: [],\n      getTableProps: [defaultGetTableProps],\n      getTableBodyProps: [defaultGetTableBodyProps],\n      getHeaderGroupProps: [defaultGetHeaderGroupProps],\n      getFooterGroupProps: [defaultGetFooterGroupProps],\n      getHeaderProps: [defaultGetHeaderProps],\n      getFooterProps: [defaultGetFooterProps],\n      getRowProps: [defaultGetRowProps],\n      getCellProps: [defaultGetCellProps],\n      useFinalInstance: []\n    };\n  }\n\n  actions.resetHiddenColumns = 'resetHiddenColumns';\n  actions.toggleHideColumn = 'toggleHideColumn';\n  actions.setHiddenColumns = 'setHiddenColumns';\n  actions.toggleHideAllColumns = 'toggleHideAllColumns';\n\n  var useColumnVisibility = function useColumnVisibility(hooks) {\n    hooks.getToggleHiddenProps = [defaultGetToggleHiddenProps];\n    hooks.getToggleHideAllColumnsProps = [defaultGetToggleHideAllColumnsProps];\n    hooks.stateReducers.push(reducer);\n    hooks.useInstanceBeforeDimensions.push(useInstanceBeforeDimensions);\n    hooks.headerGroupsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.hiddenColumns]);\n    });\n    hooks.useInstance.push(useInstance);\n  };\n\n  useColumnVisibility.pluginName = 'useColumnVisibility';\n\n  var defaultGetToggleHiddenProps = function defaultGetToggleHiddenProps(props, _ref2) {\n    var column = _ref2.column;\n    return [props, {\n      onChange: function onChange(e) {\n        column.toggleHidden(!e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: column.isVisible,\n      title: 'Toggle Column Visible'\n    }];\n  };\n\n  var defaultGetToggleHideAllColumnsProps = function defaultGetToggleHideAllColumnsProps(props, _ref3) {\n    var instance = _ref3.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleHideAllColumns(!e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: !instance.allColumnsHidden && !instance.state.hiddenColumns.length,\n      title: 'Toggle All Columns Hidden',\n      indeterminate: !instance.allColumnsHidden && instance.state.hiddenColumns.length\n    }];\n  };\n\n  function reducer(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        hiddenColumns: []\n      }, state);\n    }\n\n    if (action.type === actions.resetHiddenColumns) {\n      return _extends({}, state, {\n        hiddenColumns: instance.initialState.hiddenColumns || []\n      });\n    }\n\n    if (action.type === actions.toggleHideColumn) {\n      var should = typeof action.value !== 'undefined' ? action.value : !state.hiddenColumns.includes(action.columnId);\n      var hiddenColumns = should ? [].concat(state.hiddenColumns, [action.columnId]) : state.hiddenColumns.filter(function (d) {\n        return d !== action.columnId;\n      });\n      return _extends({}, state, {\n        hiddenColumns: hiddenColumns\n      });\n    }\n\n    if (action.type === actions.setHiddenColumns) {\n      return _extends({}, state, {\n        hiddenColumns: functionalUpdate(action.value, state.hiddenColumns)\n      });\n    }\n\n    if (action.type === actions.toggleHideAllColumns) {\n      var shouldAll = typeof action.value !== 'undefined' ? action.value : !state.hiddenColumns.length;\n      return _extends({}, state, {\n        hiddenColumns: shouldAll ? instance.allColumns.map(function (d) {\n          return d.id;\n        }) : []\n      });\n    }\n  }\n\n  function useInstanceBeforeDimensions(instance) {\n    var headers = instance.headers,\n        hiddenColumns = instance.state.hiddenColumns;\n    var isMountedRef = React.useRef(false);\n    if (!isMountedRef.current) ;\n\n    var handleColumn = function handleColumn(column, parentVisible) {\n      column.isVisible = parentVisible && !hiddenColumns.includes(column.id);\n      var totalVisibleHeaderCount = 0;\n\n      if (column.headers && column.headers.length) {\n        column.headers.forEach(function (subColumn) {\n          return totalVisibleHeaderCount += handleColumn(subColumn, column.isVisible);\n        });\n      } else {\n        totalVisibleHeaderCount = column.isVisible ? 1 : 0;\n      }\n\n      column.totalVisibleHeaderCount = totalVisibleHeaderCount;\n      return totalVisibleHeaderCount;\n    };\n\n    var totalVisibleHeaderCount = 0;\n    headers.forEach(function (subHeader) {\n      return totalVisibleHeaderCount += handleColumn(subHeader, true);\n    });\n  }\n\n  function useInstance(instance) {\n    var columns = instance.columns,\n        flatHeaders = instance.flatHeaders,\n        dispatch = instance.dispatch,\n        allColumns = instance.allColumns,\n        getHooks = instance.getHooks,\n        hiddenColumns = instance.state.hiddenColumns,\n        _instance$autoResetHi = instance.autoResetHiddenColumns,\n        autoResetHiddenColumns = _instance$autoResetHi === void 0 ? true : _instance$autoResetHi;\n    var getInstance = useGetLatest(instance);\n    var allColumnsHidden = allColumns.length === hiddenColumns.length;\n    var toggleHideColumn = React.useCallback(function (columnId, value) {\n      return dispatch({\n        type: actions.toggleHideColumn,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var setHiddenColumns = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.setHiddenColumns,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleHideAllColumns = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleHideAllColumns,\n        value: value\n      });\n    }, [dispatch]);\n    var getToggleHideAllColumnsProps = makePropGetter(getHooks().getToggleHideAllColumnsProps, {\n      instance: getInstance()\n    });\n    flatHeaders.forEach(function (column) {\n      column.toggleHidden = function (value) {\n        dispatch({\n          type: actions.toggleHideColumn,\n          columnId: column.id,\n          value: value\n        });\n      };\n\n      column.getToggleHiddenProps = makePropGetter(getHooks().getToggleHiddenProps, {\n        instance: getInstance(),\n        column: column\n      });\n    });\n    var getAutoResetHiddenColumns = useGetLatest(autoResetHiddenColumns);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetHiddenColumns()) {\n        dispatch({\n          type: actions.resetHiddenColumns\n        });\n      }\n    }, [dispatch, columns]);\n    Object.assign(instance, {\n      allColumnsHidden: allColumnsHidden,\n      toggleHideColumn: toggleHideColumn,\n      setHiddenColumns: setHiddenColumns,\n      toggleHideAllColumns: toggleHideAllColumns,\n      getToggleHideAllColumnsProps: getToggleHideAllColumnsProps\n    });\n  }\n\n  var defaultInitialState = {};\n  var defaultColumnInstance = {};\n\n  var defaultReducer = function defaultReducer(state, action, prevState) {\n    return state;\n  };\n\n  var defaultGetSubRows = function defaultGetSubRows(row, index) {\n    return row.subRows || [];\n  };\n\n  var defaultGetRowId = function defaultGetRowId(row, index, parent) {\n    return \"\" + (parent ? [parent.id, index].join('.') : index);\n  };\n\n  var defaultUseControlledState = function defaultUseControlledState(d) {\n    return d;\n  };\n\n  function applyDefaults(props) {\n    var _props$initialState = props.initialState,\n        initialState = _props$initialState === void 0 ? defaultInitialState : _props$initialState,\n        _props$defaultColumn = props.defaultColumn,\n        defaultColumn = _props$defaultColumn === void 0 ? defaultColumnInstance : _props$defaultColumn,\n        _props$getSubRows = props.getSubRows,\n        getSubRows = _props$getSubRows === void 0 ? defaultGetSubRows : _props$getSubRows,\n        _props$getRowId = props.getRowId,\n        getRowId = _props$getRowId === void 0 ? defaultGetRowId : _props$getRowId,\n        _props$stateReducer = props.stateReducer,\n        stateReducer = _props$stateReducer === void 0 ? defaultReducer : _props$stateReducer,\n        _props$useControlledS = props.useControlledState,\n        useControlledState = _props$useControlledS === void 0 ? defaultUseControlledState : _props$useControlledS,\n        rest = _objectWithoutPropertiesLoose(props, [\"initialState\", \"defaultColumn\", \"getSubRows\", \"getRowId\", \"stateReducer\", \"useControlledState\"]);\n\n    return _extends({}, rest, {\n      initialState: initialState,\n      defaultColumn: defaultColumn,\n      getSubRows: getSubRows,\n      getRowId: getRowId,\n      stateReducer: stateReducer,\n      useControlledState: useControlledState\n    });\n  }\n\n  var useTable = function useTable(props) {\n    for (var _len = arguments.length, plugins = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      plugins[_key - 1] = arguments[_key];\n    } // Apply default props\n\n\n    props = applyDefaults(props); // Add core plugins\n\n    plugins = [useColumnVisibility].concat(plugins); // Create the table instance\n\n    var instanceRef = React.useRef({}); // Create a getter for the instance (helps avoid a lot of potential memory leaks)\n\n    var getInstance = useGetLatest(instanceRef.current); // Assign the props, plugins and hooks to the instance\n\n    Object.assign(getInstance(), _extends({}, props, {\n      plugins: plugins,\n      hooks: makeDefaultPluginHooks()\n    })); // Allow plugins to register hooks as early as possible\n\n    plugins.filter(Boolean).forEach(function (plugin) {\n      plugin(getInstance().hooks);\n    }); // Consume all hooks and make a getter for them\n\n    var getHooks = useGetLatest(getInstance().hooks);\n    getInstance().getHooks = getHooks;\n    delete getInstance().hooks; // Allow useOptions hooks to modify the options coming into the table\n\n    Object.assign(getInstance(), reduceHooks(getHooks().useOptions, applyDefaults(props)));\n\n    var _getInstance = getInstance(),\n        data = _getInstance.data,\n        userColumns = _getInstance.columns,\n        initialState = _getInstance.initialState,\n        defaultColumn = _getInstance.defaultColumn,\n        getSubRows = _getInstance.getSubRows,\n        getRowId = _getInstance.getRowId,\n        stateReducer = _getInstance.stateReducer,\n        useControlledState = _getInstance.useControlledState; // Setup user reducer ref\n\n\n    var getStateReducer = useGetLatest(stateReducer); // Build the reducer\n\n    var reducer = React.useCallback(function (state, action) {\n      // Detect invalid actions\n      if (!action.type) {\n        console.info({\n          action: action\n        });\n        throw new Error('Unknown Action 👆');\n      } // Reduce the state from all plugin reducers\n\n\n      return [].concat(getHooks().stateReducers, Array.isArray(getStateReducer()) ? getStateReducer() : [getStateReducer()]).reduce(function (s, handler) {\n        return handler(s, action, state, getInstance()) || s;\n      }, state);\n    }, [getHooks, getStateReducer, getInstance]); // Start the reducer\n\n    var _React$useReducer = React.useReducer(reducer, undefined, function () {\n      return reducer(initialState, {\n        type: actions.init\n      });\n    }),\n        reducerState = _React$useReducer[0],\n        dispatch = _React$useReducer[1]; // Allow the user to control the final state with hooks\n\n\n    var state = reduceHooks([].concat(getHooks().useControlledState, [useControlledState]), reducerState, {\n      instance: getInstance()\n    });\n    Object.assign(getInstance(), {\n      state: state,\n      dispatch: dispatch\n    }); // Decorate All the columns\n\n    var columns = React.useMemo(function () {\n      return linkColumnStructure(reduceHooks(getHooks().columns, userColumns, {\n        instance: getInstance()\n      }));\n    }, [getHooks, getInstance, userColumns].concat(reduceHooks(getHooks().columnsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().columns = columns; // Get the flat list of all columns and allow hooks to decorate\n    // those columns (and trigger this memoization via deps)\n\n    var allColumns = React.useMemo(function () {\n      return reduceHooks(getHooks().allColumns, flattenColumns(columns), {\n        instance: getInstance()\n      }).map(assignColumnAccessor);\n    }, [columns, getHooks, getInstance].concat(reduceHooks(getHooks().allColumnsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().allColumns = allColumns; // Access the row model using initial columns\n\n    var _React$useMemo = React.useMemo(function () {\n      var rows = [];\n      var flatRows = [];\n      var rowsById = {};\n      var allColumnsQueue = [].concat(allColumns);\n\n      while (allColumnsQueue.length) {\n        var column = allColumnsQueue.shift();\n        accessRowsForColumn({\n          data: data,\n          rows: rows,\n          flatRows: flatRows,\n          rowsById: rowsById,\n          column: column,\n          getRowId: getRowId,\n          getSubRows: getSubRows,\n          accessValueHooks: getHooks().accessValue,\n          getInstance: getInstance\n        });\n      }\n\n      return [rows, flatRows, rowsById];\n    }, [allColumns, data, getRowId, getSubRows, getHooks, getInstance]),\n        rows = _React$useMemo[0],\n        flatRows = _React$useMemo[1],\n        rowsById = _React$useMemo[2];\n\n    Object.assign(getInstance(), {\n      rows: rows,\n      initialRows: [].concat(rows),\n      flatRows: flatRows,\n      rowsById: rowsById // materializedColumns,\n\n    });\n    loopHooks(getHooks().useInstanceAfterData, getInstance()); // Get the flat list of all columns AFTER the rows\n    // have been access, and allow hooks to decorate\n    // those columns (and trigger this memoization via deps)\n\n    var visibleColumns = React.useMemo(function () {\n      return reduceHooks(getHooks().visibleColumns, allColumns, {\n        instance: getInstance()\n      }).map(function (d) {\n        return decorateColumn(d, defaultColumn);\n      });\n    }, [getHooks, allColumns, getInstance, defaultColumn].concat(reduceHooks(getHooks().visibleColumnsDeps, [], {\n      instance: getInstance()\n    }))); // Combine new visible columns with all columns\n\n    allColumns = React.useMemo(function () {\n      var columns = [].concat(visibleColumns);\n      allColumns.forEach(function (column) {\n        if (!columns.find(function (d) {\n          return d.id === column.id;\n        })) {\n          columns.push(column);\n        }\n      });\n      return columns;\n    }, [allColumns, visibleColumns]);\n    getInstance().allColumns = allColumns;\n    {\n      var duplicateColumns = allColumns.filter(function (column, i) {\n        return allColumns.findIndex(function (d) {\n          return d.id === column.id;\n        }) !== i;\n      });\n\n      if (duplicateColumns.length) {\n        console.info(allColumns);\n        throw new Error(\"Duplicate columns were found with ids: \\\"\" + duplicateColumns.map(function (d) {\n          return d.id;\n        }).join(', ') + \"\\\" in the columns array above\");\n      }\n    } // Make the headerGroups\n\n    var headerGroups = React.useMemo(function () {\n      return reduceHooks(getHooks().headerGroups, makeHeaderGroups(visibleColumns, defaultColumn), getInstance());\n    }, [getHooks, visibleColumns, defaultColumn, getInstance].concat(reduceHooks(getHooks().headerGroupsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().headerGroups = headerGroups; // Get the first level of headers\n\n    var headers = React.useMemo(function () {\n      return headerGroups.length ? headerGroups[0].headers : [];\n    }, [headerGroups]);\n    getInstance().headers = headers; // Provide a flat header list for utilities\n\n    getInstance().flatHeaders = headerGroups.reduce(function (all, headerGroup) {\n      return [].concat(all, headerGroup.headers);\n    }, []);\n    loopHooks(getHooks().useInstanceBeforeDimensions, getInstance()); // Filter columns down to visible ones\n\n    var visibleColumnsDep = visibleColumns.filter(function (d) {\n      return d.isVisible;\n    }).map(function (d) {\n      return d.id;\n    }).sort().join('_');\n    visibleColumns = React.useMemo(function () {\n      return visibleColumns.filter(function (d) {\n        return d.isVisible;\n      });\n    }, // eslint-disable-next-line react-hooks/exhaustive-deps\n    [visibleColumns, visibleColumnsDep]);\n    getInstance().visibleColumns = visibleColumns; // Header Visibility is needed by this point\n\n    var _calculateHeaderWidth = calculateHeaderWidths(headers),\n        totalColumnsMinWidth = _calculateHeaderWidth[0],\n        totalColumnsWidth = _calculateHeaderWidth[1],\n        totalColumnsMaxWidth = _calculateHeaderWidth[2];\n\n    getInstance().totalColumnsMinWidth = totalColumnsMinWidth;\n    getInstance().totalColumnsWidth = totalColumnsWidth;\n    getInstance().totalColumnsMaxWidth = totalColumnsMaxWidth;\n    loopHooks(getHooks().useInstance, getInstance()) // Each materialized header needs to be assigned a render function and other\n    // prop getter properties here.\n    ;\n    [].concat(getInstance().flatHeaders, getInstance().allColumns).forEach(function (column) {\n      // Give columns/headers rendering power\n      column.render = makeRenderer(getInstance(), column); // Give columns/headers a default getHeaderProps\n\n      column.getHeaderProps = makePropGetter(getHooks().getHeaderProps, {\n        instance: getInstance(),\n        column: column\n      }); // Give columns/headers a default getFooterProps\n\n      column.getFooterProps = makePropGetter(getHooks().getFooterProps, {\n        instance: getInstance(),\n        column: column\n      });\n    });\n    getInstance().headerGroups = React.useMemo(function () {\n      return headerGroups.filter(function (headerGroup, i) {\n        // Filter out any headers and headerGroups that don't have visible columns\n        headerGroup.headers = headerGroup.headers.filter(function (column) {\n          var recurse = function recurse(headers) {\n            return headers.filter(function (column) {\n              if (column.headers) {\n                return recurse(column.headers);\n              }\n\n              return column.isVisible;\n            }).length;\n          };\n\n          if (column.headers) {\n            return recurse(column.headers);\n          }\n\n          return column.isVisible;\n        }); // Give headerGroups getRowProps\n\n        if (headerGroup.headers.length) {\n          headerGroup.getHeaderGroupProps = makePropGetter(getHooks().getHeaderGroupProps, {\n            instance: getInstance(),\n            headerGroup: headerGroup,\n            index: i\n          });\n          headerGroup.getFooterGroupProps = makePropGetter(getHooks().getFooterGroupProps, {\n            instance: getInstance(),\n            headerGroup: headerGroup,\n            index: i\n          });\n          return true;\n        }\n\n        return false;\n      });\n    }, [headerGroups, getInstance, getHooks]);\n    getInstance().footerGroups = [].concat(getInstance().headerGroups).reverse(); // The prepareRow function is absolutely necessary and MUST be called on\n    // any rows the user wishes to be displayed.\n\n    getInstance().prepareRow = React.useCallback(function (row) {\n      row.getRowProps = makePropGetter(getHooks().getRowProps, {\n        instance: getInstance(),\n        row: row\n      }); // Build the visible cells for each row\n\n      row.allCells = allColumns.map(function (column) {\n        var value = row.values[column.id];\n        var cell = {\n          column: column,\n          row: row,\n          value: value\n        }; // Give each cell a getCellProps base\n\n        cell.getCellProps = makePropGetter(getHooks().getCellProps, {\n          instance: getInstance(),\n          cell: cell\n        }); // Give each cell a renderer function (supports multiple renderers)\n\n        cell.render = makeRenderer(getInstance(), column, {\n          row: row,\n          cell: cell,\n          value: value\n        });\n        return cell;\n      });\n      row.cells = visibleColumns.map(function (column) {\n        return row.allCells.find(function (cell) {\n          return cell.column.id === column.id;\n        });\n      }); // need to apply any row specific hooks (useExpanded requires this)\n\n      loopHooks(getHooks().prepareRow, row, {\n        instance: getInstance()\n      });\n    }, [getHooks, getInstance, allColumns, visibleColumns]);\n    getInstance().getTableProps = makePropGetter(getHooks().getTableProps, {\n      instance: getInstance()\n    });\n    getInstance().getTableBodyProps = makePropGetter(getHooks().getTableBodyProps, {\n      instance: getInstance()\n    });\n    loopHooks(getHooks().useFinalInstance, getInstance());\n    return getInstance();\n  };\n\n  function calculateHeaderWidths(headers, left) {\n    if (left === void 0) {\n      left = 0;\n    }\n\n    var sumTotalMinWidth = 0;\n    var sumTotalWidth = 0;\n    var sumTotalMaxWidth = 0;\n    var sumTotalFlexWidth = 0;\n    headers.forEach(function (header) {\n      var subHeaders = header.headers;\n      header.totalLeft = left;\n\n      if (subHeaders && subHeaders.length) {\n        var _calculateHeaderWidth2 = calculateHeaderWidths(subHeaders, left),\n            totalMinWidth = _calculateHeaderWidth2[0],\n            totalWidth = _calculateHeaderWidth2[1],\n            totalMaxWidth = _calculateHeaderWidth2[2],\n            totalFlexWidth = _calculateHeaderWidth2[3];\n\n        header.totalMinWidth = totalMinWidth;\n        header.totalWidth = totalWidth;\n        header.totalMaxWidth = totalMaxWidth;\n        header.totalFlexWidth = totalFlexWidth;\n      } else {\n        header.totalMinWidth = header.minWidth;\n        header.totalWidth = Math.min(Math.max(header.minWidth, header.width), header.maxWidth);\n        header.totalMaxWidth = header.maxWidth;\n        header.totalFlexWidth = header.canResize ? header.totalWidth : 0;\n      }\n\n      if (header.isVisible) {\n        left += header.totalWidth;\n        sumTotalMinWidth += header.totalMinWidth;\n        sumTotalWidth += header.totalWidth;\n        sumTotalMaxWidth += header.totalMaxWidth;\n        sumTotalFlexWidth += header.totalFlexWidth;\n      }\n    });\n    return [sumTotalMinWidth, sumTotalWidth, sumTotalMaxWidth, sumTotalFlexWidth];\n  }\n\n  function accessRowsForColumn(_ref) {\n    var data = _ref.data,\n        rows = _ref.rows,\n        flatRows = _ref.flatRows,\n        rowsById = _ref.rowsById,\n        column = _ref.column,\n        getRowId = _ref.getRowId,\n        getSubRows = _ref.getSubRows,\n        accessValueHooks = _ref.accessValueHooks,\n        getInstance = _ref.getInstance; // Access the row's data column-by-column\n    // We do it this way so we can incrementally add materialized\n    // columns after the first pass and avoid excessive looping\n\n    var accessRow = function accessRow(originalRow, rowIndex, depth, parent, parentRows) {\n      if (depth === void 0) {\n        depth = 0;\n      } // Keep the original reference around\n\n\n      var original = originalRow;\n      var id = getRowId(originalRow, rowIndex, parent);\n      var row = rowsById[id]; // If the row hasn't been created, let's make it\n\n      if (!row) {\n        row = {\n          id: id,\n          original: original,\n          index: rowIndex,\n          depth: depth,\n          cells: [{}] // This is a dummy cell\n\n        }; // Override common array functions (and the dummy cell's getCellProps function)\n        // to show an error if it is accessed without calling prepareRow\n\n        row.cells.map = unpreparedAccessWarning;\n        row.cells.filter = unpreparedAccessWarning;\n        row.cells.forEach = unpreparedAccessWarning;\n        row.cells[0].getCellProps = unpreparedAccessWarning; // Create the cells and values\n\n        row.values = {}; // Push this row into the parentRows array\n\n        parentRows.push(row); // Keep track of every row in a flat array\n\n        flatRows.push(row); // Also keep track of every row by its ID\n\n        rowsById[id] = row; // Get the original subrows\n\n        row.originalSubRows = getSubRows(originalRow, rowIndex); // Then recursively access them\n\n        if (row.originalSubRows) {\n          var subRows = [];\n          row.originalSubRows.forEach(function (d, i) {\n            return accessRow(d, i, depth + 1, row, subRows);\n          }); // Keep the new subRows array on the row\n\n          row.subRows = subRows;\n        }\n      } else if (row.subRows) {\n        // If the row exists, then it's already been accessed\n        // Keep recursing, but don't worry about passing the\n        // accumlator array (those rows already exist)\n        row.originalSubRows.forEach(function (d, i) {\n          return accessRow(d, i, depth + 1, row);\n        });\n      } // If the column has an accessor, use it to get a value\n\n\n      if (column.accessor) {\n        row.values[column.id] = column.accessor(originalRow, rowIndex, row, parentRows, data);\n      } // Allow plugins to manipulate the column value\n\n\n      row.values[column.id] = reduceHooks(accessValueHooks, row.values[column.id], {\n        row: row,\n        column: column,\n        instance: getInstance()\n      }, true);\n    };\n\n    data.forEach(function (originalRow, rowIndex) {\n      return accessRow(originalRow, rowIndex, 0, undefined, rows);\n    });\n  }\n\n  actions.resetExpanded = 'resetExpanded';\n  actions.toggleRowExpanded = 'toggleRowExpanded';\n  actions.toggleAllRowsExpanded = 'toggleAllRowsExpanded';\n\n  var useExpanded = function useExpanded(hooks) {\n    hooks.getToggleAllRowsExpandedProps = [defaultGetToggleAllRowsExpandedProps];\n    hooks.getToggleRowExpandedProps = [defaultGetToggleRowExpandedProps];\n    hooks.stateReducers.push(reducer$1);\n    hooks.useInstance.push(useInstance$1);\n    hooks.prepareRow.push(prepareRow);\n  };\n\n  useExpanded.pluginName = 'useExpanded';\n\n  var defaultGetToggleAllRowsExpandedProps = function defaultGetToggleAllRowsExpandedProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      onClick: function onClick(e) {\n        instance.toggleAllRowsExpanded();\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      title: 'Toggle All Rows Expanded'\n    }];\n  };\n\n  var defaultGetToggleRowExpandedProps = function defaultGetToggleRowExpandedProps(props, _ref2) {\n    var row = _ref2.row;\n    return [props, {\n      onClick: function onClick() {\n        row.toggleRowExpanded();\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      title: 'Toggle Row Expanded'\n    }];\n  }; // Reducer\n\n\n  function reducer$1(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        expanded: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetExpanded) {\n      return _extends({}, state, {\n        expanded: instance.initialState.expanded || {}\n      });\n    }\n\n    if (action.type === actions.toggleAllRowsExpanded) {\n      var value = action.value;\n      var isAllRowsExpanded = instance.isAllRowsExpanded,\n          rowsById = instance.rowsById;\n      var expandAll = typeof value !== 'undefined' ? value : !isAllRowsExpanded;\n\n      if (expandAll) {\n        var expanded = {};\n        Object.keys(rowsById).forEach(function (rowId) {\n          expanded[rowId] = true;\n        });\n        return _extends({}, state, {\n          expanded: expanded\n        });\n      }\n\n      return _extends({}, state, {\n        expanded: {}\n      });\n    }\n\n    if (action.type === actions.toggleRowExpanded) {\n      var id = action.id,\n          setExpanded = action.value;\n      var exists = state.expanded[id];\n      var shouldExist = typeof setExpanded !== 'undefined' ? setExpanded : !exists;\n\n      if (!exists && shouldExist) {\n        var _extends2;\n\n        return _extends({}, state, {\n          expanded: _extends({}, state.expanded, (_extends2 = {}, _extends2[id] = true, _extends2))\n        });\n      } else if (exists && !shouldExist) {\n        var _state$expanded = state.expanded,\n            _ = _state$expanded[id],\n            rest = _objectWithoutPropertiesLoose(_state$expanded, [id].map(_toPropertyKey));\n\n        return _extends({}, state, {\n          expanded: rest\n        });\n      } else {\n        return state;\n      }\n    }\n  }\n\n  function useInstance$1(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        rowsById = instance.rowsById,\n        _instance$manualExpan = instance.manualExpandedKey,\n        manualExpandedKey = _instance$manualExpan === void 0 ? 'expanded' : _instance$manualExpan,\n        _instance$paginateExp = instance.paginateExpandedRows,\n        paginateExpandedRows = _instance$paginateExp === void 0 ? true : _instance$paginateExp,\n        _instance$expandSubRo = instance.expandSubRows,\n        expandSubRows = _instance$expandSubRo === void 0 ? true : _instance$expandSubRo,\n        _instance$autoResetEx = instance.autoResetExpanded,\n        autoResetExpanded = _instance$autoResetEx === void 0 ? true : _instance$autoResetEx,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        expanded = instance.state.expanded,\n        dispatch = instance.dispatch;\n    ensurePluginOrder(plugins, ['useSortBy', 'useGroupBy', 'usePivotColumns', 'useGlobalFilter'], 'useExpanded');\n    var getAutoResetExpanded = useGetLatest(autoResetExpanded);\n    var isAllRowsExpanded = Boolean(Object.keys(rowsById).length && Object.keys(expanded).length);\n\n    if (isAllRowsExpanded) {\n      if (Object.keys(rowsById).some(function (id) {\n        return !expanded[id];\n      })) {\n        isAllRowsExpanded = false;\n      }\n    } // Bypass any effects from firing when this changes\n\n\n    useMountedLayoutEffect(function () {\n      if (getAutoResetExpanded()) {\n        dispatch({\n          type: actions.resetExpanded\n        });\n      }\n    }, [dispatch, data]);\n    var toggleRowExpanded = React.useCallback(function (id, value) {\n      dispatch({\n        type: actions.toggleRowExpanded,\n        id: id,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleAllRowsExpanded = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllRowsExpanded,\n        value: value\n      });\n    }, [dispatch]);\n    var expandedRows = React.useMemo(function () {\n      if (paginateExpandedRows) {\n        return expandRows(rows, {\n          manualExpandedKey: manualExpandedKey,\n          expanded: expanded,\n          expandSubRows: expandSubRows\n        });\n      }\n\n      return rows;\n    }, [paginateExpandedRows, rows, manualExpandedKey, expanded, expandSubRows]);\n    var expandedDepth = React.useMemo(function () {\n      return findExpandedDepth(expanded);\n    }, [expanded]);\n    var getInstance = useGetLatest(instance);\n    var getToggleAllRowsExpandedProps = makePropGetter(getHooks().getToggleAllRowsExpandedProps, {\n      instance: getInstance()\n    });\n    Object.assign(instance, {\n      preExpandedRows: rows,\n      expandedRows: expandedRows,\n      rows: expandedRows,\n      expandedDepth: expandedDepth,\n      isAllRowsExpanded: isAllRowsExpanded,\n      toggleRowExpanded: toggleRowExpanded,\n      toggleAllRowsExpanded: toggleAllRowsExpanded,\n      getToggleAllRowsExpandedProps: getToggleAllRowsExpandedProps\n    });\n  }\n\n  function prepareRow(row, _ref3) {\n    var getHooks = _ref3.instance.getHooks,\n        instance = _ref3.instance;\n\n    row.toggleRowExpanded = function (set) {\n      return instance.toggleRowExpanded(row.id, set);\n    };\n\n    row.getToggleRowExpandedProps = makePropGetter(getHooks().getToggleRowExpandedProps, {\n      instance: instance,\n      row: row\n    });\n  }\n\n  function findExpandedDepth(expanded) {\n    var maxDepth = 0;\n    Object.keys(expanded).forEach(function (id) {\n      var splitId = id.split('.');\n      maxDepth = Math.max(maxDepth, splitId.length);\n    });\n    return maxDepth;\n  }\n\n  var text = function text(rows, ids, filterValue) {\n    rows = rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return String(rowValue).toLowerCase().includes(String(filterValue).toLowerCase());\n      });\n    });\n    return rows;\n  };\n\n  text.autoRemove = function (val) {\n    return !val;\n  };\n\n  var exactText = function exactText(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue !== undefined ? String(rowValue).toLowerCase() === String(filterValue).toLowerCase() : true;\n      });\n    });\n  };\n\n  exactText.autoRemove = function (val) {\n    return !val;\n  };\n\n  var exactTextCase = function exactTextCase(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue !== undefined ? String(rowValue) === String(filterValue) : true;\n      });\n    });\n  };\n\n  exactTextCase.autoRemove = function (val) {\n    return !val;\n  };\n\n  var includes = function includes(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue.includes(filterValue);\n      });\n    });\n  };\n\n  includes.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesAll = function includesAll(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue && rowValue.length && filterValue.every(function (val) {\n          return rowValue.includes(val);\n        });\n      });\n    });\n  };\n\n  includesAll.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesSome = function includesSome(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue && rowValue.length && filterValue.some(function (val) {\n          return rowValue.includes(val);\n        });\n      });\n    });\n  };\n\n  includesSome.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesValue = function includesValue(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return filterValue.includes(rowValue);\n      });\n    });\n  };\n\n  includesValue.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var exact = function exact(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue === filterValue;\n      });\n    });\n  };\n\n  exact.autoRemove = function (val) {\n    return typeof val === 'undefined';\n  };\n\n  var equals = function equals(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id]; // eslint-disable-next-line eqeqeq\n\n        return rowValue == filterValue;\n      });\n    });\n  };\n\n  equals.autoRemove = function (val) {\n    return val == null;\n  };\n\n  var between = function between(rows, ids, filterValue) {\n    var _ref = filterValue || [],\n        min = _ref[0],\n        max = _ref[1];\n\n    min = typeof min === 'number' ? min : -Infinity;\n    max = typeof max === 'number' ? max : Infinity;\n\n    if (min > max) {\n      var temp = min;\n      min = max;\n      max = temp;\n    }\n\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue >= min && rowValue <= max;\n      });\n    });\n  };\n\n  between.autoRemove = function (val) {\n    return !val || typeof val[0] !== 'number' && typeof val[1] !== 'number';\n  };\n\n  var filterTypes = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    text: text,\n    exactText: exactText,\n    exactTextCase: exactTextCase,\n    includes: includes,\n    includesAll: includesAll,\n    includesSome: includesSome,\n    includesValue: includesValue,\n    exact: exact,\n    equals: equals,\n    between: between\n  });\n  actions.resetFilters = 'resetFilters';\n  actions.setFilter = 'setFilter';\n  actions.setAllFilters = 'setAllFilters';\n\n  var useFilters = function useFilters(hooks) {\n    hooks.stateReducers.push(reducer$2);\n    hooks.useInstance.push(useInstance$2);\n  };\n\n  useFilters.pluginName = 'useFilters';\n\n  function reducer$2(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        filters: []\n      }, state);\n    }\n\n    if (action.type === actions.resetFilters) {\n      return _extends({}, state, {\n        filters: instance.initialState.filters || []\n      });\n    }\n\n    if (action.type === actions.setFilter) {\n      var columnId = action.columnId,\n          filterValue = action.filterValue;\n      var allColumns = instance.allColumns,\n          userFilterTypes = instance.filterTypes;\n      var column = allColumns.find(function (d) {\n        return d.id === columnId;\n      });\n\n      if (!column) {\n        throw new Error(\"React-Table: Could not find a column with id: \" + columnId);\n      }\n\n      var filterMethod = getFilterMethod(column.filter, userFilterTypes || {}, filterTypes);\n      var previousfilter = state.filters.find(function (d) {\n        return d.id === columnId;\n      });\n      var newFilter = functionalUpdate(filterValue, previousfilter && previousfilter.value); //\n\n      if (shouldAutoRemoveFilter(filterMethod.autoRemove, newFilter, column)) {\n        return _extends({}, state, {\n          filters: state.filters.filter(function (d) {\n            return d.id !== columnId;\n          })\n        });\n      }\n\n      if (previousfilter) {\n        return _extends({}, state, {\n          filters: state.filters.map(function (d) {\n            if (d.id === columnId) {\n              return {\n                id: columnId,\n                value: newFilter\n              };\n            }\n\n            return d;\n          })\n        });\n      }\n\n      return _extends({}, state, {\n        filters: [].concat(state.filters, [{\n          id: columnId,\n          value: newFilter\n        }])\n      });\n    }\n\n    if (action.type === actions.setAllFilters) {\n      var filters = action.filters;\n      var _allColumns = instance.allColumns,\n          _userFilterTypes = instance.filterTypes;\n      return _extends({}, state, {\n        // Filter out undefined values\n        filters: functionalUpdate(filters, state.filters).filter(function (filter) {\n          var column = _allColumns.find(function (d) {\n            return d.id === filter.id;\n          });\n\n          var filterMethod = getFilterMethod(column.filter, _userFilterTypes || {}, filterTypes);\n\n          if (shouldAutoRemoveFilter(filterMethod.autoRemove, filter.value, column)) {\n            return false;\n          }\n\n          return true;\n        })\n      });\n    }\n  }\n\n  function useInstance$2(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        userFilterTypes = instance.filterTypes,\n        manualFilters = instance.manualFilters,\n        _instance$defaultCanF = instance.defaultCanFilter,\n        defaultCanFilter = _instance$defaultCanF === void 0 ? false : _instance$defaultCanF,\n        disableFilters = instance.disableFilters,\n        filters = instance.state.filters,\n        dispatch = instance.dispatch,\n        _instance$autoResetFi = instance.autoResetFilters,\n        autoResetFilters = _instance$autoResetFi === void 0 ? true : _instance$autoResetFi;\n    var setFilter = React.useCallback(function (columnId, filterValue) {\n      dispatch({\n        type: actions.setFilter,\n        columnId: columnId,\n        filterValue: filterValue\n      });\n    }, [dispatch]);\n    var setAllFilters = React.useCallback(function (filters) {\n      dispatch({\n        type: actions.setAllFilters,\n        filters: filters\n      });\n    }, [dispatch]);\n    allColumns.forEach(function (column) {\n      var id = column.id,\n          accessor = column.accessor,\n          columnDefaultCanFilter = column.defaultCanFilter,\n          columnDisableFilters = column.disableFilters; // Determine if a column is filterable\n\n      column.canFilter = accessor ? getFirstDefined(columnDisableFilters === true ? false : undefined, disableFilters === true ? false : undefined, true) : getFirstDefined(columnDefaultCanFilter, defaultCanFilter, false); // Provide the column a way of updating the filter value\n\n      column.setFilter = function (val) {\n        return setFilter(column.id, val);\n      }; // Provide the current filter value to the column for\n      // convenience\n\n\n      var found = filters.find(function (d) {\n        return d.id === id;\n      });\n      column.filterValue = found && found.value;\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualFilters || !filters.length) {\n        return [rows, flatRows, rowsById];\n      }\n\n      var filteredFlatRows = [];\n      var filteredRowsById = {}; // Filters top level and nested rows\n\n      var filterRows = function filterRows(rows, depth) {\n        if (depth === void 0) {\n          depth = 0;\n        }\n\n        var filteredRows = rows;\n        filteredRows = filters.reduce(function (filteredSoFar, _ref) {\n          var columnId = _ref.id,\n              filterValue = _ref.value; // Find the filters column\n\n          var column = allColumns.find(function (d) {\n            return d.id === columnId;\n          });\n\n          if (!column) {\n            return filteredSoFar;\n          }\n\n          if (depth === 0) {\n            column.preFilteredRows = filteredSoFar;\n          }\n\n          var filterMethod = getFilterMethod(column.filter, userFilterTypes || {}, filterTypes);\n\n          if (!filterMethod) {\n            console.warn(\"Could not find a valid 'column.filter' for column with the ID: \" + column.id + \".\");\n            return filteredSoFar;\n          } // Pass the rows, id, filterValue and column to the filterMethod\n          // to get the filtered rows back\n\n\n          column.filteredRows = filterMethod(filteredSoFar, [columnId], filterValue);\n          return column.filteredRows;\n        }, rows); // Apply the filter to any subRows\n        // We technically could do this recursively in the above loop,\n        // but that would severely hinder the API for the user, since they\n        // would be required to do that recursion in some scenarios\n\n        filteredRows.forEach(function (row) {\n          filteredFlatRows.push(row);\n          filteredRowsById[row.id] = row;\n\n          if (!row.subRows) {\n            return;\n          }\n\n          row.subRows = row.subRows && row.subRows.length > 0 ? filterRows(row.subRows, depth + 1) : row.subRows;\n        });\n        return filteredRows;\n      };\n\n      return [filterRows(rows), filteredFlatRows, filteredRowsById];\n    }, [manualFilters, filters, rows, flatRows, rowsById, allColumns, userFilterTypes]),\n        filteredRows = _React$useMemo[0],\n        filteredFlatRows = _React$useMemo[1],\n        filteredRowsById = _React$useMemo[2];\n\n    React.useMemo(function () {\n      // Now that each filtered column has it's partially filtered rows,\n      // lets assign the final filtered rows to all of the other columns\n      var nonFilteredColumns = allColumns.filter(function (column) {\n        return !filters.find(function (d) {\n          return d.id === column.id;\n        });\n      }); // This essentially enables faceted filter options to be built easily\n      // using every column's preFilteredRows value\n\n      nonFilteredColumns.forEach(function (column) {\n        column.preFilteredRows = filteredRows;\n        column.filteredRows = filteredRows;\n      });\n    }, [filteredRows, filters, allColumns]);\n    var getAutoResetFilters = useGetLatest(autoResetFilters);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetFilters()) {\n        dispatch({\n          type: actions.resetFilters\n        });\n      }\n    }, [dispatch, manualFilters ? null : data]);\n    Object.assign(instance, {\n      preFilteredRows: rows,\n      preFilteredFlatRows: flatRows,\n      preFilteredRowsById: rowsById,\n      filteredRows: filteredRows,\n      filteredFlatRows: filteredFlatRows,\n      filteredRowsById: filteredRowsById,\n      rows: filteredRows,\n      flatRows: filteredFlatRows,\n      rowsById: filteredRowsById,\n      setFilter: setFilter,\n      setAllFilters: setAllFilters\n    });\n  }\n\n  actions.resetGlobalFilter = 'resetGlobalFilter';\n  actions.setGlobalFilter = 'setGlobalFilter';\n\n  var useGlobalFilter = function useGlobalFilter(hooks) {\n    hooks.stateReducers.push(reducer$3);\n    hooks.useInstance.push(useInstance$3);\n  };\n\n  useGlobalFilter.pluginName = 'useGlobalFilter';\n\n  function reducer$3(state, action, previousState, instance) {\n    if (action.type === actions.resetGlobalFilter) {\n      return _extends({}, state, {\n        globalFilter: instance.initialState.globalFilter || undefined\n      });\n    }\n\n    if (action.type === actions.setGlobalFilter) {\n      var filterValue = action.filterValue;\n      var userFilterTypes = instance.userFilterTypes;\n      var filterMethod = getFilterMethod(instance.globalFilter, userFilterTypes || {}, filterTypes);\n      var newFilter = functionalUpdate(filterValue, state.globalFilter); //\n\n      if (shouldAutoRemoveFilter(filterMethod.autoRemove, newFilter)) {\n        var globalFilter = state.globalFilter,\n            stateWithoutGlobalFilter = _objectWithoutPropertiesLoose(state, [\"globalFilter\"]);\n\n        return stateWithoutGlobalFilter;\n      }\n\n      return _extends({}, state, {\n        globalFilter: newFilter\n      });\n    }\n  }\n\n  function useInstance$3(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        userFilterTypes = instance.filterTypes,\n        globalFilter = instance.globalFilter,\n        manualGlobalFilter = instance.manualGlobalFilter,\n        globalFilterValue = instance.state.globalFilter,\n        dispatch = instance.dispatch,\n        _instance$autoResetGl = instance.autoResetGlobalFilter,\n        autoResetGlobalFilter = _instance$autoResetGl === void 0 ? true : _instance$autoResetGl,\n        disableGlobalFilter = instance.disableGlobalFilter;\n    var setGlobalFilter = React.useCallback(function (filterValue) {\n      dispatch({\n        type: actions.setGlobalFilter,\n        filterValue: filterValue\n      });\n    }, [dispatch]); // TODO: Create a filter cache for incremental high speed multi-filtering\n    // This gets pretty complicated pretty fast, since you have to maintain a\n    // cache for each row group (top-level rows, and each row's recursive subrows)\n    // This would make multi-filtering a lot faster though. Too far?\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualGlobalFilter || typeof globalFilterValue === 'undefined') {\n        return [rows, flatRows, rowsById];\n      }\n\n      var filteredFlatRows = [];\n      var filteredRowsById = {};\n      var filterMethod = getFilterMethod(globalFilter, userFilterTypes || {}, filterTypes);\n\n      if (!filterMethod) {\n        console.warn(\"Could not find a valid 'globalFilter' option.\");\n        return rows;\n      }\n\n      allColumns.forEach(function (column) {\n        var columnDisableGlobalFilter = column.disableGlobalFilter;\n        column.canFilter = getFirstDefined(columnDisableGlobalFilter === true ? false : undefined, disableGlobalFilter === true ? false : undefined, true);\n      });\n      var filterableColumns = allColumns.filter(function (c) {\n        return c.canFilter === true;\n      }); // Filters top level and nested rows\n\n      var filterRows = function filterRows(filteredRows) {\n        filteredRows = filterMethod(filteredRows, filterableColumns.map(function (d) {\n          return d.id;\n        }), globalFilterValue);\n        filteredRows.forEach(function (row) {\n          filteredFlatRows.push(row);\n          filteredRowsById[row.id] = row;\n          row.subRows = row.subRows && row.subRows.length ? filterRows(row.subRows) : row.subRows;\n        });\n        return filteredRows;\n      };\n\n      return [filterRows(rows), filteredFlatRows, filteredRowsById];\n    }, [manualGlobalFilter, globalFilterValue, globalFilter, userFilterTypes, allColumns, rows, flatRows, rowsById, disableGlobalFilter]),\n        globalFilteredRows = _React$useMemo[0],\n        globalFilteredFlatRows = _React$useMemo[1],\n        globalFilteredRowsById = _React$useMemo[2];\n\n    var getAutoResetGlobalFilter = useGetLatest(autoResetGlobalFilter);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetGlobalFilter()) {\n        dispatch({\n          type: actions.resetGlobalFilter\n        });\n      }\n    }, [dispatch, manualGlobalFilter ? null : data]);\n    Object.assign(instance, {\n      preGlobalFilteredRows: rows,\n      preGlobalFilteredFlatRows: flatRows,\n      preGlobalFilteredRowsById: rowsById,\n      globalFilteredRows: globalFilteredRows,\n      globalFilteredFlatRows: globalFilteredFlatRows,\n      globalFilteredRowsById: globalFilteredRowsById,\n      rows: globalFilteredRows,\n      flatRows: globalFilteredFlatRows,\n      rowsById: globalFilteredRowsById,\n      setGlobalFilter: setGlobalFilter,\n      disableGlobalFilter: disableGlobalFilter\n    });\n  }\n\n  function sum(values, aggregatedValues) {\n    // It's faster to just add the aggregations together instead of\n    // process leaf nodes individually\n    return aggregatedValues.reduce(function (sum, next) {\n      return sum + (typeof next === 'number' ? next : 0);\n    }, 0);\n  }\n\n  function min(values) {\n    var min = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        min = Math.min(min, value);\n      }\n    });\n    return min;\n  }\n\n  function max(values) {\n    var max = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        max = Math.max(max, value);\n      }\n    });\n    return max;\n  }\n\n  function minMax(values) {\n    var min = values[0] || 0;\n    var max = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        min = Math.min(min, value);\n        max = Math.max(max, value);\n      }\n    });\n    return min + \"..\" + max;\n  }\n\n  function average(values) {\n    return sum(null, values) / values.length;\n  }\n\n  function median(values) {\n    if (!values.length) {\n      return null;\n    }\n\n    var mid = Math.floor(values.length / 2);\n    var nums = [].concat(values).sort(function (a, b) {\n      return a - b;\n    });\n    return values.length % 2 !== 0 ? nums[mid] : (nums[mid - 1] + nums[mid]) / 2;\n  }\n\n  function unique(values) {\n    return Array.from(new Set(values).values());\n  }\n\n  function uniqueCount(values) {\n    return new Set(values).size;\n  }\n\n  function count(values) {\n    return values.length;\n  }\n\n  var aggregations = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    sum: sum,\n    min: min,\n    max: max,\n    minMax: minMax,\n    average: average,\n    median: median,\n    unique: unique,\n    uniqueCount: uniqueCount,\n    count: count\n  });\n  var emptyArray = [];\n  var emptyObject = {}; // Actions\n\n  actions.resetGroupBy = 'resetGroupBy';\n  actions.setGroupBy = 'setGroupBy';\n  actions.toggleGroupBy = 'toggleGroupBy';\n\n  var useGroupBy = function useGroupBy(hooks) {\n    hooks.getGroupByToggleProps = [defaultGetGroupByToggleProps];\n    hooks.stateReducers.push(reducer$4);\n    hooks.visibleColumnsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.groupBy]);\n    });\n    hooks.visibleColumns.push(visibleColumns);\n    hooks.useInstance.push(useInstance$4);\n    hooks.prepareRow.push(prepareRow$1);\n  };\n\n  useGroupBy.pluginName = 'useGroupBy';\n\n  var defaultGetGroupByToggleProps = function defaultGetGroupByToggleProps(props, _ref2) {\n    var header = _ref2.header;\n    return [props, {\n      onClick: header.canGroupBy ? function (e) {\n        e.persist();\n        header.toggleGroupBy();\n      } : undefined,\n      style: {\n        cursor: header.canGroupBy ? 'pointer' : undefined\n      },\n      title: 'Toggle GroupBy'\n    }];\n  }; // Reducer\n\n\n  function reducer$4(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        groupBy: []\n      }, state);\n    }\n\n    if (action.type === actions.resetGroupBy) {\n      return _extends({}, state, {\n        groupBy: instance.initialState.groupBy || []\n      });\n    }\n\n    if (action.type === actions.setGroupBy) {\n      var value = action.value;\n      return _extends({}, state, {\n        groupBy: value\n      });\n    }\n\n    if (action.type === actions.toggleGroupBy) {\n      var columnId = action.columnId,\n          setGroupBy = action.value;\n      var resolvedGroupBy = typeof setGroupBy !== 'undefined' ? setGroupBy : !state.groupBy.includes(columnId);\n\n      if (resolvedGroupBy) {\n        return _extends({}, state, {\n          groupBy: [].concat(state.groupBy, [columnId])\n        });\n      }\n\n      return _extends({}, state, {\n        groupBy: state.groupBy.filter(function (d) {\n          return d !== columnId;\n        })\n      });\n    }\n  }\n\n  function visibleColumns(columns, _ref3) {\n    var groupBy = _ref3.instance.state.groupBy; // Sort grouped columns to the start of the column list\n    // before the headers are built\n\n    var groupByColumns = groupBy.map(function (g) {\n      return columns.find(function (col) {\n        return col.id === g;\n      });\n    }).filter(Boolean);\n    var nonGroupByColumns = columns.filter(function (col) {\n      return !groupBy.includes(col.id);\n    });\n    columns = [].concat(groupByColumns, nonGroupByColumns);\n    columns.forEach(function (column) {\n      column.isGrouped = groupBy.includes(column.id);\n      column.groupedIndex = groupBy.indexOf(column.id);\n    });\n    return columns;\n  }\n\n  var defaultUserAggregations = {};\n\n  function useInstance$4(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        flatHeaders = instance.flatHeaders,\n        _instance$groupByFn = instance.groupByFn,\n        groupByFn = _instance$groupByFn === void 0 ? defaultGroupByFn : _instance$groupByFn,\n        manualGroupBy = instance.manualGroupBy,\n        _instance$aggregation = instance.aggregations,\n        userAggregations = _instance$aggregation === void 0 ? defaultUserAggregations : _instance$aggregation,\n        plugins = instance.plugins,\n        groupBy = instance.state.groupBy,\n        dispatch = instance.dispatch,\n        _instance$autoResetGr = instance.autoResetGroupBy,\n        autoResetGroupBy = _instance$autoResetGr === void 0 ? true : _instance$autoResetGr,\n        disableGroupBy = instance.disableGroupBy,\n        defaultCanGroupBy = instance.defaultCanGroupBy,\n        getHooks = instance.getHooks;\n    ensurePluginOrder(plugins, ['useColumnOrder', 'useFilters'], 'useGroupBy');\n    var getInstance = useGetLatest(instance);\n    allColumns.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnGroupBy = column.defaultGroupBy,\n          columnDisableGroupBy = column.disableGroupBy;\n      column.canGroupBy = accessor ? getFirstDefined(column.canGroupBy, columnDisableGroupBy === true ? false : undefined, disableGroupBy === true ? false : undefined, true) : getFirstDefined(column.canGroupBy, defaultColumnGroupBy, defaultCanGroupBy, false);\n\n      if (column.canGroupBy) {\n        column.toggleGroupBy = function () {\n          return instance.toggleGroupBy(column.id);\n        };\n      }\n\n      column.Aggregated = column.Aggregated || column.Cell;\n    });\n    var toggleGroupBy = React.useCallback(function (columnId, value) {\n      dispatch({\n        type: actions.toggleGroupBy,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var setGroupBy = React.useCallback(function (value) {\n      dispatch({\n        type: actions.setGroupBy,\n        value: value\n      });\n    }, [dispatch]);\n    flatHeaders.forEach(function (header) {\n      header.getGroupByToggleProps = makePropGetter(getHooks().getGroupByToggleProps, {\n        instance: getInstance(),\n        header: header\n      });\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualGroupBy || !groupBy.length) {\n        return [rows, flatRows, rowsById, emptyArray, emptyObject, flatRows, rowsById];\n      } // Ensure that the list of filtered columns exist\n\n\n      var existingGroupBy = groupBy.filter(function (g) {\n        return allColumns.find(function (col) {\n          return col.id === g;\n        });\n      }); // Find the columns that can or are aggregating\n      // Uses each column to aggregate rows into a single value\n\n      var aggregateRowsToValues = function aggregateRowsToValues(leafRows, groupedRows, depth) {\n        var values = {};\n        allColumns.forEach(function (column) {\n          // Don't aggregate columns that are in the groupBy\n          if (existingGroupBy.includes(column.id)) {\n            values[column.id] = groupedRows[0] ? groupedRows[0].values[column.id] : null;\n            return;\n          } // Aggregate the values\n\n\n          var aggregateFn = typeof column.aggregate === 'function' ? column.aggregate : userAggregations[column.aggregate] || aggregations[column.aggregate];\n\n          if (aggregateFn) {\n            // Get the columnValues to aggregate\n            var groupedValues = groupedRows.map(function (row) {\n              return row.values[column.id];\n            }); // Get the columnValues to aggregate\n\n            var leafValues = leafRows.map(function (row) {\n              var columnValue = row.values[column.id];\n\n              if (!depth && column.aggregateValue) {\n                var aggregateValueFn = typeof column.aggregateValue === 'function' ? column.aggregateValue : userAggregations[column.aggregateValue] || aggregations[column.aggregateValue];\n\n                if (!aggregateValueFn) {\n                  console.info({\n                    column: column\n                  });\n                  throw new Error(\"React Table: Invalid column.aggregateValue option for column listed above\");\n                }\n\n                columnValue = aggregateValueFn(columnValue, row, column);\n              }\n\n              return columnValue;\n            });\n            values[column.id] = aggregateFn(leafValues, groupedValues);\n          } else if (column.aggregate) {\n            console.info({\n              column: column\n            });\n            throw new Error(\"React Table: Invalid column.aggregate option for column listed above\");\n          } else {\n            values[column.id] = null;\n          }\n        });\n        return values;\n      };\n\n      var groupedFlatRows = [];\n      var groupedRowsById = {};\n      var onlyGroupedFlatRows = [];\n      var onlyGroupedRowsById = {};\n      var nonGroupedFlatRows = [];\n      var nonGroupedRowsById = {}; // Recursively group the data\n\n      var groupUpRecursively = function groupUpRecursively(rows, depth, parentId) {\n        if (depth === void 0) {\n          depth = 0;\n        } // This is the last level, just return the rows\n\n\n        if (depth === existingGroupBy.length) {\n          return rows;\n        }\n\n        var columnId = existingGroupBy[depth]; // Group the rows together for this level\n\n        var rowGroupsMap = groupByFn(rows, columnId); // Peform aggregations for each group\n\n        var aggregatedGroupedRows = Object.entries(rowGroupsMap).map(function (_ref4, index) {\n          var groupByVal = _ref4[0],\n              groupedRows = _ref4[1];\n          var id = columnId + \":\" + groupByVal;\n          id = parentId ? parentId + \">\" + id : id; // First, Recurse to group sub rows before aggregation\n\n          var subRows = groupUpRecursively(groupedRows, depth + 1, id); // Flatten the leaf rows of the rows in this group\n\n          var leafRows = depth ? flattenBy(groupedRows, 'leafRows') : groupedRows;\n          var values = aggregateRowsToValues(leafRows, groupedRows, depth);\n          var row = {\n            id: id,\n            isGrouped: true,\n            groupByID: columnId,\n            groupByVal: groupByVal,\n            values: values,\n            subRows: subRows,\n            leafRows: leafRows,\n            depth: depth,\n            index: index\n          };\n          subRows.forEach(function (subRow) {\n            groupedFlatRows.push(subRow);\n            groupedRowsById[subRow.id] = subRow;\n\n            if (subRow.isGrouped) {\n              onlyGroupedFlatRows.push(subRow);\n              onlyGroupedRowsById[subRow.id] = subRow;\n            } else {\n              nonGroupedFlatRows.push(subRow);\n              nonGroupedRowsById[subRow.id] = subRow;\n            }\n          });\n          return row;\n        });\n        return aggregatedGroupedRows;\n      };\n\n      var groupedRows = groupUpRecursively(rows);\n      groupedRows.forEach(function (subRow) {\n        groupedFlatRows.push(subRow);\n        groupedRowsById[subRow.id] = subRow;\n\n        if (subRow.isGrouped) {\n          onlyGroupedFlatRows.push(subRow);\n          onlyGroupedRowsById[subRow.id] = subRow;\n        } else {\n          nonGroupedFlatRows.push(subRow);\n          nonGroupedRowsById[subRow.id] = subRow;\n        }\n      }); // Assign the new data\n\n      return [groupedRows, groupedFlatRows, groupedRowsById, onlyGroupedFlatRows, onlyGroupedRowsById, nonGroupedFlatRows, nonGroupedRowsById];\n    }, [manualGroupBy, groupBy, rows, flatRows, rowsById, allColumns, userAggregations, groupByFn]),\n        groupedRows = _React$useMemo[0],\n        groupedFlatRows = _React$useMemo[1],\n        groupedRowsById = _React$useMemo[2],\n        onlyGroupedFlatRows = _React$useMemo[3],\n        onlyGroupedRowsById = _React$useMemo[4],\n        nonGroupedFlatRows = _React$useMemo[5],\n        nonGroupedRowsById = _React$useMemo[6];\n\n    var getAutoResetGroupBy = useGetLatest(autoResetGroupBy);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetGroupBy()) {\n        dispatch({\n          type: actions.resetGroupBy\n        });\n      }\n    }, [dispatch, manualGroupBy ? null : data]);\n    Object.assign(instance, {\n      preGroupedRows: rows,\n      preGroupedFlatRow: flatRows,\n      preGroupedRowsById: rowsById,\n      groupedRows: groupedRows,\n      groupedFlatRows: groupedFlatRows,\n      groupedRowsById: groupedRowsById,\n      onlyGroupedFlatRows: onlyGroupedFlatRows,\n      onlyGroupedRowsById: onlyGroupedRowsById,\n      nonGroupedFlatRows: nonGroupedFlatRows,\n      nonGroupedRowsById: nonGroupedRowsById,\n      rows: groupedRows,\n      flatRows: groupedFlatRows,\n      rowsById: groupedRowsById,\n      toggleGroupBy: toggleGroupBy,\n      setGroupBy: setGroupBy\n    });\n  }\n\n  function prepareRow$1(row) {\n    row.allCells.forEach(function (cell) {\n      var _row$subRows; // Grouped cells are in the groupBy and the pivot cell for the row\n\n\n      cell.isGrouped = cell.column.isGrouped && cell.column.id === row.groupByID; // Placeholder cells are any columns in the groupBy that are not grouped\n\n      cell.isPlaceholder = !cell.isGrouped && cell.column.isGrouped; // Aggregated cells are not grouped, not repeated, but still have subRows\n\n      cell.isAggregated = !cell.isGrouped && !cell.isPlaceholder && ((_row$subRows = row.subRows) == null ? void 0 : _row$subRows.length);\n    });\n  }\n\n  function defaultGroupByFn(rows, columnId) {\n    return rows.reduce(function (prev, row, i) {\n      // TODO: Might want to implement a key serializer here so\n      // irregular column values can still be grouped if needed?\n      var resKey = \"\" + row.values[columnId];\n      prev[resKey] = Array.isArray(prev[resKey]) ? prev[resKey] : [];\n      prev[resKey].push(row);\n      return prev;\n    }, {});\n  }\n\n  var reSplitAlphaNumeric = /([0-9]+)/gm; // Mixed sorting is slow, but very inclusive of many edge cases.\n  // It handles numbers, mixed alphanumeric combinations, and even\n  // null, undefined, and Infinity\n\n  var alphanumeric = function alphanumeric(rowA, rowB, columnId) {\n    var _getRowValuesByColumn = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn[0],\n        b = _getRowValuesByColumn[1]; // Force to strings (or \"\" for unsupported types)\n\n\n    a = toString(a);\n    b = toString(b); // Split on number groups, but keep the delimiter\n    // Then remove falsey split values\n\n    a = a.split(reSplitAlphaNumeric).filter(Boolean);\n    b = b.split(reSplitAlphaNumeric).filter(Boolean); // While\n\n    while (a.length && b.length) {\n      var aa = a.shift();\n      var bb = b.shift();\n      var an = parseInt(aa, 10);\n      var bn = parseInt(bb, 10);\n      var combo = [an, bn].sort(); // Both are string\n\n      if (isNaN(combo[0])) {\n        if (aa > bb) {\n          return 1;\n        }\n\n        if (bb > aa) {\n          return -1;\n        }\n\n        continue;\n      } // One is a string, one is a number\n\n\n      if (isNaN(combo[1])) {\n        return isNaN(an) ? -1 : 1;\n      } // Both are numbers\n\n\n      if (an > bn) {\n        return 1;\n      }\n\n      if (bn > an) {\n        return -1;\n      }\n    }\n\n    return a.length - b.length;\n  };\n\n  function datetime(rowA, rowB, columnId) {\n    var _getRowValuesByColumn2 = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn2[0],\n        b = _getRowValuesByColumn2[1];\n\n    a = a.getTime();\n    b = b.getTime();\n    return compareBasic(a, b);\n  }\n\n  function basic(rowA, rowB, columnId) {\n    var _getRowValuesByColumn3 = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn3[0],\n        b = _getRowValuesByColumn3[1];\n\n    return compareBasic(a, b);\n  }\n\n  function string(rowA, rowB, columnId) {\n    var _getRowValuesByColumn4 = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn4[0],\n        b = _getRowValuesByColumn4[1];\n\n    a = a.split('').filter(Boolean);\n    b = b.split('').filter(Boolean);\n\n    while (a.length && b.length) {\n      var aa = a.shift();\n      var bb = b.shift();\n      var alower = aa.toLowerCase();\n      var blower = bb.toLowerCase(); // Case insensitive comparison until characters match\n\n      if (alower > blower) {\n        return 1;\n      }\n\n      if (blower > alower) {\n        return -1;\n      } // If lowercase characters are identical\n\n\n      if (aa > bb) {\n        return 1;\n      }\n\n      if (bb > aa) {\n        return -1;\n      }\n\n      continue;\n    }\n\n    return a.length - b.length;\n  }\n\n  function number(rowA, rowB, columnId) {\n    var _getRowValuesByColumn5 = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn5[0],\n        b = _getRowValuesByColumn5[1];\n\n    var replaceNonNumeric = /[^0-9.]/gi;\n    a = Number(String(a).replace(replaceNonNumeric, ''));\n    b = Number(String(b).replace(replaceNonNumeric, ''));\n    return compareBasic(a, b);\n  } // Utils\n\n\n  function compareBasic(a, b) {\n    return a === b ? 0 : a > b ? 1 : -1;\n  }\n\n  function getRowValuesByColumnID(row1, row2, columnId) {\n    return [row1.values[columnId], row2.values[columnId]];\n  }\n\n  function toString(a) {\n    if (typeof a === 'number') {\n      if (isNaN(a) || a === Infinity || a === -Infinity) {\n        return '';\n      }\n\n      return String(a);\n    }\n\n    if (typeof a === 'string') {\n      return a;\n    }\n\n    return '';\n  }\n\n  var sortTypes = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    alphanumeric: alphanumeric,\n    datetime: datetime,\n    basic: basic,\n    string: string,\n    number: number\n  });\n  actions.resetSortBy = 'resetSortBy';\n  actions.setSortBy = 'setSortBy';\n  actions.toggleSortBy = 'toggleSortBy';\n  actions.clearSortBy = 'clearSortBy';\n  defaultColumn.sortType = 'alphanumeric';\n  defaultColumn.sortDescFirst = false;\n\n  var useSortBy = function useSortBy(hooks) {\n    hooks.getSortByToggleProps = [defaultGetSortByToggleProps];\n    hooks.stateReducers.push(reducer$5);\n    hooks.useInstance.push(useInstance$5);\n  };\n\n  useSortBy.pluginName = 'useSortBy';\n\n  var defaultGetSortByToggleProps = function defaultGetSortByToggleProps(props, _ref) {\n    var instance = _ref.instance,\n        column = _ref.column;\n    var _instance$isMultiSort = instance.isMultiSortEvent,\n        isMultiSortEvent = _instance$isMultiSort === void 0 ? function (e) {\n      return e.shiftKey;\n    } : _instance$isMultiSort;\n    return [props, {\n      onClick: column.canSort ? function (e) {\n        e.persist();\n        column.toggleSortBy(undefined, !instance.disableMultiSort && isMultiSortEvent(e));\n      } : undefined,\n      style: {\n        cursor: column.canSort ? 'pointer' : undefined\n      },\n      title: column.canSort ? 'Toggle SortBy' : undefined\n    }];\n  }; // Reducer\n\n\n  function reducer$5(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        sortBy: []\n      }, state);\n    }\n\n    if (action.type === actions.resetSortBy) {\n      return _extends({}, state, {\n        sortBy: instance.initialState.sortBy || []\n      });\n    }\n\n    if (action.type === actions.clearSortBy) {\n      var sortBy = state.sortBy;\n      var newSortBy = sortBy.filter(function (d) {\n        return d.id !== action.columnId;\n      });\n      return _extends({}, state, {\n        sortBy: newSortBy\n      });\n    }\n\n    if (action.type === actions.setSortBy) {\n      var _sortBy = action.sortBy;\n      return _extends({}, state, {\n        sortBy: _sortBy\n      });\n    }\n\n    if (action.type === actions.toggleSortBy) {\n      var columnId = action.columnId,\n          desc = action.desc,\n          multi = action.multi;\n      var allColumns = instance.allColumns,\n          disableMultiSort = instance.disableMultiSort,\n          disableSortRemove = instance.disableSortRemove,\n          disableMultiRemove = instance.disableMultiRemove,\n          _instance$maxMultiSor = instance.maxMultiSortColCount,\n          maxMultiSortColCount = _instance$maxMultiSor === void 0 ? Number.MAX_SAFE_INTEGER : _instance$maxMultiSor;\n      var _sortBy2 = state.sortBy; // Find the column for this columnId\n\n      var column = allColumns.find(function (d) {\n        return d.id === columnId;\n      });\n      var sortDescFirst = column.sortDescFirst; // Find any existing sortBy for this column\n\n      var existingSortBy = _sortBy2.find(function (d) {\n        return d.id === columnId;\n      });\n\n      var existingIndex = _sortBy2.findIndex(function (d) {\n        return d.id === columnId;\n      });\n\n      var hasDescDefined = typeof desc !== 'undefined' && desc !== null;\n      var _newSortBy = []; // What should we do with this sort action?\n\n      var sortAction;\n\n      if (!disableMultiSort && multi) {\n        if (existingSortBy) {\n          sortAction = 'toggle';\n        } else {\n          sortAction = 'add';\n        }\n      } else {\n        // Normal mode\n        if (existingIndex !== _sortBy2.length - 1 || _sortBy2.length !== 1) {\n          sortAction = 'replace';\n        } else if (existingSortBy) {\n          sortAction = 'toggle';\n        } else {\n          sortAction = 'replace';\n        }\n      } // Handle toggle states that will remove the sortBy\n\n\n      if (sortAction === 'toggle' && // Must be toggling\n      !disableSortRemove && // If disableSortRemove, disable in general\n      !hasDescDefined && ( // Must not be setting desc\n      multi ? !disableMultiRemove : true) && ( // If multi, don't allow if disableMultiRemove\n      existingSortBy && // Finally, detect if it should indeed be removed\n      existingSortBy.desc && !sortDescFirst || !existingSortBy.desc && sortDescFirst)) {\n        sortAction = 'remove';\n      }\n\n      if (sortAction === 'replace') {\n        _newSortBy = [{\n          id: columnId,\n          desc: hasDescDefined ? desc : sortDescFirst\n        }];\n      } else if (sortAction === 'add') {\n        _newSortBy = [].concat(_sortBy2, [{\n          id: columnId,\n          desc: hasDescDefined ? desc : sortDescFirst\n        }]); // Take latest n columns\n\n        _newSortBy.splice(0, _newSortBy.length - maxMultiSortColCount);\n      } else if (sortAction === 'toggle') {\n        // This flips (or sets) the\n        _newSortBy = _sortBy2.map(function (d) {\n          if (d.id === columnId) {\n            return _extends({}, d, {\n              desc: hasDescDefined ? desc : !existingSortBy.desc\n            });\n          }\n\n          return d;\n        });\n      } else if (sortAction === 'remove') {\n        _newSortBy = _sortBy2.filter(function (d) {\n          return d.id !== columnId;\n        });\n      }\n\n      return _extends({}, state, {\n        sortBy: _newSortBy\n      });\n    }\n  }\n\n  function useInstance$5(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        allColumns = instance.allColumns,\n        _instance$orderByFn = instance.orderByFn,\n        orderByFn = _instance$orderByFn === void 0 ? defaultOrderByFn : _instance$orderByFn,\n        userSortTypes = instance.sortTypes,\n        manualSortBy = instance.manualSortBy,\n        defaultCanSort = instance.defaultCanSort,\n        disableSortBy = instance.disableSortBy,\n        flatHeaders = instance.flatHeaders,\n        sortBy = instance.state.sortBy,\n        dispatch = instance.dispatch,\n        plugins = instance.plugins,\n        getHooks = instance.getHooks,\n        _instance$autoResetSo = instance.autoResetSortBy,\n        autoResetSortBy = _instance$autoResetSo === void 0 ? true : _instance$autoResetSo;\n    ensurePluginOrder(plugins, ['useFilters', 'useGlobalFilter', 'useGroupBy', 'usePivotColumns'], 'useSortBy');\n    var setSortBy = React.useCallback(function (sortBy) {\n      dispatch({\n        type: actions.setSortBy,\n        sortBy: sortBy\n      });\n    }, [dispatch]); // Updates sorting based on a columnId, desc flag and multi flag\n\n    var toggleSortBy = React.useCallback(function (columnId, desc, multi) {\n      dispatch({\n        type: actions.toggleSortBy,\n        columnId: columnId,\n        desc: desc,\n        multi: multi\n      });\n    }, [dispatch]); // use reference to avoid memory leak in #1608\n\n    var getInstance = useGetLatest(instance); // Add the getSortByToggleProps method to columns and headers\n\n    flatHeaders.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnCanSort = column.canSort,\n          columnDisableSortBy = column.disableSortBy,\n          id = column.id;\n      var canSort = accessor ? getFirstDefined(columnDisableSortBy === true ? false : undefined, disableSortBy === true ? false : undefined, true) : getFirstDefined(defaultCanSort, defaultColumnCanSort, false);\n      column.canSort = canSort;\n\n      if (column.canSort) {\n        column.toggleSortBy = function (desc, multi) {\n          return toggleSortBy(column.id, desc, multi);\n        };\n\n        column.clearSortBy = function () {\n          dispatch({\n            type: actions.clearSortBy,\n            columnId: column.id\n          });\n        };\n      }\n\n      column.getSortByToggleProps = makePropGetter(getHooks().getSortByToggleProps, {\n        instance: getInstance(),\n        column: column\n      });\n      var columnSort = sortBy.find(function (d) {\n        return d.id === id;\n      });\n      column.isSorted = !!columnSort;\n      column.sortedIndex = sortBy.findIndex(function (d) {\n        return d.id === id;\n      });\n      column.isSortedDesc = column.isSorted ? columnSort.desc : undefined;\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualSortBy || !sortBy.length) {\n        return [rows, flatRows];\n      }\n\n      var sortedFlatRows = []; // Filter out sortBys that correspond to non existing columns\n\n      var availableSortBy = sortBy.filter(function (sort) {\n        return allColumns.find(function (col) {\n          return col.id === sort.id;\n        });\n      });\n\n      var sortData = function sortData(rows) {\n        // Use the orderByFn to compose multiple sortBy's together.\n        // This will also perform a stable sorting using the row index\n        // if needed.\n        var sortedData = orderByFn(rows, availableSortBy.map(function (sort) {\n          // Support custom sorting methods for each column\n          var column = allColumns.find(function (d) {\n            return d.id === sort.id;\n          });\n\n          if (!column) {\n            throw new Error(\"React-Table: Could not find a column with id: \" + sort.id + \" while sorting\");\n          }\n\n          var sortType = column.sortType; // Look up sortBy functions in this order:\n          // column function\n          // column string lookup on user sortType\n          // column string lookup on built-in sortType\n          // default function\n          // default string lookup on user sortType\n          // default string lookup on built-in sortType\n\n          var sortMethod = isFunction(sortType) || (userSortTypes || {})[sortType] || sortTypes[sortType];\n\n          if (!sortMethod) {\n            throw new Error(\"React-Table: Could not find a valid sortType of '\" + sortType + \"' for column '\" + sort.id + \"'.\");\n          } // Return the correct sortFn.\n          // This function should always return in ascending order\n\n\n          return function (a, b) {\n            return sortMethod(a, b, sort.id, sort.desc);\n          };\n        }), // Map the directions\n        availableSortBy.map(function (sort) {\n          // Detect and use the sortInverted option\n          var column = allColumns.find(function (d) {\n            return d.id === sort.id;\n          });\n\n          if (column && column.sortInverted) {\n            return sort.desc;\n          }\n\n          return !sort.desc;\n        })); // If there are sub-rows, sort them\n\n        sortedData.forEach(function (row) {\n          sortedFlatRows.push(row);\n\n          if (!row.subRows || row.subRows.length === 0) {\n            return;\n          }\n\n          row.subRows = sortData(row.subRows);\n        });\n        return sortedData;\n      };\n\n      return [sortData(rows), sortedFlatRows];\n    }, [manualSortBy, sortBy, rows, flatRows, allColumns, orderByFn, userSortTypes]),\n        sortedRows = _React$useMemo[0],\n        sortedFlatRows = _React$useMemo[1];\n\n    var getAutoResetSortBy = useGetLatest(autoResetSortBy);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetSortBy()) {\n        dispatch({\n          type: actions.resetSortBy\n        });\n      }\n    }, [manualSortBy ? null : data]);\n    Object.assign(instance, {\n      preSortedRows: rows,\n      preSortedFlatRows: flatRows,\n      sortedRows: sortedRows,\n      sortedFlatRows: sortedFlatRows,\n      rows: sortedRows,\n      flatRows: sortedFlatRows,\n      setSortBy: setSortBy,\n      toggleSortBy: toggleSortBy\n    });\n  }\n\n  function defaultOrderByFn(arr, funcs, dirs) {\n    return [].concat(arr).sort(function (rowA, rowB) {\n      for (var i = 0; i < funcs.length; i += 1) {\n        var sortFn = funcs[i];\n        var desc = dirs[i] === false || dirs[i] === 'desc';\n        var sortInt = sortFn(rowA, rowB);\n\n        if (sortInt !== 0) {\n          return desc ? -sortInt : sortInt;\n        }\n      }\n\n      return dirs[0] ? rowA.index - rowB.index : rowB.index - rowA.index;\n    });\n  }\n\n  var pluginName = 'usePagination'; // Actions\n\n  actions.resetPage = 'resetPage';\n  actions.gotoPage = 'gotoPage';\n  actions.setPageSize = 'setPageSize';\n\n  var usePagination = function usePagination(hooks) {\n    hooks.stateReducers.push(reducer$6);\n    hooks.useInstance.push(useInstance$6);\n  };\n\n  usePagination.pluginName = pluginName;\n\n  function reducer$6(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        pageSize: 10,\n        pageIndex: 0\n      }, state);\n    }\n\n    if (action.type === actions.resetPage) {\n      return _extends({}, state, {\n        pageIndex: instance.initialState.pageIndex || 0\n      });\n    }\n\n    if (action.type === actions.gotoPage) {\n      var pageCount = instance.pageCount,\n          page = instance.page;\n      var newPageIndex = functionalUpdate(action.pageIndex, state.pageIndex);\n      var canNavigate = false;\n\n      if (newPageIndex > state.pageIndex) {\n        // next page\n        canNavigate = pageCount === -1 ? page.length >= state.pageSize : newPageIndex < pageCount;\n      } else if (newPageIndex < state.pageIndex) {\n        // prev page\n        canNavigate = newPageIndex > -1;\n      }\n\n      if (!canNavigate) {\n        return state;\n      }\n\n      return _extends({}, state, {\n        pageIndex: newPageIndex\n      });\n    }\n\n    if (action.type === actions.setPageSize) {\n      var pageSize = action.pageSize;\n      var topRowIndex = state.pageSize * state.pageIndex;\n      var pageIndex = Math.floor(topRowIndex / pageSize);\n      return _extends({}, state, {\n        pageIndex: pageIndex,\n        pageSize: pageSize\n      });\n    }\n  }\n\n  function useInstance$6(instance) {\n    var rows = instance.rows,\n        _instance$autoResetPa = instance.autoResetPage,\n        autoResetPage = _instance$autoResetPa === void 0 ? true : _instance$autoResetPa,\n        _instance$manualExpan = instance.manualExpandedKey,\n        manualExpandedKey = _instance$manualExpan === void 0 ? 'expanded' : _instance$manualExpan,\n        plugins = instance.plugins,\n        userPageCount = instance.pageCount,\n        _instance$paginateExp = instance.paginateExpandedRows,\n        paginateExpandedRows = _instance$paginateExp === void 0 ? true : _instance$paginateExp,\n        _instance$expandSubRo = instance.expandSubRows,\n        expandSubRows = _instance$expandSubRo === void 0 ? true : _instance$expandSubRo,\n        _instance$state = instance.state,\n        pageSize = _instance$state.pageSize,\n        pageIndex = _instance$state.pageIndex,\n        expanded = _instance$state.expanded,\n        globalFilter = _instance$state.globalFilter,\n        filters = _instance$state.filters,\n        groupBy = _instance$state.groupBy,\n        sortBy = _instance$state.sortBy,\n        dispatch = instance.dispatch,\n        data = instance.data,\n        manualPagination = instance.manualPagination;\n    ensurePluginOrder(plugins, ['useGlobalFilter', 'useFilters', 'useGroupBy', 'useSortBy', 'useExpanded'], 'usePagination');\n    var getAutoResetPage = useGetLatest(autoResetPage);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetPage()) {\n        dispatch({\n          type: actions.resetPage\n        });\n      }\n    }, [dispatch, manualPagination ? null : data, globalFilter, filters, groupBy, sortBy]);\n    var pageCount = manualPagination ? userPageCount : Math.ceil(rows.length / pageSize);\n    var pageOptions = React.useMemo(function () {\n      return pageCount > 0 ? [].concat(new Array(pageCount)).fill(null).map(function (d, i) {\n        return i;\n      }) : [];\n    }, [pageCount]);\n    var page = React.useMemo(function () {\n      var page;\n\n      if (manualPagination) {\n        page = rows;\n      } else {\n        var pageStart = pageSize * pageIndex;\n        var pageEnd = pageStart + pageSize;\n        page = rows.slice(pageStart, pageEnd);\n      }\n\n      if (paginateExpandedRows) {\n        return page;\n      }\n\n      return expandRows(page, {\n        manualExpandedKey: manualExpandedKey,\n        expanded: expanded,\n        expandSubRows: expandSubRows\n      });\n    }, [expandSubRows, expanded, manualExpandedKey, manualPagination, pageIndex, pageSize, paginateExpandedRows, rows]);\n    var canPreviousPage = pageIndex > 0;\n    var canNextPage = pageCount === -1 ? page.length >= pageSize : pageIndex < pageCount - 1;\n    var gotoPage = React.useCallback(function (pageIndex) {\n      dispatch({\n        type: actions.gotoPage,\n        pageIndex: pageIndex\n      });\n    }, [dispatch]);\n    var previousPage = React.useCallback(function () {\n      return gotoPage(function (old) {\n        return old - 1;\n      });\n    }, [gotoPage]);\n    var nextPage = React.useCallback(function () {\n      return gotoPage(function (old) {\n        return old + 1;\n      });\n    }, [gotoPage]);\n    var setPageSize = React.useCallback(function (pageSize) {\n      dispatch({\n        type: actions.setPageSize,\n        pageSize: pageSize\n      });\n    }, [dispatch]);\n    Object.assign(instance, {\n      pageOptions: pageOptions,\n      pageCount: pageCount,\n      page: page,\n      canPreviousPage: canPreviousPage,\n      canNextPage: canNextPage,\n      gotoPage: gotoPage,\n      previousPage: previousPage,\n      nextPage: nextPage,\n      setPageSize: setPageSize\n    });\n  }\n\n  actions.resetPivot = 'resetPivot';\n  actions.togglePivot = 'togglePivot';\n\n  var _UNSTABLE_usePivotColumns = function _UNSTABLE_usePivotColumns(hooks) {\n    hooks.getPivotToggleProps = [defaultGetPivotToggleProps];\n    hooks.stateReducers.push(reducer$7);\n    hooks.useInstanceAfterData.push(useInstanceAfterData);\n    hooks.allColumns.push(allColumns);\n    hooks.accessValue.push(accessValue);\n    hooks.materializedColumns.push(materializedColumns);\n    hooks.materializedColumnsDeps.push(materializedColumnsDeps);\n    hooks.visibleColumns.push(visibleColumns$1);\n    hooks.visibleColumnsDeps.push(visibleColumnsDeps);\n    hooks.useInstance.push(useInstance$7);\n    hooks.prepareRow.push(prepareRow$2);\n  };\n\n  _UNSTABLE_usePivotColumns.pluginName = 'usePivotColumns';\n  var defaultPivotColumns = [];\n\n  var defaultGetPivotToggleProps = function defaultGetPivotToggleProps(props, _ref) {\n    var header = _ref.header;\n    return [props, {\n      onClick: header.canPivot ? function (e) {\n        e.persist();\n        header.togglePivot();\n      } : undefined,\n      style: {\n        cursor: header.canPivot ? 'pointer' : undefined\n      },\n      title: 'Toggle Pivot'\n    }];\n  }; // Reducer\n\n\n  function reducer$7(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        pivotColumns: defaultPivotColumns\n      }, state);\n    }\n\n    if (action.type === actions.resetPivot) {\n      return _extends({}, state, {\n        pivotColumns: instance.initialState.pivotColumns || defaultPivotColumns\n      });\n    }\n\n    if (action.type === actions.togglePivot) {\n      var columnId = action.columnId,\n          setPivot = action.value;\n      var resolvedPivot = typeof setPivot !== 'undefined' ? setPivot : !state.pivotColumns.includes(columnId);\n\n      if (resolvedPivot) {\n        return _extends({}, state, {\n          pivotColumns: [].concat(state.pivotColumns, [columnId])\n        });\n      }\n\n      return _extends({}, state, {\n        pivotColumns: state.pivotColumns.filter(function (d) {\n          return d !== columnId;\n        })\n      });\n    }\n  }\n\n  function useInstanceAfterData(instance) {\n    instance.allColumns.forEach(function (column) {\n      column.isPivotSource = instance.state.pivotColumns.includes(column.id);\n    });\n  }\n\n  function allColumns(columns, _ref2) {\n    var instance = _ref2.instance;\n    columns.forEach(function (column) {\n      column.isPivotSource = instance.state.pivotColumns.includes(column.id);\n      column.uniqueValues = new Set();\n    });\n    return columns;\n  }\n\n  function accessValue(value, _ref3) {\n    var column = _ref3.column;\n\n    if (column.uniqueValues && typeof value !== 'undefined') {\n      column.uniqueValues.add(value);\n    }\n\n    return value;\n  }\n\n  function materializedColumns(materialized, _ref4) {\n    var instance = _ref4.instance;\n    var allColumns = instance.allColumns,\n        state = instance.state;\n\n    if (!state.pivotColumns.length || !state.groupBy || !state.groupBy.length) {\n      return materialized;\n    }\n\n    var pivotColumns = state.pivotColumns.map(function (id) {\n      return allColumns.find(function (d) {\n        return d.id === id;\n      });\n    }).filter(Boolean);\n    var sourceColumns = allColumns.filter(function (d) {\n      return !d.isPivotSource && !state.groupBy.includes(d.id) && !state.pivotColumns.includes(d.id);\n    });\n\n    var buildPivotColumns = function buildPivotColumns(depth, parent, pivotFilters) {\n      if (depth === void 0) {\n        depth = 0;\n      }\n\n      if (pivotFilters === void 0) {\n        pivotFilters = [];\n      }\n\n      var pivotColumn = pivotColumns[depth];\n\n      if (!pivotColumn) {\n        return sourceColumns.map(function (sourceColumn) {\n          // TODO: We could offer support here for renesting pivoted\n          // columns inside copies of their header groups. For now,\n          // that seems like it would be (1) overkill on nesting, considering\n          // you already get nesting for every pivot level and (2)\n          // really hard. :)\n          return _extends({}, sourceColumn, {\n            canPivot: false,\n            isPivoted: true,\n            parent: parent,\n            depth: depth,\n            id: \"\" + (parent ? parent.id + \".\" + sourceColumn.id : sourceColumn.id),\n            accessor: function accessor(originalRow, i, row) {\n              if (pivotFilters.every(function (filter) {\n                return filter(row);\n              })) {\n                return row.values[sourceColumn.id];\n              }\n            }\n          });\n        });\n      }\n\n      var uniqueValues = Array.from(pivotColumn.uniqueValues).sort();\n      return uniqueValues.map(function (uniqueValue) {\n        var columnGroup = _extends({}, pivotColumn, {\n          Header: pivotColumn.PivotHeader || typeof pivotColumn.header === 'string' ? pivotColumn.Header + \": \" + uniqueValue : uniqueValue,\n          isPivotGroup: true,\n          parent: parent,\n          depth: depth,\n          id: parent ? parent.id + \".\" + pivotColumn.id + \".\" + uniqueValue : pivotColumn.id + \".\" + uniqueValue,\n          pivotValue: uniqueValue\n        });\n\n        columnGroup.columns = buildPivotColumns(depth + 1, columnGroup, [].concat(pivotFilters, [function (row) {\n          return row.values[pivotColumn.id] === uniqueValue;\n        }]));\n        return columnGroup;\n      });\n    };\n\n    var newMaterialized = flattenColumns(buildPivotColumns());\n    return [].concat(materialized, newMaterialized);\n  }\n\n  function materializedColumnsDeps(deps, _ref5) {\n    var _ref5$instance$state = _ref5.instance.state,\n        pivotColumns = _ref5$instance$state.pivotColumns,\n        groupBy = _ref5$instance$state.groupBy;\n    return [].concat(deps, [pivotColumns, groupBy]);\n  }\n\n  function visibleColumns$1(visibleColumns, _ref6) {\n    var state = _ref6.instance.state;\n    visibleColumns = visibleColumns.filter(function (d) {\n      return !d.isPivotSource;\n    });\n\n    if (state.pivotColumns.length && state.groupBy && state.groupBy.length) {\n      visibleColumns = visibleColumns.filter(function (column) {\n        return column.isGrouped || column.isPivoted;\n      });\n    }\n\n    return visibleColumns;\n  }\n\n  function visibleColumnsDeps(deps, _ref7) {\n    var instance = _ref7.instance;\n    return [].concat(deps, [instance.state.pivotColumns, instance.state.groupBy]);\n  }\n\n  function useInstance$7(instance) {\n    var columns = instance.columns,\n        allColumns = instance.allColumns,\n        flatHeaders = instance.flatHeaders,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        dispatch = instance.dispatch,\n        _instance$autoResetPi = instance.autoResetPivot,\n        autoResetPivot = _instance$autoResetPi === void 0 ? true : _instance$autoResetPi,\n        manaulPivot = instance.manaulPivot,\n        disablePivot = instance.disablePivot,\n        defaultCanPivot = instance.defaultCanPivot;\n    ensurePluginOrder(plugins, ['useGroupBy'], 'usePivotColumns');\n    var getInstance = useGetLatest(instance);\n    allColumns.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnPivot = column.defaultPivot,\n          columnDisablePivot = column.disablePivot;\n      column.canPivot = accessor ? getFirstDefined(column.canPivot, columnDisablePivot === true ? false : undefined, disablePivot === true ? false : undefined, true) : getFirstDefined(column.canPivot, defaultColumnPivot, defaultCanPivot, false);\n\n      if (column.canPivot) {\n        column.togglePivot = function () {\n          return instance.togglePivot(column.id);\n        };\n      }\n\n      column.Aggregated = column.Aggregated || column.Cell;\n    });\n\n    var togglePivot = function togglePivot(columnId, value) {\n      dispatch({\n        type: actions.togglePivot,\n        columnId: columnId,\n        value: value\n      });\n    };\n\n    flatHeaders.forEach(function (header) {\n      header.getPivotToggleProps = makePropGetter(getHooks().getPivotToggleProps, {\n        instance: getInstance(),\n        header: header\n      });\n    });\n    var getAutoResetPivot = useGetLatest(autoResetPivot);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetPivot()) {\n        dispatch({\n          type: actions.resetPivot\n        });\n      }\n    }, [dispatch, manaulPivot ? null : columns]);\n    Object.assign(instance, {\n      togglePivot: togglePivot\n    });\n  }\n\n  function prepareRow$2(row) {\n    row.allCells.forEach(function (cell) {\n      // Grouped cells are in the pivotColumns and the pivot cell for the row\n      cell.isPivoted = cell.column.isPivoted;\n    });\n  }\n\n  var pluginName$1 = 'useRowSelect'; // Actions\n\n  actions.resetSelectedRows = 'resetSelectedRows';\n  actions.toggleAllRowsSelected = 'toggleAllRowsSelected';\n  actions.toggleRowSelected = 'toggleRowSelected';\n  actions.toggleAllPageRowsSelected = 'toggleAllPageRowsSelected';\n\n  var useRowSelect = function useRowSelect(hooks) {\n    hooks.getToggleRowSelectedProps = [defaultGetToggleRowSelectedProps];\n    hooks.getToggleAllRowsSelectedProps = [defaultGetToggleAllRowsSelectedProps];\n    hooks.getToggleAllPageRowsSelectedProps = [defaultGetToggleAllPageRowsSelectedProps];\n    hooks.stateReducers.push(reducer$8);\n    hooks.useInstance.push(useInstance$8);\n    hooks.prepareRow.push(prepareRow$3);\n  };\n\n  useRowSelect.pluginName = pluginName$1;\n\n  var defaultGetToggleRowSelectedProps = function defaultGetToggleRowSelectedProps(props, _ref) {\n    var instance = _ref.instance,\n        row = _ref.row;\n    var _instance$manualRowSe = instance.manualRowSelectedKey,\n        manualRowSelectedKey = _instance$manualRowSe === void 0 ? 'isSelected' : _instance$manualRowSe;\n    var checked = false;\n\n    if (row.original && row.original[manualRowSelectedKey]) {\n      checked = true;\n    } else {\n      checked = row.isSelected;\n    }\n\n    return [props, {\n      onChange: function onChange(e) {\n        row.toggleRowSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: checked,\n      title: 'Toggle Row Selected',\n      indeterminate: row.isSomeSelected\n    }];\n  };\n\n  var defaultGetToggleAllRowsSelectedProps = function defaultGetToggleAllRowsSelectedProps(props, _ref2) {\n    var instance = _ref2.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleAllRowsSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: instance.isAllRowsSelected,\n      title: 'Toggle All Rows Selected',\n      indeterminate: Boolean(!instance.isAllRowsSelected && Object.keys(instance.state.selectedRowIds).length)\n    }];\n  };\n\n  var defaultGetToggleAllPageRowsSelectedProps = function defaultGetToggleAllPageRowsSelectedProps(props, _ref3) {\n    var instance = _ref3.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleAllPageRowsSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: instance.isAllPageRowsSelected,\n      title: 'Toggle All Current Page Rows Selected',\n      indeterminate: Boolean(!instance.isAllPageRowsSelected && instance.page.some(function (_ref4) {\n        var id = _ref4.id;\n        return instance.state.selectedRowIds[id];\n      }))\n    }];\n  }; // eslint-disable-next-line max-params\n\n\n  function reducer$8(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        selectedRowIds: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetSelectedRows) {\n      return _extends({}, state, {\n        selectedRowIds: instance.initialState.selectedRowIds || {}\n      });\n    }\n\n    if (action.type === actions.toggleAllRowsSelected) {\n      var setSelected = action.value;\n      var isAllRowsSelected = instance.isAllRowsSelected,\n          rowsById = instance.rowsById,\n          _instance$nonGroupedR = instance.nonGroupedRowsById,\n          nonGroupedRowsById = _instance$nonGroupedR === void 0 ? rowsById : _instance$nonGroupedR;\n      var selectAll = typeof setSelected !== 'undefined' ? setSelected : !isAllRowsSelected; // Only remove/add the rows that are visible on the screen\n      //  Leave all the other rows that are selected alone.\n\n      var selectedRowIds = Object.assign({}, state.selectedRowIds);\n\n      if (selectAll) {\n        Object.keys(nonGroupedRowsById).forEach(function (rowId) {\n          selectedRowIds[rowId] = true;\n        });\n      } else {\n        Object.keys(nonGroupedRowsById).forEach(function (rowId) {\n          delete selectedRowIds[rowId];\n        });\n      }\n\n      return _extends({}, state, {\n        selectedRowIds: selectedRowIds\n      });\n    }\n\n    if (action.type === actions.toggleRowSelected) {\n      var id = action.id,\n          _setSelected = action.value;\n      var _rowsById = instance.rowsById,\n          _instance$selectSubRo = instance.selectSubRows,\n          selectSubRows = _instance$selectSubRo === void 0 ? true : _instance$selectSubRo,\n          getSubRows = instance.getSubRows;\n      var isSelected = state.selectedRowIds[id];\n      var shouldExist = typeof _setSelected !== 'undefined' ? _setSelected : !isSelected;\n\n      if (isSelected === shouldExist) {\n        return state;\n      }\n\n      var newSelectedRowIds = _extends({}, state.selectedRowIds);\n\n      var handleRowById = function handleRowById(id) {\n        var row = _rowsById[id];\n\n        if (!row.isGrouped) {\n          if (shouldExist) {\n            newSelectedRowIds[id] = true;\n          } else {\n            delete newSelectedRowIds[id];\n          }\n        }\n\n        if (selectSubRows && getSubRows(row)) {\n          return getSubRows(row).forEach(function (row) {\n            return handleRowById(row.id);\n          });\n        }\n      };\n\n      handleRowById(id);\n      return _extends({}, state, {\n        selectedRowIds: newSelectedRowIds\n      });\n    }\n\n    if (action.type === actions.toggleAllPageRowsSelected) {\n      var _setSelected2 = action.value;\n\n      var page = instance.page,\n          _rowsById2 = instance.rowsById,\n          _instance$selectSubRo2 = instance.selectSubRows,\n          _selectSubRows = _instance$selectSubRo2 === void 0 ? true : _instance$selectSubRo2,\n          isAllPageRowsSelected = instance.isAllPageRowsSelected,\n          _getSubRows = instance.getSubRows;\n\n      var _selectAll = typeof _setSelected2 !== 'undefined' ? _setSelected2 : !isAllPageRowsSelected;\n\n      var _newSelectedRowIds = _extends({}, state.selectedRowIds);\n\n      var _handleRowById = function _handleRowById(id) {\n        var row = _rowsById2[id];\n\n        if (!row.isGrouped) {\n          if (_selectAll) {\n            _newSelectedRowIds[id] = true;\n          } else {\n            delete _newSelectedRowIds[id];\n          }\n        }\n\n        if (_selectSubRows && _getSubRows(row)) {\n          return _getSubRows(row).forEach(function (row) {\n            return _handleRowById(row.id);\n          });\n        }\n      };\n\n      page.forEach(function (row) {\n        return _handleRowById(row.id);\n      });\n      return _extends({}, state, {\n        selectedRowIds: _newSelectedRowIds\n      });\n    }\n\n    return state;\n  }\n\n  function useInstance$8(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        rowsById = instance.rowsById,\n        _instance$nonGroupedR2 = instance.nonGroupedRowsById,\n        nonGroupedRowsById = _instance$nonGroupedR2 === void 0 ? rowsById : _instance$nonGroupedR2,\n        _instance$autoResetSe = instance.autoResetSelectedRows,\n        autoResetSelectedRows = _instance$autoResetSe === void 0 ? true : _instance$autoResetSe,\n        selectedRowIds = instance.state.selectedRowIds,\n        _instance$selectSubRo3 = instance.selectSubRows,\n        selectSubRows = _instance$selectSubRo3 === void 0 ? true : _instance$selectSubRo3,\n        dispatch = instance.dispatch,\n        page = instance.page,\n        getSubRows = instance.getSubRows;\n    ensurePluginOrder(plugins, ['useFilters', 'useGroupBy', 'useSortBy', 'useExpanded', 'usePagination'], 'useRowSelect');\n    var selectedFlatRows = React.useMemo(function () {\n      var selectedFlatRows = [];\n      rows.forEach(function (row) {\n        var isSelected = selectSubRows ? getRowIsSelected(row, selectedRowIds, getSubRows) : !!selectedRowIds[row.id];\n        row.isSelected = !!isSelected;\n        row.isSomeSelected = isSelected === null;\n\n        if (isSelected) {\n          selectedFlatRows.push(row);\n        }\n      });\n      return selectedFlatRows;\n    }, [rows, selectSubRows, selectedRowIds, getSubRows]);\n    var isAllRowsSelected = Boolean(Object.keys(nonGroupedRowsById).length && Object.keys(selectedRowIds).length);\n    var isAllPageRowsSelected = isAllRowsSelected;\n\n    if (isAllRowsSelected) {\n      if (Object.keys(nonGroupedRowsById).some(function (id) {\n        return !selectedRowIds[id];\n      })) {\n        isAllRowsSelected = false;\n      }\n    }\n\n    if (!isAllRowsSelected) {\n      if (page && page.length && page.some(function (_ref5) {\n        var id = _ref5.id;\n        return !selectedRowIds[id];\n      })) {\n        isAllPageRowsSelected = false;\n      }\n    }\n\n    var getAutoResetSelectedRows = useGetLatest(autoResetSelectedRows);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetSelectedRows()) {\n        dispatch({\n          type: actions.resetSelectedRows\n        });\n      }\n    }, [dispatch, data]);\n    var toggleAllRowsSelected = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllRowsSelected,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleAllPageRowsSelected = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllPageRowsSelected,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleRowSelected = React.useCallback(function (id, value) {\n      return dispatch({\n        type: actions.toggleRowSelected,\n        id: id,\n        value: value\n      });\n    }, [dispatch]);\n    var getInstance = useGetLatest(instance);\n    var getToggleAllRowsSelectedProps = makePropGetter(getHooks().getToggleAllRowsSelectedProps, {\n      instance: getInstance()\n    });\n    var getToggleAllPageRowsSelectedProps = makePropGetter(getHooks().getToggleAllPageRowsSelectedProps, {\n      instance: getInstance()\n    });\n    Object.assign(instance, {\n      selectedFlatRows: selectedFlatRows,\n      isAllRowsSelected: isAllRowsSelected,\n      isAllPageRowsSelected: isAllPageRowsSelected,\n      toggleRowSelected: toggleRowSelected,\n      toggleAllRowsSelected: toggleAllRowsSelected,\n      getToggleAllRowsSelectedProps: getToggleAllRowsSelectedProps,\n      getToggleAllPageRowsSelectedProps: getToggleAllPageRowsSelectedProps,\n      toggleAllPageRowsSelected: toggleAllPageRowsSelected\n    });\n  }\n\n  function prepareRow$3(row, _ref6) {\n    var instance = _ref6.instance;\n\n    row.toggleRowSelected = function (set) {\n      return instance.toggleRowSelected(row.id, set);\n    };\n\n    row.getToggleRowSelectedProps = makePropGetter(instance.getHooks().getToggleRowSelectedProps, {\n      instance: instance,\n      row: row\n    });\n  }\n\n  function getRowIsSelected(row, selectedRowIds, getSubRows) {\n    if (selectedRowIds[row.id]) {\n      return true;\n    }\n\n    var subRows = getSubRows(row);\n\n    if (subRows && subRows.length) {\n      var allChildrenSelected = true;\n      var someSelected = false;\n      subRows.forEach(function (subRow) {\n        // Bail out early if we know both of these\n        if (someSelected && !allChildrenSelected) {\n          return;\n        }\n\n        if (getRowIsSelected(subRow, selectedRowIds, getSubRows)) {\n          someSelected = true;\n        } else {\n          allChildrenSelected = false;\n        }\n      });\n      return allChildrenSelected ? true : someSelected ? null : false;\n    }\n\n    return false;\n  }\n\n  var defaultInitialRowStateAccessor = function defaultInitialRowStateAccessor(row) {\n    return {};\n  };\n\n  var defaultInitialCellStateAccessor = function defaultInitialCellStateAccessor(cell) {\n    return {};\n  }; // Actions\n\n\n  actions.setRowState = 'setRowState';\n  actions.setCellState = 'setCellState';\n  actions.resetRowState = 'resetRowState';\n\n  var useRowState = function useRowState(hooks) {\n    hooks.stateReducers.push(reducer$9);\n    hooks.useInstance.push(useInstance$9);\n    hooks.prepareRow.push(prepareRow$4);\n  };\n\n  useRowState.pluginName = 'useRowState';\n\n  function reducer$9(state, action, previousState, instance) {\n    var _instance$initialRowS = instance.initialRowStateAccessor,\n        initialRowStateAccessor = _instance$initialRowS === void 0 ? defaultInitialRowStateAccessor : _instance$initialRowS,\n        _instance$initialCell = instance.initialCellStateAccessor,\n        initialCellStateAccessor = _instance$initialCell === void 0 ? defaultInitialCellStateAccessor : _instance$initialCell,\n        rowsById = instance.rowsById;\n\n    if (action.type === actions.init) {\n      return _extends({\n        rowState: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetRowState) {\n      return _extends({}, state, {\n        rowState: instance.initialState.rowState || {}\n      });\n    }\n\n    if (action.type === actions.setRowState) {\n      var _extends2;\n\n      var rowId = action.rowId,\n          value = action.value;\n      var oldRowState = typeof state.rowState[rowId] !== 'undefined' ? state.rowState[rowId] : initialRowStateAccessor(rowsById[rowId]);\n      return _extends({}, state, {\n        rowState: _extends({}, state.rowState, (_extends2 = {}, _extends2[rowId] = functionalUpdate(value, oldRowState), _extends2))\n      });\n    }\n\n    if (action.type === actions.setCellState) {\n      var _oldRowState$cellStat, _rowsById$_rowId, _rowsById$_rowId$cell, _extends3, _extends4;\n\n      var _rowId = action.rowId,\n          columnId = action.columnId,\n          _value = action.value;\n\n      var _oldRowState = typeof state.rowState[_rowId] !== 'undefined' ? state.rowState[_rowId] : initialRowStateAccessor(rowsById[_rowId]);\n\n      var oldCellState = typeof (_oldRowState == null ? void 0 : (_oldRowState$cellStat = _oldRowState.cellState) == null ? void 0 : _oldRowState$cellStat[columnId]) !== 'undefined' ? _oldRowState.cellState[columnId] : initialCellStateAccessor((_rowsById$_rowId = rowsById[_rowId]) == null ? void 0 : (_rowsById$_rowId$cell = _rowsById$_rowId.cells) == null ? void 0 : _rowsById$_rowId$cell.find(function (cell) {\n        return cell.column.id === columnId;\n      }));\n      return _extends({}, state, {\n        rowState: _extends({}, state.rowState, (_extends4 = {}, _extends4[_rowId] = _extends({}, _oldRowState, {\n          cellState: _extends({}, _oldRowState.cellState || {}, (_extends3 = {}, _extends3[columnId] = functionalUpdate(_value, oldCellState), _extends3))\n        }), _extends4))\n      });\n    }\n  }\n\n  function useInstance$9(instance) {\n    var _instance$autoResetRo = instance.autoResetRowState,\n        autoResetRowState = _instance$autoResetRo === void 0 ? true : _instance$autoResetRo,\n        data = instance.data,\n        dispatch = instance.dispatch;\n    var setRowState = React.useCallback(function (rowId, value) {\n      return dispatch({\n        type: actions.setRowState,\n        rowId: rowId,\n        value: value\n      });\n    }, [dispatch]);\n    var setCellState = React.useCallback(function (rowId, columnId, value) {\n      return dispatch({\n        type: actions.setCellState,\n        rowId: rowId,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var getAutoResetRowState = useGetLatest(autoResetRowState);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetRowState()) {\n        dispatch({\n          type: actions.resetRowState\n        });\n      }\n    }, [data]);\n    Object.assign(instance, {\n      setRowState: setRowState,\n      setCellState: setCellState\n    });\n  }\n\n  function prepareRow$4(row, _ref) {\n    var instance = _ref.instance;\n    var _instance$initialRowS2 = instance.initialRowStateAccessor,\n        initialRowStateAccessor = _instance$initialRowS2 === void 0 ? defaultInitialRowStateAccessor : _instance$initialRowS2,\n        _instance$initialCell2 = instance.initialCellStateAccessor,\n        initialCellStateAccessor = _instance$initialCell2 === void 0 ? defaultInitialCellStateAccessor : _instance$initialCell2,\n        rowState = instance.state.rowState;\n\n    if (row) {\n      row.state = typeof rowState[row.id] !== 'undefined' ? rowState[row.id] : initialRowStateAccessor(row);\n\n      row.setState = function (updater) {\n        return instance.setRowState(row.id, updater);\n      };\n\n      row.cells.forEach(function (cell) {\n        if (!row.state.cellState) {\n          row.state.cellState = {};\n        }\n\n        cell.state = typeof row.state.cellState[cell.column.id] !== 'undefined' ? row.state.cellState[cell.column.id] : initialCellStateAccessor(cell);\n\n        cell.setState = function (updater) {\n          return instance.setCellState(row.id, cell.column.id, updater);\n        };\n      });\n    }\n  }\n\n  actions.resetColumnOrder = 'resetColumnOrder';\n  actions.setColumnOrder = 'setColumnOrder';\n\n  var useColumnOrder = function useColumnOrder(hooks) {\n    hooks.stateReducers.push(reducer$a);\n    hooks.visibleColumnsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.columnOrder]);\n    });\n    hooks.visibleColumns.push(visibleColumns$2);\n    hooks.useInstance.push(useInstance$a);\n  };\n\n  useColumnOrder.pluginName = 'useColumnOrder';\n\n  function reducer$a(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        columnOrder: []\n      }, state);\n    }\n\n    if (action.type === actions.resetColumnOrder) {\n      return _extends({}, state, {\n        columnOrder: instance.initialState.columnOrder || []\n      });\n    }\n\n    if (action.type === actions.setColumnOrder) {\n      return _extends({}, state, {\n        columnOrder: functionalUpdate(action.columnOrder, state.columnOrder)\n      });\n    }\n  }\n\n  function visibleColumns$2(columns, _ref2) {\n    var columnOrder = _ref2.instance.state.columnOrder; // If there is no order, return the normal columns\n\n    if (!columnOrder || !columnOrder.length) {\n      return columns;\n    }\n\n    var columnOrderCopy = [].concat(columnOrder); // If there is an order, make a copy of the columns\n\n    var columnsCopy = [].concat(columns); // And make a new ordered array of the columns\n\n    var columnsInOrder = []; // Loop over the columns and place them in order into the new array\n\n    var _loop = function _loop() {\n      var targetColumnId = columnOrderCopy.shift();\n      var foundIndex = columnsCopy.findIndex(function (d) {\n        return d.id === targetColumnId;\n      });\n\n      if (foundIndex > -1) {\n        columnsInOrder.push(columnsCopy.splice(foundIndex, 1)[0]);\n      }\n    };\n\n    while (columnsCopy.length && columnOrderCopy.length) {\n      _loop();\n    } // If there are any columns left, add them to the end\n\n\n    return [].concat(columnsInOrder, columnsCopy);\n  }\n\n  function useInstance$a(instance) {\n    var dispatch = instance.dispatch;\n    instance.setColumnOrder = React.useCallback(function (columnOrder) {\n      return dispatch({\n        type: actions.setColumnOrder,\n        columnOrder: columnOrder\n      });\n    }, [dispatch]);\n  }\n\n  defaultColumn.canResize = true; // Actions\n\n  actions.columnStartResizing = 'columnStartResizing';\n  actions.columnResizing = 'columnResizing';\n  actions.columnDoneResizing = 'columnDoneResizing';\n  actions.resetResize = 'resetResize';\n\n  var useResizeColumns = function useResizeColumns(hooks) {\n    hooks.getResizerProps = [defaultGetResizerProps];\n    hooks.getHeaderProps.push({\n      style: {\n        position: 'relative'\n      }\n    });\n    hooks.stateReducers.push(reducer$b);\n    hooks.useInstance.push(useInstance$b);\n    hooks.useInstanceBeforeDimensions.push(useInstanceBeforeDimensions$1);\n  };\n\n  var defaultGetResizerProps = function defaultGetResizerProps(props, _ref) {\n    var instance = _ref.instance,\n        header = _ref.header;\n    var dispatch = instance.dispatch;\n\n    var onResizeStart = function onResizeStart(e, header) {\n      var isTouchEvent = false;\n\n      if (e.type === 'touchstart') {\n        // lets not respond to multiple touches (e.g. 2 or 3 fingers)\n        if (e.touches && e.touches.length > 1) {\n          return;\n        }\n\n        isTouchEvent = true;\n      }\n\n      var headersToResize = getLeafHeaders(header);\n      var headerIdWidths = headersToResize.map(function (d) {\n        return [d.id, d.totalWidth];\n      });\n      var clientX = isTouchEvent ? Math.round(e.touches[0].clientX) : e.clientX;\n\n      var dispatchMove = function dispatchMove(clientXPos) {\n        dispatch({\n          type: actions.columnResizing,\n          clientX: clientXPos\n        });\n      };\n\n      var dispatchEnd = function dispatchEnd() {\n        return dispatch({\n          type: actions.columnDoneResizing\n        });\n      };\n\n      var handlersAndEvents = {\n        mouse: {\n          moveEvent: 'mousemove',\n          moveHandler: function moveHandler(e) {\n            return dispatchMove(e.clientX);\n          },\n          upEvent: 'mouseup',\n          upHandler: function upHandler(e) {\n            document.removeEventListener('mousemove', handlersAndEvents.mouse.moveHandler);\n            document.removeEventListener('mouseup', handlersAndEvents.mouse.upHandler);\n            dispatchEnd();\n          }\n        },\n        touch: {\n          moveEvent: 'touchmove',\n          moveHandler: function moveHandler(e) {\n            if (e.cancelable) {\n              e.preventDefault();\n              e.stopPropagation();\n            }\n\n            dispatchMove(e.touches[0].clientX);\n            return false;\n          },\n          upEvent: 'touchend',\n          upHandler: function upHandler(e) {\n            document.removeEventListener(handlersAndEvents.touch.moveEvent, handlersAndEvents.touch.moveHandler);\n            document.removeEventListener(handlersAndEvents.touch.upEvent, handlersAndEvents.touch.moveHandler);\n            dispatchEnd();\n          }\n        }\n      };\n      var events = isTouchEvent ? handlersAndEvents.touch : handlersAndEvents.mouse;\n      var passiveIfSupported = passiveEventSupported() ? {\n        passive: false\n      } : false;\n      document.addEventListener(events.moveEvent, events.moveHandler, passiveIfSupported);\n      document.addEventListener(events.upEvent, events.upHandler, passiveIfSupported);\n      dispatch({\n        type: actions.columnStartResizing,\n        columnId: header.id,\n        columnWidth: header.totalWidth,\n        headerIdWidths: headerIdWidths,\n        clientX: clientX\n      });\n    };\n\n    return [props, {\n      onMouseDown: function onMouseDown(e) {\n        return e.persist() || onResizeStart(e, header);\n      },\n      onTouchStart: function onTouchStart(e) {\n        return e.persist() || onResizeStart(e, header);\n      },\n      style: {\n        cursor: 'col-resize'\n      },\n      draggable: false,\n      role: 'separator'\n    }];\n  };\n\n  useResizeColumns.pluginName = 'useResizeColumns';\n\n  function reducer$b(state, action) {\n    if (action.type === actions.init) {\n      return _extends({\n        columnResizing: {\n          columnWidths: {}\n        }\n      }, state);\n    }\n\n    if (action.type === actions.resetResize) {\n      return _extends({}, state, {\n        columnResizing: {\n          columnWidths: {}\n        }\n      });\n    }\n\n    if (action.type === actions.columnStartResizing) {\n      var clientX = action.clientX,\n          columnId = action.columnId,\n          columnWidth = action.columnWidth,\n          headerIdWidths = action.headerIdWidths;\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          startX: clientX,\n          headerIdWidths: headerIdWidths,\n          columnWidth: columnWidth,\n          isResizingColumn: columnId\n        })\n      });\n    }\n\n    if (action.type === actions.columnResizing) {\n      var _clientX = action.clientX;\n\n      var _state$columnResizing = state.columnResizing,\n          startX = _state$columnResizing.startX,\n          _columnWidth = _state$columnResizing.columnWidth,\n          _state$columnResizing2 = _state$columnResizing.headerIdWidths,\n          _headerIdWidths = _state$columnResizing2 === void 0 ? [] : _state$columnResizing2;\n\n      var deltaX = _clientX - startX;\n      var percentageDeltaX = deltaX / _columnWidth;\n      var newColumnWidths = {};\n\n      _headerIdWidths.forEach(function (_ref2) {\n        var headerId = _ref2[0],\n            headerWidth = _ref2[1];\n        newColumnWidths[headerId] = Math.max(headerWidth + headerWidth * percentageDeltaX, 0);\n      });\n\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          columnWidths: _extends({}, state.columnResizing.columnWidths, {}, newColumnWidths)\n        })\n      });\n    }\n\n    if (action.type === actions.columnDoneResizing) {\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          startX: null,\n          isResizingColumn: null\n        })\n      });\n    }\n  }\n\n  var useInstanceBeforeDimensions$1 = function useInstanceBeforeDimensions(instance) {\n    var flatHeaders = instance.flatHeaders,\n        disableResizing = instance.disableResizing,\n        getHooks = instance.getHooks,\n        columnResizing = instance.state.columnResizing;\n    var getInstance = useGetLatest(instance);\n    flatHeaders.forEach(function (header) {\n      var canResize = getFirstDefined(header.disableResizing === true ? false : undefined, disableResizing === true ? false : undefined, true);\n      header.canResize = canResize;\n      header.width = columnResizing.columnWidths[header.id] || header.originalWidth || header.width;\n      header.isResizing = columnResizing.isResizingColumn === header.id;\n\n      if (canResize) {\n        header.getResizerProps = makePropGetter(getHooks().getResizerProps, {\n          instance: getInstance(),\n          header: header\n        });\n      }\n    });\n  };\n\n  function useInstance$b(instance) {\n    var plugins = instance.plugins,\n        dispatch = instance.dispatch,\n        _instance$autoResetRe = instance.autoResetResize,\n        autoResetResize = _instance$autoResetRe === void 0 ? true : _instance$autoResetRe,\n        columns = instance.columns;\n    ensurePluginOrder(plugins, ['useAbsoluteLayout'], 'useResizeColumns');\n    var getAutoResetResize = useGetLatest(autoResetResize);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetResize()) {\n        dispatch({\n          type: actions.resetResize\n        });\n      }\n    }, [columns]);\n    var resetResizing = React.useCallback(function () {\n      return dispatch({\n        type: actions.resetResize\n      });\n    }, [dispatch]);\n    Object.assign(instance, {\n      resetResizing: resetResizing\n    });\n  }\n\n  function getLeafHeaders(header) {\n    var leafHeaders = [];\n\n    var recurseHeader = function recurseHeader(header) {\n      if (header.columns && header.columns.length) {\n        header.columns.map(recurseHeader);\n      }\n\n      leafHeaders.push(header);\n    };\n\n    recurseHeader(header);\n    return leafHeaders;\n  }\n\n  var cellStyles = {\n    position: 'absolute',\n    top: 0\n  };\n\n  var useAbsoluteLayout = function useAbsoluteLayout(hooks) {\n    hooks.getTableBodyProps.push(getRowStyles);\n    hooks.getRowProps.push(getRowStyles);\n    hooks.getHeaderGroupProps.push(getRowStyles);\n    hooks.getFooterGroupProps.push(getRowStyles);\n    hooks.getHeaderProps.push(function (props, _ref) {\n      var column = _ref.column;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: column.totalLeft + \"px\",\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getCellProps.push(function (props, _ref2) {\n      var cell = _ref2.cell;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: cell.column.totalLeft + \"px\",\n          width: cell.column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getFooterProps.push(function (props, _ref3) {\n      var column = _ref3.column;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: column.totalLeft + \"px\",\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n  };\n\n  useAbsoluteLayout.pluginName = 'useAbsoluteLayout';\n\n  var getRowStyles = function getRowStyles(props, _ref4) {\n    var instance = _ref4.instance;\n    return [props, {\n      style: {\n        position: 'relative',\n        width: instance.totalColumnsWidth + \"px\"\n      }\n    }];\n  };\n\n  var cellStyles$1 = {\n    display: 'inline-block',\n    boxSizing: 'border-box'\n  };\n\n  var getRowStyles$1 = function getRowStyles(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        display: 'flex',\n        width: instance.totalColumnsWidth + \"px\"\n      }\n    }];\n  };\n\n  var useBlockLayout = function useBlockLayout(hooks) {\n    hooks.getRowProps.push(getRowStyles$1);\n    hooks.getHeaderGroupProps.push(getRowStyles$1);\n    hooks.getFooterGroupProps.push(getRowStyles$1);\n    hooks.getHeaderProps.push(function (props, _ref2) {\n      var column = _ref2.column;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getCellProps.push(function (props, _ref3) {\n      var cell = _ref3.cell;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: cell.column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getFooterProps.push(function (props, _ref4) {\n      var column = _ref4.column;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n  };\n\n  useBlockLayout.pluginName = 'useBlockLayout';\n\n  function useFlexLayout(hooks) {\n    hooks.getTableProps.push(getTableProps);\n    hooks.getRowProps.push(getRowStyles$2);\n    hooks.getHeaderGroupProps.push(getRowStyles$2);\n    hooks.getFooterGroupProps.push(getRowStyles$2);\n    hooks.getHeaderProps.push(getHeaderProps);\n    hooks.getCellProps.push(getCellProps);\n    hooks.getFooterProps.push(getFooterProps);\n  }\n\n  useFlexLayout.pluginName = 'useFlexLayout';\n\n  var getTableProps = function getTableProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        minWidth: instance.totalColumnsMinWidth + \"px\"\n      }\n    }];\n  };\n\n  var getRowStyles$2 = function getRowStyles(props, _ref2) {\n    var instance = _ref2.instance;\n    return [props, {\n      style: {\n        display: 'flex',\n        flex: '1 0 auto',\n        minWidth: instance.totalColumnsMinWidth + \"px\"\n      }\n    }];\n  };\n\n  var getHeaderProps = function getHeaderProps(props, _ref3) {\n    var column = _ref3.column;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: column.totalFlexWidth ? column.totalFlexWidth + \" 0 auto\" : undefined,\n        minWidth: column.totalMinWidth + \"px\",\n        width: column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  var getCellProps = function getCellProps(props, _ref4) {\n    var cell = _ref4.cell;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: cell.column.totalFlexWidth + \" 0 auto\",\n        minWidth: cell.column.totalMinWidth + \"px\",\n        width: cell.column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  var getFooterProps = function getFooterProps(props, _ref5) {\n    var column = _ref5.column;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: column.totalFlexWidth ? column.totalFlexWidth + \" 0 auto\" : undefined,\n        minWidth: column.totalMinWidth + \"px\",\n        width: column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  function useGridLayout(hooks) {\n    hooks.stateReducers.push(reducer$c);\n    hooks.getTableProps.push(getTableProps$1);\n    hooks.getHeaderProps.push(getHeaderProps$1);\n  }\n\n  useGridLayout.pluginName = 'useGridLayout';\n\n  var getTableProps$1 = function getTableProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: instance.state.gridLayout.columnWidths.map(function (w) {\n          return w;\n        }).join(\" \")\n      }\n    }];\n  };\n\n  var getHeaderProps$1 = function getHeaderProps(props, _ref2) {\n    var column = _ref2.column;\n    return [props, {\n      id: \"header-cell-\" + column.id,\n      style: {\n        position: \"sticky\" //enables a scroll wrapper to be placed around the table and have sticky headers\n\n      }\n    }];\n  };\n\n  function reducer$c(state, action, previousState, instance) {\n    if (action.type === \"init\") {\n      return _extends({\n        gridLayout: {\n          columnWidths: instance.columns.map(function () {\n            return \"auto\";\n          })\n        }\n      }, state);\n    }\n\n    if (action.type === \"columnStartResizing\") {\n      var columnId = action.columnId;\n      var columnIndex = instance.visibleColumns.findIndex(function (col) {\n        return col.id === columnId;\n      });\n      var elWidth = getElementWidth(columnId);\n\n      if (elWidth !== undefined) {\n        return _extends({}, state, {\n          gridLayout: _extends({}, state.gridLayout, {\n            columnId: columnId,\n            columnIndex: columnIndex,\n            startingWidth: elWidth\n          })\n        });\n      } else {\n        return state;\n      }\n    }\n\n    if (action.type === \"columnResizing\") {\n      var _state$gridLayout = state.gridLayout,\n          _columnIndex = _state$gridLayout.columnIndex,\n          startingWidth = _state$gridLayout.startingWidth,\n          columnWidths = _state$gridLayout.columnWidths;\n      var change = state.columnResizing.startX - action.clientX;\n      var newWidth = startingWidth - change;\n      var columnWidthsCopy = [].concat(columnWidths);\n      columnWidthsCopy[_columnIndex] = newWidth + \"px\";\n      return _extends({}, state, {\n        gridLayout: _extends({}, state.gridLayout, {\n          columnWidths: columnWidthsCopy\n        })\n      });\n    }\n  }\n\n  function getElementWidth(columnId) {\n    var _document$getElementB;\n\n    var width = (_document$getElementB = document.getElementById(\"header-cell-\" + columnId)) == null ? void 0 : _document$getElementB.offsetWidth;\n\n    if (width !== undefined) {\n      return width;\n    }\n  }\n\n  exports._UNSTABLE_usePivotColumns = _UNSTABLE_usePivotColumns;\n  exports.actions = actions;\n  exports.defaultColumn = defaultColumn;\n  exports.defaultGroupByFn = defaultGroupByFn;\n  exports.defaultOrderByFn = defaultOrderByFn;\n  exports.defaultRenderer = defaultRenderer;\n  exports.emptyRenderer = emptyRenderer;\n  exports.ensurePluginOrder = ensurePluginOrder;\n  exports.flexRender = flexRender;\n  exports.functionalUpdate = functionalUpdate;\n  exports.loopHooks = loopHooks;\n  exports.makePropGetter = makePropGetter;\n  exports.makeRenderer = makeRenderer;\n  exports.reduceHooks = reduceHooks;\n  exports.safeUseLayoutEffect = safeUseLayoutEffect;\n  exports.useAbsoluteLayout = useAbsoluteLayout;\n  exports.useAsyncDebounce = useAsyncDebounce;\n  exports.useBlockLayout = useBlockLayout;\n  exports.useColumnOrder = useColumnOrder;\n  exports.useExpanded = useExpanded;\n  exports.useFilters = useFilters;\n  exports.useFlexLayout = useFlexLayout;\n  exports.useGetLatest = useGetLatest;\n  exports.useGlobalFilter = useGlobalFilter;\n  exports.useGridLayout = useGridLayout;\n  exports.useGroupBy = useGroupBy;\n  exports.useMountedLayoutEffect = useMountedLayoutEffect;\n  exports.usePagination = usePagination;\n  exports.useResizeColumns = useResizeColumns;\n  exports.useRowSelect = useRowSelect;\n  exports.useRowState = useRowState;\n  exports.useSortBy = useSortBy;\n  exports.useTable = useTable;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"mappings":"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","names":["global","factory","exports","module","require","define","amd","self","ReactTable","React","Object","prototype","hasOwnProperty","call","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","args","arguments","apply","err","undefined","_extends","assign","target","i","length","source","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_toPrimitive","input","hint","prim","Symbol","toPrimitive","res","TypeError","String","Number","_toPropertyKey","renderErr","actions","init","defaultRenderer","_ref","_ref$value","emptyRenderer","createElement","Fragment","defaultColumn","Cell","width","minWidth","maxWidth","MAX_SAFE_INTEGER","mergeProps","_len","propList","Array","_key","reduce","props","next","style","className","rest","handlePropGetter","prevProps","userProps","meta","isArray","concat","makePropGetter","hooks","prev","reduceHooks","initial","allowUndefined","nextValue","console","Error","loopHooks","context","forEach","hook","ensurePluginOrder","plugins","befores","pluginName","afters","pluginIndex","findIndex","plugin","before","beforeIndex","functionalUpdate","updater","old","useGetLatest","obj","ref","useRef","current","useCallback","safeUseLayoutEffect","document","useLayoutEffect","useEffect","useMountedLayoutEffect","deps","mountedRef","useAsyncDebounce","defaultFn","defaultWait","debounceRef","getDefaultFn","getDefaultWait","_ref2","mark","_callee2","_len2","_key2","_args2","wrap","_callee2$","_context2","promise","timeout","clearTimeout","setTimeout","_callee","_callee$","_context","t0","t1","sent","t2","finish","stop","abrupt","makeRenderer","instance","column","type","Comp","flexRender","isReactComponent","component","isClassComponent","isExoticComponent","proto","getPrototypeOf","$$typeof","includes","description","linkColumnStructure","columns","parent","depth","map","assignColumnAccessor","flattenColumns","flattenBy","id","accessor","Header","accessorPath","split","row","getBy","decorateColumn","userDefaultColumn","Footer","originalWidth","makeHeaderGroups","allColumns","additionalHeaderProperties","headerGroups","scanColumns","uid","getUID","_loop","headerGroup","headers","parentColumns","hasParents","some","d","latestParentColumn","reverse","newParent","originalId","placeholderOf","push","pathObjCache","Map","path","def","cacheKey","JSON","stringify","pathObj","get","makePathArray","set","val","cursor","pathPart","e","getFirstDefined","isFunction","a","arr","flat","recurse","expandRows","rows","manualExpandedKey","expanded","_ref$expandSubRows","expandSubRows","expandedRows","handleRow","addToExpandedRows","isExpanded","original","canExpand","subRows","getFilterMethod","filter","userFilterTypes","filterTypes","text","shouldAutoRemoveFilter","autoRemove","unpreparedAccessWarning","passiveSupported","passiveEventSupported","supported","options","passive","window","addEventListener","removeEventListener","reOpenBracket","reCloseBracket","flattenDeep","replace","join","newArr","defaultGetTableProps","role","defaultGetTableBodyProps","defaultGetHeaderProps","colSpan","totalVisibleHeaderCount","defaultGetFooterProps","defaultGetHeaderGroupProps","_ref3","index","defaultGetFooterGroupProps","_ref4","defaultGetRowProps","_ref5","defaultGetCellProps","_ref6","cell","makeDefaultPluginHooks","useOptions","stateReducers","useControlledState","columnsDeps","allColumnsDeps","accessValue","materializedColumns","materializedColumnsDeps","useInstanceAfterData","visibleColumns","visibleColumnsDeps","headerGroupsDeps","useInstanceBeforeDimensions","useInstance","prepareRow","getTableProps","getTableBodyProps","getHeaderGroupProps","getFooterGroupProps","getHeaderProps","getFooterProps","getRowProps","getCellProps","useFinalInstance","resetHiddenColumns","toggleHideColumn","setHiddenColumns","toggleHideAllColumns","useColumnVisibility","getToggleHiddenProps","defaultGetToggleHiddenProps","getToggleHideAllColumnsProps","defaultGetToggleHideAllColumnsProps","reducer","state","hiddenColumns","onChange","toggleHidden","checked","isVisible","title","allColumnsHidden","indeterminate","action","previousState","initialState","should","columnId","shouldAll","isMountedRef","handleColumn","parentVisible","subColumn","subHeader","flatHeaders","dispatch","getHooks","_instance$autoResetHi","autoResetHiddenColumns","getInstance","getAutoResetHiddenColumns","defaultInitialState","defaultColumnInstance","defaultReducer","prevState","defaultGetSubRows","defaultGetRowId","defaultUseControlledState","applyDefaults","_props$initialState","_props$defaultColumn","_props$getSubRows","getSubRows","_props$getRowId","getRowId","_props$stateReducer","stateReducer","_props$useControlledS","useTable","instanceRef","Boolean","_getInstance","data","userColumns","getStateReducer","s","handler","_React$useReducer","useReducer","reducerState","useMemo","_React$useMemo","flatRows","rowsById","allColumnsQueue","shift","accessRowsForColumn","accessValueHooks","initialRows","find","duplicateColumns","all","visibleColumnsDep","sort","_calculateHeaderWidth","calculateHeaderWidths","totalColumnsMinWidth","totalColumnsWidth","totalColumnsMaxWidth","render","footerGroups","allCells","values","cells","left","sumTotalMinWidth","sumTotalWidth","sumTotalMaxWidth","sumTotalFlexWidth","header","subHeaders","totalLeft","_calculateHeaderWidth2","totalMinWidth","totalWidth","totalMaxWidth","totalFlexWidth","Math","min","max","canResize","accessRow","originalRow","rowIndex","parentRows","originalSubRows","resetExpanded","toggleRowExpanded","toggleAllRowsExpanded","useExpanded","getToggleAllRowsExpandedProps","defaultGetToggleAllRowsExpandedProps","getToggleRowExpandedProps","defaultGetToggleRowExpandedProps","reducer$1","useInstance$1","onClick","isAllRowsExpanded","expandAll","rowId","setExpanded","exists","shouldExist","_extends2","_state$expanded","_","_instance$manualExpan","_instance$paginateExp","paginateExpandedRows","_instance$expandSubRo","_instance$autoResetEx","autoResetExpanded","getAutoResetExpanded","expandedDepth","findExpandedDepth","preExpandedRows","maxDepth","splitId","ids","filterValue","rowValue","toLowerCase","exactText","exactTextCase","includesAll","every","includesSome","includesValue","exact","equals","between","Infinity","temp","freeze","__proto__","resetFilters","setFilter","setAllFilters","useFilters","reducer$2","useInstance$2","filters","filterMethod","previousfilter","newFilter","_allColumns","_userFilterTypes","manualFilters","_instance$defaultCanF","defaultCanFilter","disableFilters","_instance$autoResetFi","autoResetFilters","columnDefaultCanFilter","columnDisableFilters","canFilter","found","filteredFlatRows","filteredRowsById","filterRows","filteredRows","filteredSoFar","preFilteredRows","warn","nonFilteredColumns","getAutoResetFilters","preFilteredFlatRows","preFilteredRowsById","resetGlobalFilter","setGlobalFilter","useGlobalFilter","reducer$3","useInstance$3","globalFilter","stateWithoutGlobalFilter","manualGlobalFilter","globalFilterValue","_instance$autoResetGl","autoResetGlobalFilter","disableGlobalFilter","columnDisableGlobalFilter","filterableColumns","c","globalFilteredRows","globalFilteredFlatRows","globalFilteredRowsById","getAutoResetGlobalFilter","preGlobalFilteredRows","preGlobalFilteredFlatRows","preGlobalFilteredRowsById","sum","aggregatedValues","minMax","average","median","mid","floor","nums","b","unique","from","Set","uniqueCount","size","count","aggregations","emptyArray","emptyObject","resetGroupBy","setGroupBy","toggleGroupBy","useGroupBy","getGroupByToggleProps","defaultGetGroupByToggleProps","reducer$4","groupBy","useInstance$4","prepareRow$1","canGroupBy","persist","resolvedGroupBy","groupByColumns","g","col","nonGroupByColumns","isGrouped","groupedIndex","defaultUserAggregations","_instance$groupByFn","groupByFn","defaultGroupByFn","manualGroupBy","_instance$aggregation","userAggregations","_instance$autoResetGr","autoResetGroupBy","disableGroupBy","defaultCanGroupBy","defaultColumnGroupBy","defaultGroupBy","columnDisableGroupBy","Aggregated","existingGroupBy","aggregateRowsToValues","leafRows","groupedRows","aggregateFn","aggregate","groupedValues","leafValues","columnValue","aggregateValue","aggregateValueFn","groupedFlatRows","groupedRowsById","onlyGroupedFlatRows","onlyGroupedRowsById","nonGroupedFlatRows","nonGroupedRowsById","groupUpRecursively","parentId","rowGroupsMap","aggregatedGroupedRows","entries","groupByVal","groupByID","subRow","getAutoResetGroupBy","preGroupedRows","preGroupedFlatRow","preGroupedRowsById","_row$subRows","isPlaceholder","isAggregated","resKey","reSplitAlphaNumeric","alphanumeric","rowA","rowB","_getRowValuesByColumn","getRowValuesByColumnID","toString","aa","bb","an","parseInt","bn","combo","isNaN","datetime","_getRowValuesByColumn2","getTime","compareBasic","basic","_getRowValuesByColumn3","string","_getRowValuesByColumn4","alower","blower","number","_getRowValuesByColumn5","replaceNonNumeric","row1","row2","sortTypes","resetSortBy","setSortBy","toggleSortBy","clearSortBy","sortType","sortDescFirst","useSortBy","getSortByToggleProps","defaultGetSortByToggleProps","reducer$5","useInstance$5","_instance$isMultiSort","isMultiSortEvent","shiftKey","canSort","disableMultiSort","sortBy","newSortBy","_sortBy","desc","multi","disableSortRemove","disableMultiRemove","_instance$maxMultiSor","maxMultiSortColCount","_sortBy2","existingSortBy","existingIndex","hasDescDefined","_newSortBy","sortAction","splice","_instance$orderByFn","orderByFn","defaultOrderByFn","userSortTypes","manualSortBy","defaultCanSort","disableSortBy","_instance$autoResetSo","autoResetSortBy","defaultColumnCanSort","columnDisableSortBy","columnSort","isSorted","sortedIndex","isSortedDesc","sortedFlatRows","availableSortBy","sortData","sortedData","sortMethod","sortInverted","sortedRows","getAutoResetSortBy","preSortedRows","preSortedFlatRows","funcs","dirs","sortFn","sortInt","resetPage","gotoPage","setPageSize","usePagination","reducer$6","useInstance$6","pageSize","pageIndex","pageCount","page","newPageIndex","canNavigate","topRowIndex","_instance$autoResetPa","autoResetPage","userPageCount","_instance$state","manualPagination","getAutoResetPage","ceil","pageOptions","fill","pageStart","pageEnd","slice","canPreviousPage","canNextPage","previousPage","nextPage","resetPivot","togglePivot","_UNSTABLE_usePivotColumns","getPivotToggleProps","defaultGetPivotToggleProps","reducer$7","visibleColumns$1","useInstance$7","prepareRow$2","defaultPivotColumns","canPivot","pivotColumns","setPivot","resolvedPivot","isPivotSource","uniqueValues","add","materialized","sourceColumns","buildPivotColumns","pivotFilters","pivotColumn","sourceColumn","isPivoted","uniqueValue","columnGroup","PivotHeader","isPivotGroup","pivotValue","newMaterialized","_ref5$instance$state","_ref7","_instance$autoResetPi","autoResetPivot","manaulPivot","disablePivot","defaultCanPivot","defaultColumnPivot","defaultPivot","columnDisablePivot","getAutoResetPivot","pluginName$1","resetSelectedRows","toggleAllRowsSelected","toggleRowSelected","toggleAllPageRowsSelected","useRowSelect","getToggleRowSelectedProps","defaultGetToggleRowSelectedProps","getToggleAllRowsSelectedProps","defaultGetToggleAllRowsSelectedProps","getToggleAllPageRowsSelectedProps","defaultGetToggleAllPageRowsSelectedProps","reducer$8","useInstance$8","prepareRow$3","_instance$manualRowSe","manualRowSelectedKey","isSelected","isSomeSelected","isAllRowsSelected","selectedRowIds","isAllPageRowsSelected","setSelected","_instance$nonGroupedR","selectAll","_setSelected","_rowsById","_instance$selectSubRo","selectSubRows","newSelectedRowIds","handleRowById","_setSelected2","_rowsById2","_instance$selectSubRo2","_selectSubRows","_getSubRows","_selectAll","_newSelectedRowIds","_handleRowById","_instance$nonGroupedR2","_instance$autoResetSe","autoResetSelectedRows","_instance$selectSubRo3","selectedFlatRows","getRowIsSelected","getAutoResetSelectedRows","allChildrenSelected","someSelected","defaultInitialRowStateAccessor","defaultInitialCellStateAccessor","setRowState","setCellState","resetRowState","useRowState","reducer$9","useInstance$9","prepareRow$4","_instance$initialRowS","initialRowStateAccessor","_instance$initialCell","initialCellStateAccessor","rowState","oldRowState","_oldRowState$cellStat","_rowsById$_rowId","_rowsById$_rowId$cell","_extends3","_extends4","_rowId","_value","_oldRowState","oldCellState","cellState","_instance$autoResetRo","autoResetRowState","getAutoResetRowState","_instance$initialRowS2","_instance$initialCell2","setState","resetColumnOrder","setColumnOrder","useColumnOrder","reducer$a","columnOrder","visibleColumns$2","useInstance$a","columnOrderCopy","columnsCopy","columnsInOrder","targetColumnId","foundIndex","columnStartResizing","columnResizing","columnDoneResizing","resetResize","useResizeColumns","getResizerProps","defaultGetResizerProps","position","reducer$b","useInstance$b","useInstanceBeforeDimensions$1","onResizeStart","isTouchEvent","touches","headersToResize","getLeafHeaders","headerIdWidths","clientX","round","dispatchMove","clientXPos","dispatchEnd","handlersAndEvents","mouse","moveEvent","moveHandler","upEvent","upHandler","touch","cancelable","preventDefault","stopPropagation","events","passiveIfSupported","columnWidth","onMouseDown","onTouchStart","draggable","columnWidths","startX","isResizingColumn","_clientX","_state$columnResizing","_columnWidth","_state$columnResizing2","_headerIdWidths","deltaX","percentageDeltaX","newColumnWidths","headerId","headerWidth","disableResizing","isResizing","_instance$autoResetRe","autoResetResize","getAutoResetResize","resetResizing","leafHeaders","recurseHeader","cellStyles","top","useAbsoluteLayout","getRowStyles","cellStyles$1","display","boxSizing","getRowStyles$1","useBlockLayout","useFlexLayout","getRowStyles$2","flex","useGridLayout","reducer$c","getTableProps$1","getHeaderProps$1","gridTemplateColumns","gridLayout","w","columnIndex","elWidth","getElementWidth","startingWidth","_state$gridLayout","_columnIndex","change","newWidth","columnWidthsCopy","_document$getElementB","getElementById","offsetWidth","defineProperty"],"sources":["C:/Users/Ismail Saheb/Desktop/react/my-app/node_modules/react-table/dist/react-table.development.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = global || self, factory(global.ReactTable = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  React = React && Object.prototype.hasOwnProperty.call(React, 'default') ? React['default'] : React;\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function () {\n      var self = this,\n          args = arguments;\n      return new Promise(function (resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== \"object\" || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || \"default\");\n      if (typeof res !== \"object\") return res;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n\n    return (hint === \"string\" ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, \"string\");\n\n    return typeof key === \"symbol\" ? key : String(key);\n  }\n\n  var renderErr = 'Renderer Error ☝️';\n  var actions = {\n    init: 'init'\n  };\n  var defaultRenderer = function defaultRenderer(_ref) {\n    var _ref$value = _ref.value,\n        value = _ref$value === void 0 ? '' : _ref$value;\n    return value;\n  };\n  var emptyRenderer = function emptyRenderer() {\n    return React.createElement(React.Fragment, null, \"\\xA0\");\n  };\n  var defaultColumn = {\n    Cell: defaultRenderer,\n    width: 150,\n    minWidth: 0,\n    maxWidth: Number.MAX_SAFE_INTEGER\n  };\n\n  function mergeProps() {\n    for (var _len = arguments.length, propList = new Array(_len), _key = 0; _key < _len; _key++) {\n      propList[_key] = arguments[_key];\n    }\n\n    return propList.reduce(function (props, next) {\n      var style = next.style,\n          className = next.className,\n          rest = _objectWithoutPropertiesLoose(next, [\"style\", \"className\"]);\n\n      props = _extends({}, props, {}, rest);\n\n      if (style) {\n        props.style = props.style ? _extends({}, props.style || {}, {}, style || {}) : style;\n      }\n\n      if (className) {\n        props.className = props.className ? props.className + ' ' + className : className;\n      }\n\n      if (props.className === '') {\n        delete props.className;\n      }\n\n      return props;\n    }, {});\n  }\n\n  function handlePropGetter(prevProps, userProps, meta) {\n    // Handle a lambda, pass it the previous props\n    if (typeof userProps === 'function') {\n      return handlePropGetter({}, userProps(prevProps, meta));\n    } // Handle an array, merge each item as separate props\n\n\n    if (Array.isArray(userProps)) {\n      return mergeProps.apply(void 0, [prevProps].concat(userProps));\n    } // Handle an object by default, merge the two objects\n\n\n    return mergeProps(prevProps, userProps);\n  }\n\n  var makePropGetter = function makePropGetter(hooks, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return function (userProps) {\n      if (userProps === void 0) {\n        userProps = {};\n      }\n\n      return [].concat(hooks, [userProps]).reduce(function (prev, next) {\n        return handlePropGetter(prev, next, _extends({}, meta, {\n          userProps: userProps\n        }));\n      }, {});\n    };\n  };\n  var reduceHooks = function reduceHooks(hooks, initial, meta, allowUndefined) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return hooks.reduce(function (prev, next) {\n      var nextValue = next(prev, meta);\n\n      {\n        if (!allowUndefined && typeof nextValue === 'undefined') {\n          console.info(next);\n          throw new Error('React Table: A reducer hook ☝️ just returned undefined! This is not allowed.');\n        }\n      }\n\n      return nextValue;\n    }, initial);\n  };\n  var loopHooks = function loopHooks(hooks, context, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return hooks.forEach(function (hook) {\n      var nextValue = hook(context, meta);\n\n      {\n        if (typeof nextValue !== 'undefined') {\n          console.info(hook, nextValue);\n          throw new Error('React Table: A loop-type hook ☝️ just returned a value! This is not allowed.');\n        }\n      }\n    });\n  };\n  function ensurePluginOrder(plugins, befores, pluginName, afters) {\n    if ( afters) {\n      throw new Error(\"Defining plugins in the \\\"after\\\" section of ensurePluginOrder is no longer supported (see plugin \" + pluginName + \")\");\n    }\n\n    var pluginIndex = plugins.findIndex(function (plugin) {\n      return plugin.pluginName === pluginName;\n    });\n\n    if (pluginIndex === -1) {\n      {\n        throw new Error(\"The plugin \\\"\" + pluginName + \"\\\" was not found in the plugin list!\\nThis usually means you need to need to name your plugin hook by setting the 'pluginName' property of the hook function, eg:\\n\\n  \" + pluginName + \".pluginName = '\" + pluginName + \"'\\n\");\n      }\n    }\n\n    befores.forEach(function (before) {\n      var beforeIndex = plugins.findIndex(function (plugin) {\n        return plugin.pluginName === before;\n      });\n\n      if (beforeIndex > -1 && beforeIndex > pluginIndex) {\n        {\n          throw new Error(\"React Table: The \" + pluginName + \" plugin hook must be placed after the \" + before + \" plugin hook!\");\n        }\n      }\n    });\n  }\n  function functionalUpdate(updater, old) {\n    return typeof updater === 'function' ? updater(old) : updater;\n  }\n  function useGetLatest(obj) {\n    var ref = React.useRef();\n    ref.current = obj;\n    return React.useCallback(function () {\n      return ref.current;\n    }, []);\n  } // SSR has issues with useLayoutEffect still, so use useEffect during SSR\n\n  var safeUseLayoutEffect = typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n  function useMountedLayoutEffect(fn, deps) {\n    var mountedRef = React.useRef(false);\n    safeUseLayoutEffect(function () {\n      if (mountedRef.current) {\n        fn();\n      }\n\n      mountedRef.current = true; // eslint-disable-next-line\n    }, deps);\n  }\n  function useAsyncDebounce(defaultFn, defaultWait) {\n    if (defaultWait === void 0) {\n      defaultWait = 0;\n    }\n\n    var debounceRef = React.useRef({});\n    var getDefaultFn = useGetLatest(defaultFn);\n    var getDefaultWait = useGetLatest(defaultWait);\n    return React.useCallback(\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _len2,\n            args,\n            _key2,\n            _args2 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                for (_len2 = _args2.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = _args2[_key2];\n                }\n\n                if (!debounceRef.current.promise) {\n                  debounceRef.current.promise = new Promise(function (resolve, reject) {\n                    debounceRef.current.resolve = resolve;\n                    debounceRef.current.reject = reject;\n                  });\n                }\n\n                if (debounceRef.current.timeout) {\n                  clearTimeout(debounceRef.current.timeout);\n                }\n\n                debounceRef.current.timeout = setTimeout(\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                regeneratorRuntime.mark(function _callee() {\n                  return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          delete debounceRef.current.timeout;\n                          _context.prev = 1;\n                          _context.t0 = debounceRef.current;\n                          _context.next = 5;\n                          return getDefaultFn().apply(void 0, args);\n\n                        case 5:\n                          _context.t1 = _context.sent;\n\n                          _context.t0.resolve.call(_context.t0, _context.t1);\n\n                          _context.next = 12;\n                          break;\n\n                        case 9:\n                          _context.prev = 9;\n                          _context.t2 = _context[\"catch\"](1);\n                          debounceRef.current.reject(_context.t2);\n\n                        case 12:\n                          _context.prev = 12;\n                          delete debounceRef.current.promise;\n                          return _context.finish(12);\n\n                        case 15:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee, null, [[1, 9, 12, 15]]);\n                })), getDefaultWait());\n                return _context2.abrupt(\"return\", debounceRef.current.promise);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function () {\n        return _ref2.apply(this, arguments);\n      };\n    }(), [getDefaultFn, getDefaultWait]);\n  }\n  function makeRenderer(instance, column, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    return function (type, userProps) {\n      if (userProps === void 0) {\n        userProps = {};\n      }\n\n      var Comp = typeof type === 'string' ? column[type] : type;\n\n      if (typeof Comp === 'undefined') {\n        console.info(column);\n        throw new Error(renderErr);\n      }\n\n      return flexRender(Comp, _extends({}, instance, {\n        column: column\n      }, meta, {}, userProps));\n    };\n  }\n  function flexRender(Comp, props) {\n    return isReactComponent(Comp) ? React.createElement(Comp, props) : Comp;\n  }\n\n  function isReactComponent(component) {\n    return isClassComponent(component) || typeof component === 'function' || isExoticComponent(component);\n  }\n\n  function isClassComponent(component) {\n    return typeof component === 'function' && function () {\n      var proto = Object.getPrototypeOf(component);\n      return proto.prototype && proto.prototype.isReactComponent;\n    }();\n  }\n\n  function isExoticComponent(component) {\n    return typeof component === 'object' && typeof component.$$typeof === 'symbol' && ['react.memo', 'react.forward_ref'].includes(component.$$typeof.description);\n  }\n\n  function linkColumnStructure(columns, parent, depth) {\n    if (depth === void 0) {\n      depth = 0;\n    }\n\n    return columns.map(function (column) {\n      column = _extends({}, column, {\n        parent: parent,\n        depth: depth\n      });\n      assignColumnAccessor(column);\n\n      if (column.columns) {\n        column.columns = linkColumnStructure(column.columns, column, depth + 1);\n      }\n\n      return column;\n    });\n  }\n  function flattenColumns(columns) {\n    return flattenBy(columns, 'columns');\n  }\n  function assignColumnAccessor(column) {\n    // First check for string accessor\n    var id = column.id,\n        accessor = column.accessor,\n        Header = column.Header;\n\n    if (typeof accessor === 'string') {\n      id = id || accessor;\n      var accessorPath = accessor.split('.');\n\n      accessor = function accessor(row) {\n        return getBy(row, accessorPath);\n      };\n    }\n\n    if (!id && typeof Header === 'string' && Header) {\n      id = Header;\n    }\n\n    if (!id && column.columns) {\n      console.error(column);\n      throw new Error('A column ID (or unique \"Header\" value) is required!');\n    }\n\n    if (!id) {\n      console.error(column);\n      throw new Error('A column ID (or string accessor) is required!');\n    }\n\n    Object.assign(column, {\n      id: id,\n      accessor: accessor\n    });\n    return column;\n  }\n  function decorateColumn(column, userDefaultColumn) {\n    if (!userDefaultColumn) {\n      throw new Error();\n    }\n\n    Object.assign(column, _extends({\n      // Make sure there is a fallback header, just in case\n      Header: emptyRenderer,\n      Footer: emptyRenderer\n    }, defaultColumn, {}, userDefaultColumn, {}, column));\n    Object.assign(column, {\n      originalWidth: column.width\n    });\n    return column;\n  } // Build the header groups from the bottom up\n\n  function makeHeaderGroups(allColumns, defaultColumn, additionalHeaderProperties) {\n    if (additionalHeaderProperties === void 0) {\n      additionalHeaderProperties = function additionalHeaderProperties() {\n        return {};\n      };\n    }\n\n    var headerGroups = [];\n    var scanColumns = allColumns;\n    var uid = 0;\n\n    var getUID = function getUID() {\n      return uid++;\n    };\n\n    var _loop = function _loop() {\n      // The header group we are creating\n      var headerGroup = {\n        headers: []\n      }; // The parent columns we're going to scan next\n\n      var parentColumns = [];\n      var hasParents = scanColumns.some(function (d) {\n        return d.parent;\n      }); // Scan each column for parents\n\n      scanColumns.forEach(function (column) {\n        // What is the latest (last) parent column?\n        var latestParentColumn = [].concat(parentColumns).reverse()[0];\n        var newParent;\n\n        if (hasParents) {\n          // If the column has a parent, add it if necessary\n          if (column.parent) {\n            newParent = _extends({}, column.parent, {\n              originalId: column.parent.id,\n              id: column.parent.id + \"_\" + getUID(),\n              headers: [column]\n            }, additionalHeaderProperties(column));\n          } else {\n            // If other columns have parents, we'll need to add a place holder if necessary\n            var originalId = column.id + \"_placeholder\";\n            newParent = decorateColumn(_extends({\n              originalId: originalId,\n              id: column.id + \"_placeholder_\" + getUID(),\n              placeholderOf: column,\n              headers: [column]\n            }, additionalHeaderProperties(column)), defaultColumn);\n          } // If the resulting parent columns are the same, just add\n          // the column and increment the header span\n\n\n          if (latestParentColumn && latestParentColumn.originalId === newParent.originalId) {\n            latestParentColumn.headers.push(column);\n          } else {\n            parentColumns.push(newParent);\n          }\n        }\n\n        headerGroup.headers.push(column);\n      });\n      headerGroups.push(headerGroup); // Start scanning the parent columns\n\n      scanColumns = parentColumns;\n    };\n\n    while (scanColumns.length) {\n      _loop();\n    }\n\n    return headerGroups.reverse();\n  }\n  var pathObjCache = new Map();\n  function getBy(obj, path, def) {\n    if (!path) {\n      return obj;\n    }\n\n    var cacheKey = typeof path === 'function' ? path : JSON.stringify(path);\n\n    var pathObj = pathObjCache.get(cacheKey) || function () {\n      var pathObj = makePathArray(path);\n      pathObjCache.set(cacheKey, pathObj);\n      return pathObj;\n    }();\n\n    var val;\n\n    try {\n      val = pathObj.reduce(function (cursor, pathPart) {\n        return cursor[pathPart];\n      }, obj);\n    } catch (e) {// continue regardless of error\n    }\n\n    return typeof val !== 'undefined' ? val : def;\n  }\n  function getFirstDefined() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    for (var i = 0; i < args.length; i += 1) {\n      if (typeof args[i] !== 'undefined') {\n        return args[i];\n      }\n    }\n  }\n  function isFunction(a) {\n    if (typeof a === 'function') {\n      return a;\n    }\n  }\n  function flattenBy(arr, key) {\n    var flat = [];\n\n    var recurse = function recurse(arr) {\n      arr.forEach(function (d) {\n        if (!d[key]) {\n          flat.push(d);\n        } else {\n          recurse(d[key]);\n        }\n      });\n    };\n\n    recurse(arr);\n    return flat;\n  }\n  function expandRows(rows, _ref) {\n    var manualExpandedKey = _ref.manualExpandedKey,\n        expanded = _ref.expanded,\n        _ref$expandSubRows = _ref.expandSubRows,\n        expandSubRows = _ref$expandSubRows === void 0 ? true : _ref$expandSubRows;\n    var expandedRows = [];\n\n    var handleRow = function handleRow(row, addToExpandedRows) {\n      if (addToExpandedRows === void 0) {\n        addToExpandedRows = true;\n      }\n\n      row.isExpanded = row.original && row.original[manualExpandedKey] || expanded[row.id];\n      row.canExpand = row.subRows && !!row.subRows.length;\n\n      if (addToExpandedRows) {\n        expandedRows.push(row);\n      }\n\n      if (row.subRows && row.subRows.length && row.isExpanded) {\n        row.subRows.forEach(function (row) {\n          return handleRow(row, expandSubRows);\n        });\n      }\n    };\n\n    rows.forEach(function (row) {\n      return handleRow(row);\n    });\n    return expandedRows;\n  }\n  function getFilterMethod(filter, userFilterTypes, filterTypes) {\n    return isFunction(filter) || userFilterTypes[filter] || filterTypes[filter] || filterTypes.text;\n  }\n  function shouldAutoRemoveFilter(autoRemove, value, column) {\n    return autoRemove ? autoRemove(value, column) : typeof value === 'undefined';\n  }\n  function unpreparedAccessWarning() {\n    throw new Error('React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.');\n  }\n  var passiveSupported = null;\n  function passiveEventSupported() {\n    // memoize support to avoid adding multiple test events\n    if (typeof passiveSupported === 'boolean') return passiveSupported;\n    var supported = false;\n\n    try {\n      var options = {\n        get passive() {\n          supported = true;\n          return false;\n        }\n\n      };\n      window.addEventListener('test', null, options);\n      window.removeEventListener('test', null, options);\n    } catch (err) {\n      supported = false;\n    }\n\n    passiveSupported = supported;\n    return passiveSupported;\n  } //\n\n  var reOpenBracket = /\\[/g;\n  var reCloseBracket = /\\]/g;\n\n  function makePathArray(obj) {\n    return flattenDeep(obj) // remove all periods in parts\n    .map(function (d) {\n      return String(d).replace('.', '_');\n    }) // join parts using period\n    .join('.') // replace brackets with periods\n    .replace(reOpenBracket, '.').replace(reCloseBracket, '') // split it back out on periods\n    .split('.');\n  }\n\n  function flattenDeep(arr, newArr) {\n    if (newArr === void 0) {\n      newArr = [];\n    }\n\n    if (!Array.isArray(arr)) {\n      newArr.push(arr);\n    } else {\n      for (var i = 0; i < arr.length; i += 1) {\n        flattenDeep(arr[i], newArr);\n      }\n    }\n\n    return newArr;\n  }\n\n  var defaultGetTableProps = function defaultGetTableProps(props) {\n    return _extends({\n      role: 'table'\n    }, props);\n  };\n\n  var defaultGetTableBodyProps = function defaultGetTableBodyProps(props) {\n    return _extends({\n      role: 'rowgroup'\n    }, props);\n  };\n\n  var defaultGetHeaderProps = function defaultGetHeaderProps(props, _ref) {\n    var column = _ref.column;\n    return _extends({\n      key: \"header_\" + column.id,\n      colSpan: column.totalVisibleHeaderCount,\n      role: 'columnheader'\n    }, props);\n  };\n\n  var defaultGetFooterProps = function defaultGetFooterProps(props, _ref2) {\n    var column = _ref2.column;\n    return _extends({\n      key: \"footer_\" + column.id,\n      colSpan: column.totalVisibleHeaderCount\n    }, props);\n  };\n\n  var defaultGetHeaderGroupProps = function defaultGetHeaderGroupProps(props, _ref3) {\n    var index = _ref3.index;\n    return _extends({\n      key: \"headerGroup_\" + index,\n      role: 'row'\n    }, props);\n  };\n\n  var defaultGetFooterGroupProps = function defaultGetFooterGroupProps(props, _ref4) {\n    var index = _ref4.index;\n    return _extends({\n      key: \"footerGroup_\" + index\n    }, props);\n  };\n\n  var defaultGetRowProps = function defaultGetRowProps(props, _ref5) {\n    var row = _ref5.row;\n    return _extends({\n      key: \"row_\" + row.id,\n      role: 'row'\n    }, props);\n  };\n\n  var defaultGetCellProps = function defaultGetCellProps(props, _ref6) {\n    var cell = _ref6.cell;\n    return _extends({\n      key: \"cell_\" + cell.row.id + \"_\" + cell.column.id,\n      role: 'cell'\n    }, props);\n  };\n\n  function makeDefaultPluginHooks() {\n    return {\n      useOptions: [],\n      stateReducers: [],\n      useControlledState: [],\n      columns: [],\n      columnsDeps: [],\n      allColumns: [],\n      allColumnsDeps: [],\n      accessValue: [],\n      materializedColumns: [],\n      materializedColumnsDeps: [],\n      useInstanceAfterData: [],\n      visibleColumns: [],\n      visibleColumnsDeps: [],\n      headerGroups: [],\n      headerGroupsDeps: [],\n      useInstanceBeforeDimensions: [],\n      useInstance: [],\n      prepareRow: [],\n      getTableProps: [defaultGetTableProps],\n      getTableBodyProps: [defaultGetTableBodyProps],\n      getHeaderGroupProps: [defaultGetHeaderGroupProps],\n      getFooterGroupProps: [defaultGetFooterGroupProps],\n      getHeaderProps: [defaultGetHeaderProps],\n      getFooterProps: [defaultGetFooterProps],\n      getRowProps: [defaultGetRowProps],\n      getCellProps: [defaultGetCellProps],\n      useFinalInstance: []\n    };\n  }\n\n  actions.resetHiddenColumns = 'resetHiddenColumns';\n  actions.toggleHideColumn = 'toggleHideColumn';\n  actions.setHiddenColumns = 'setHiddenColumns';\n  actions.toggleHideAllColumns = 'toggleHideAllColumns';\n  var useColumnVisibility = function useColumnVisibility(hooks) {\n    hooks.getToggleHiddenProps = [defaultGetToggleHiddenProps];\n    hooks.getToggleHideAllColumnsProps = [defaultGetToggleHideAllColumnsProps];\n    hooks.stateReducers.push(reducer);\n    hooks.useInstanceBeforeDimensions.push(useInstanceBeforeDimensions);\n    hooks.headerGroupsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.hiddenColumns]);\n    });\n    hooks.useInstance.push(useInstance);\n  };\n  useColumnVisibility.pluginName = 'useColumnVisibility';\n\n  var defaultGetToggleHiddenProps = function defaultGetToggleHiddenProps(props, _ref2) {\n    var column = _ref2.column;\n    return [props, {\n      onChange: function onChange(e) {\n        column.toggleHidden(!e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: column.isVisible,\n      title: 'Toggle Column Visible'\n    }];\n  };\n\n  var defaultGetToggleHideAllColumnsProps = function defaultGetToggleHideAllColumnsProps(props, _ref3) {\n    var instance = _ref3.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleHideAllColumns(!e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: !instance.allColumnsHidden && !instance.state.hiddenColumns.length,\n      title: 'Toggle All Columns Hidden',\n      indeterminate: !instance.allColumnsHidden && instance.state.hiddenColumns.length\n    }];\n  };\n\n  function reducer(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        hiddenColumns: []\n      }, state);\n    }\n\n    if (action.type === actions.resetHiddenColumns) {\n      return _extends({}, state, {\n        hiddenColumns: instance.initialState.hiddenColumns || []\n      });\n    }\n\n    if (action.type === actions.toggleHideColumn) {\n      var should = typeof action.value !== 'undefined' ? action.value : !state.hiddenColumns.includes(action.columnId);\n      var hiddenColumns = should ? [].concat(state.hiddenColumns, [action.columnId]) : state.hiddenColumns.filter(function (d) {\n        return d !== action.columnId;\n      });\n      return _extends({}, state, {\n        hiddenColumns: hiddenColumns\n      });\n    }\n\n    if (action.type === actions.setHiddenColumns) {\n      return _extends({}, state, {\n        hiddenColumns: functionalUpdate(action.value, state.hiddenColumns)\n      });\n    }\n\n    if (action.type === actions.toggleHideAllColumns) {\n      var shouldAll = typeof action.value !== 'undefined' ? action.value : !state.hiddenColumns.length;\n      return _extends({}, state, {\n        hiddenColumns: shouldAll ? instance.allColumns.map(function (d) {\n          return d.id;\n        }) : []\n      });\n    }\n  }\n\n  function useInstanceBeforeDimensions(instance) {\n    var headers = instance.headers,\n        hiddenColumns = instance.state.hiddenColumns;\n    var isMountedRef = React.useRef(false);\n\n    if (!isMountedRef.current) ;\n\n    var handleColumn = function handleColumn(column, parentVisible) {\n      column.isVisible = parentVisible && !hiddenColumns.includes(column.id);\n      var totalVisibleHeaderCount = 0;\n\n      if (column.headers && column.headers.length) {\n        column.headers.forEach(function (subColumn) {\n          return totalVisibleHeaderCount += handleColumn(subColumn, column.isVisible);\n        });\n      } else {\n        totalVisibleHeaderCount = column.isVisible ? 1 : 0;\n      }\n\n      column.totalVisibleHeaderCount = totalVisibleHeaderCount;\n      return totalVisibleHeaderCount;\n    };\n\n    var totalVisibleHeaderCount = 0;\n    headers.forEach(function (subHeader) {\n      return totalVisibleHeaderCount += handleColumn(subHeader, true);\n    });\n  }\n\n  function useInstance(instance) {\n    var columns = instance.columns,\n        flatHeaders = instance.flatHeaders,\n        dispatch = instance.dispatch,\n        allColumns = instance.allColumns,\n        getHooks = instance.getHooks,\n        hiddenColumns = instance.state.hiddenColumns,\n        _instance$autoResetHi = instance.autoResetHiddenColumns,\n        autoResetHiddenColumns = _instance$autoResetHi === void 0 ? true : _instance$autoResetHi;\n    var getInstance = useGetLatest(instance);\n    var allColumnsHidden = allColumns.length === hiddenColumns.length;\n    var toggleHideColumn = React.useCallback(function (columnId, value) {\n      return dispatch({\n        type: actions.toggleHideColumn,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var setHiddenColumns = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.setHiddenColumns,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleHideAllColumns = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleHideAllColumns,\n        value: value\n      });\n    }, [dispatch]);\n    var getToggleHideAllColumnsProps = makePropGetter(getHooks().getToggleHideAllColumnsProps, {\n      instance: getInstance()\n    });\n    flatHeaders.forEach(function (column) {\n      column.toggleHidden = function (value) {\n        dispatch({\n          type: actions.toggleHideColumn,\n          columnId: column.id,\n          value: value\n        });\n      };\n\n      column.getToggleHiddenProps = makePropGetter(getHooks().getToggleHiddenProps, {\n        instance: getInstance(),\n        column: column\n      });\n    });\n    var getAutoResetHiddenColumns = useGetLatest(autoResetHiddenColumns);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetHiddenColumns()) {\n        dispatch({\n          type: actions.resetHiddenColumns\n        });\n      }\n    }, [dispatch, columns]);\n    Object.assign(instance, {\n      allColumnsHidden: allColumnsHidden,\n      toggleHideColumn: toggleHideColumn,\n      setHiddenColumns: setHiddenColumns,\n      toggleHideAllColumns: toggleHideAllColumns,\n      getToggleHideAllColumnsProps: getToggleHideAllColumnsProps\n    });\n  }\n\n  var defaultInitialState = {};\n  var defaultColumnInstance = {};\n\n  var defaultReducer = function defaultReducer(state, action, prevState) {\n    return state;\n  };\n\n  var defaultGetSubRows = function defaultGetSubRows(row, index) {\n    return row.subRows || [];\n  };\n\n  var defaultGetRowId = function defaultGetRowId(row, index, parent) {\n    return \"\" + (parent ? [parent.id, index].join('.') : index);\n  };\n\n  var defaultUseControlledState = function defaultUseControlledState(d) {\n    return d;\n  };\n\n  function applyDefaults(props) {\n    var _props$initialState = props.initialState,\n        initialState = _props$initialState === void 0 ? defaultInitialState : _props$initialState,\n        _props$defaultColumn = props.defaultColumn,\n        defaultColumn = _props$defaultColumn === void 0 ? defaultColumnInstance : _props$defaultColumn,\n        _props$getSubRows = props.getSubRows,\n        getSubRows = _props$getSubRows === void 0 ? defaultGetSubRows : _props$getSubRows,\n        _props$getRowId = props.getRowId,\n        getRowId = _props$getRowId === void 0 ? defaultGetRowId : _props$getRowId,\n        _props$stateReducer = props.stateReducer,\n        stateReducer = _props$stateReducer === void 0 ? defaultReducer : _props$stateReducer,\n        _props$useControlledS = props.useControlledState,\n        useControlledState = _props$useControlledS === void 0 ? defaultUseControlledState : _props$useControlledS,\n        rest = _objectWithoutPropertiesLoose(props, [\"initialState\", \"defaultColumn\", \"getSubRows\", \"getRowId\", \"stateReducer\", \"useControlledState\"]);\n\n    return _extends({}, rest, {\n      initialState: initialState,\n      defaultColumn: defaultColumn,\n      getSubRows: getSubRows,\n      getRowId: getRowId,\n      stateReducer: stateReducer,\n      useControlledState: useControlledState\n    });\n  }\n\n  var useTable = function useTable(props) {\n    for (var _len = arguments.length, plugins = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      plugins[_key - 1] = arguments[_key];\n    }\n\n    // Apply default props\n    props = applyDefaults(props); // Add core plugins\n\n    plugins = [useColumnVisibility].concat(plugins); // Create the table instance\n\n    var instanceRef = React.useRef({}); // Create a getter for the instance (helps avoid a lot of potential memory leaks)\n\n    var getInstance = useGetLatest(instanceRef.current); // Assign the props, plugins and hooks to the instance\n\n    Object.assign(getInstance(), _extends({}, props, {\n      plugins: plugins,\n      hooks: makeDefaultPluginHooks()\n    })); // Allow plugins to register hooks as early as possible\n\n    plugins.filter(Boolean).forEach(function (plugin) {\n      plugin(getInstance().hooks);\n    }); // Consume all hooks and make a getter for them\n\n    var getHooks = useGetLatest(getInstance().hooks);\n    getInstance().getHooks = getHooks;\n    delete getInstance().hooks; // Allow useOptions hooks to modify the options coming into the table\n\n    Object.assign(getInstance(), reduceHooks(getHooks().useOptions, applyDefaults(props)));\n\n    var _getInstance = getInstance(),\n        data = _getInstance.data,\n        userColumns = _getInstance.columns,\n        initialState = _getInstance.initialState,\n        defaultColumn = _getInstance.defaultColumn,\n        getSubRows = _getInstance.getSubRows,\n        getRowId = _getInstance.getRowId,\n        stateReducer = _getInstance.stateReducer,\n        useControlledState = _getInstance.useControlledState; // Setup user reducer ref\n\n\n    var getStateReducer = useGetLatest(stateReducer); // Build the reducer\n\n    var reducer = React.useCallback(function (state, action) {\n      // Detect invalid actions\n      if (!action.type) {\n        console.info({\n          action: action\n        });\n        throw new Error('Unknown Action 👆');\n      } // Reduce the state from all plugin reducers\n\n\n      return [].concat(getHooks().stateReducers, Array.isArray(getStateReducer()) ? getStateReducer() : [getStateReducer()]).reduce(function (s, handler) {\n        return handler(s, action, state, getInstance()) || s;\n      }, state);\n    }, [getHooks, getStateReducer, getInstance]); // Start the reducer\n\n    var _React$useReducer = React.useReducer(reducer, undefined, function () {\n      return reducer(initialState, {\n        type: actions.init\n      });\n    }),\n        reducerState = _React$useReducer[0],\n        dispatch = _React$useReducer[1]; // Allow the user to control the final state with hooks\n\n\n    var state = reduceHooks([].concat(getHooks().useControlledState, [useControlledState]), reducerState, {\n      instance: getInstance()\n    });\n    Object.assign(getInstance(), {\n      state: state,\n      dispatch: dispatch\n    }); // Decorate All the columns\n\n    var columns = React.useMemo(function () {\n      return linkColumnStructure(reduceHooks(getHooks().columns, userColumns, {\n        instance: getInstance()\n      }));\n    }, [getHooks, getInstance, userColumns].concat(reduceHooks(getHooks().columnsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().columns = columns; // Get the flat list of all columns and allow hooks to decorate\n    // those columns (and trigger this memoization via deps)\n\n    var allColumns = React.useMemo(function () {\n      return reduceHooks(getHooks().allColumns, flattenColumns(columns), {\n        instance: getInstance()\n      }).map(assignColumnAccessor);\n    }, [columns, getHooks, getInstance].concat(reduceHooks(getHooks().allColumnsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().allColumns = allColumns; // Access the row model using initial columns\n\n    var _React$useMemo = React.useMemo(function () {\n      var rows = [];\n      var flatRows = [];\n      var rowsById = {};\n      var allColumnsQueue = [].concat(allColumns);\n\n      while (allColumnsQueue.length) {\n        var column = allColumnsQueue.shift();\n        accessRowsForColumn({\n          data: data,\n          rows: rows,\n          flatRows: flatRows,\n          rowsById: rowsById,\n          column: column,\n          getRowId: getRowId,\n          getSubRows: getSubRows,\n          accessValueHooks: getHooks().accessValue,\n          getInstance: getInstance\n        });\n      }\n\n      return [rows, flatRows, rowsById];\n    }, [allColumns, data, getRowId, getSubRows, getHooks, getInstance]),\n        rows = _React$useMemo[0],\n        flatRows = _React$useMemo[1],\n        rowsById = _React$useMemo[2];\n\n    Object.assign(getInstance(), {\n      rows: rows,\n      initialRows: [].concat(rows),\n      flatRows: flatRows,\n      rowsById: rowsById // materializedColumns,\n\n    });\n    loopHooks(getHooks().useInstanceAfterData, getInstance()); // Get the flat list of all columns AFTER the rows\n    // have been access, and allow hooks to decorate\n    // those columns (and trigger this memoization via deps)\n\n    var visibleColumns = React.useMemo(function () {\n      return reduceHooks(getHooks().visibleColumns, allColumns, {\n        instance: getInstance()\n      }).map(function (d) {\n        return decorateColumn(d, defaultColumn);\n      });\n    }, [getHooks, allColumns, getInstance, defaultColumn].concat(reduceHooks(getHooks().visibleColumnsDeps, [], {\n      instance: getInstance()\n    }))); // Combine new visible columns with all columns\n\n    allColumns = React.useMemo(function () {\n      var columns = [].concat(visibleColumns);\n      allColumns.forEach(function (column) {\n        if (!columns.find(function (d) {\n          return d.id === column.id;\n        })) {\n          columns.push(column);\n        }\n      });\n      return columns;\n    }, [allColumns, visibleColumns]);\n    getInstance().allColumns = allColumns;\n\n    {\n      var duplicateColumns = allColumns.filter(function (column, i) {\n        return allColumns.findIndex(function (d) {\n          return d.id === column.id;\n        }) !== i;\n      });\n\n      if (duplicateColumns.length) {\n        console.info(allColumns);\n        throw new Error(\"Duplicate columns were found with ids: \\\"\" + duplicateColumns.map(function (d) {\n          return d.id;\n        }).join(', ') + \"\\\" in the columns array above\");\n      }\n    } // Make the headerGroups\n\n\n    var headerGroups = React.useMemo(function () {\n      return reduceHooks(getHooks().headerGroups, makeHeaderGroups(visibleColumns, defaultColumn), getInstance());\n    }, [getHooks, visibleColumns, defaultColumn, getInstance].concat(reduceHooks(getHooks().headerGroupsDeps, [], {\n      instance: getInstance()\n    })));\n    getInstance().headerGroups = headerGroups; // Get the first level of headers\n\n    var headers = React.useMemo(function () {\n      return headerGroups.length ? headerGroups[0].headers : [];\n    }, [headerGroups]);\n    getInstance().headers = headers; // Provide a flat header list for utilities\n\n    getInstance().flatHeaders = headerGroups.reduce(function (all, headerGroup) {\n      return [].concat(all, headerGroup.headers);\n    }, []);\n    loopHooks(getHooks().useInstanceBeforeDimensions, getInstance()); // Filter columns down to visible ones\n\n    var visibleColumnsDep = visibleColumns.filter(function (d) {\n      return d.isVisible;\n    }).map(function (d) {\n      return d.id;\n    }).sort().join('_');\n    visibleColumns = React.useMemo(function () {\n      return visibleColumns.filter(function (d) {\n        return d.isVisible;\n      });\n    }, // eslint-disable-next-line react-hooks/exhaustive-deps\n    [visibleColumns, visibleColumnsDep]);\n    getInstance().visibleColumns = visibleColumns; // Header Visibility is needed by this point\n\n    var _calculateHeaderWidth = calculateHeaderWidths(headers),\n        totalColumnsMinWidth = _calculateHeaderWidth[0],\n        totalColumnsWidth = _calculateHeaderWidth[1],\n        totalColumnsMaxWidth = _calculateHeaderWidth[2];\n\n    getInstance().totalColumnsMinWidth = totalColumnsMinWidth;\n    getInstance().totalColumnsWidth = totalColumnsWidth;\n    getInstance().totalColumnsMaxWidth = totalColumnsMaxWidth;\n    loopHooks(getHooks().useInstance, getInstance()) // Each materialized header needs to be assigned a render function and other\n    // prop getter properties here.\n    ;\n    [].concat(getInstance().flatHeaders, getInstance().allColumns).forEach(function (column) {\n      // Give columns/headers rendering power\n      column.render = makeRenderer(getInstance(), column); // Give columns/headers a default getHeaderProps\n\n      column.getHeaderProps = makePropGetter(getHooks().getHeaderProps, {\n        instance: getInstance(),\n        column: column\n      }); // Give columns/headers a default getFooterProps\n\n      column.getFooterProps = makePropGetter(getHooks().getFooterProps, {\n        instance: getInstance(),\n        column: column\n      });\n    });\n    getInstance().headerGroups = React.useMemo(function () {\n      return headerGroups.filter(function (headerGroup, i) {\n        // Filter out any headers and headerGroups that don't have visible columns\n        headerGroup.headers = headerGroup.headers.filter(function (column) {\n          var recurse = function recurse(headers) {\n            return headers.filter(function (column) {\n              if (column.headers) {\n                return recurse(column.headers);\n              }\n\n              return column.isVisible;\n            }).length;\n          };\n\n          if (column.headers) {\n            return recurse(column.headers);\n          }\n\n          return column.isVisible;\n        }); // Give headerGroups getRowProps\n\n        if (headerGroup.headers.length) {\n          headerGroup.getHeaderGroupProps = makePropGetter(getHooks().getHeaderGroupProps, {\n            instance: getInstance(),\n            headerGroup: headerGroup,\n            index: i\n          });\n          headerGroup.getFooterGroupProps = makePropGetter(getHooks().getFooterGroupProps, {\n            instance: getInstance(),\n            headerGroup: headerGroup,\n            index: i\n          });\n          return true;\n        }\n\n        return false;\n      });\n    }, [headerGroups, getInstance, getHooks]);\n    getInstance().footerGroups = [].concat(getInstance().headerGroups).reverse(); // The prepareRow function is absolutely necessary and MUST be called on\n    // any rows the user wishes to be displayed.\n\n    getInstance().prepareRow = React.useCallback(function (row) {\n      row.getRowProps = makePropGetter(getHooks().getRowProps, {\n        instance: getInstance(),\n        row: row\n      }); // Build the visible cells for each row\n\n      row.allCells = allColumns.map(function (column) {\n        var value = row.values[column.id];\n        var cell = {\n          column: column,\n          row: row,\n          value: value\n        }; // Give each cell a getCellProps base\n\n        cell.getCellProps = makePropGetter(getHooks().getCellProps, {\n          instance: getInstance(),\n          cell: cell\n        }); // Give each cell a renderer function (supports multiple renderers)\n\n        cell.render = makeRenderer(getInstance(), column, {\n          row: row,\n          cell: cell,\n          value: value\n        });\n        return cell;\n      });\n      row.cells = visibleColumns.map(function (column) {\n        return row.allCells.find(function (cell) {\n          return cell.column.id === column.id;\n        });\n      }); // need to apply any row specific hooks (useExpanded requires this)\n\n      loopHooks(getHooks().prepareRow, row, {\n        instance: getInstance()\n      });\n    }, [getHooks, getInstance, allColumns, visibleColumns]);\n    getInstance().getTableProps = makePropGetter(getHooks().getTableProps, {\n      instance: getInstance()\n    });\n    getInstance().getTableBodyProps = makePropGetter(getHooks().getTableBodyProps, {\n      instance: getInstance()\n    });\n    loopHooks(getHooks().useFinalInstance, getInstance());\n    return getInstance();\n  };\n\n  function calculateHeaderWidths(headers, left) {\n    if (left === void 0) {\n      left = 0;\n    }\n\n    var sumTotalMinWidth = 0;\n    var sumTotalWidth = 0;\n    var sumTotalMaxWidth = 0;\n    var sumTotalFlexWidth = 0;\n    headers.forEach(function (header) {\n      var subHeaders = header.headers;\n      header.totalLeft = left;\n\n      if (subHeaders && subHeaders.length) {\n        var _calculateHeaderWidth2 = calculateHeaderWidths(subHeaders, left),\n            totalMinWidth = _calculateHeaderWidth2[0],\n            totalWidth = _calculateHeaderWidth2[1],\n            totalMaxWidth = _calculateHeaderWidth2[2],\n            totalFlexWidth = _calculateHeaderWidth2[3];\n\n        header.totalMinWidth = totalMinWidth;\n        header.totalWidth = totalWidth;\n        header.totalMaxWidth = totalMaxWidth;\n        header.totalFlexWidth = totalFlexWidth;\n      } else {\n        header.totalMinWidth = header.minWidth;\n        header.totalWidth = Math.min(Math.max(header.minWidth, header.width), header.maxWidth);\n        header.totalMaxWidth = header.maxWidth;\n        header.totalFlexWidth = header.canResize ? header.totalWidth : 0;\n      }\n\n      if (header.isVisible) {\n        left += header.totalWidth;\n        sumTotalMinWidth += header.totalMinWidth;\n        sumTotalWidth += header.totalWidth;\n        sumTotalMaxWidth += header.totalMaxWidth;\n        sumTotalFlexWidth += header.totalFlexWidth;\n      }\n    });\n    return [sumTotalMinWidth, sumTotalWidth, sumTotalMaxWidth, sumTotalFlexWidth];\n  }\n\n  function accessRowsForColumn(_ref) {\n    var data = _ref.data,\n        rows = _ref.rows,\n        flatRows = _ref.flatRows,\n        rowsById = _ref.rowsById,\n        column = _ref.column,\n        getRowId = _ref.getRowId,\n        getSubRows = _ref.getSubRows,\n        accessValueHooks = _ref.accessValueHooks,\n        getInstance = _ref.getInstance;\n\n    // Access the row's data column-by-column\n    // We do it this way so we can incrementally add materialized\n    // columns after the first pass and avoid excessive looping\n    var accessRow = function accessRow(originalRow, rowIndex, depth, parent, parentRows) {\n      if (depth === void 0) {\n        depth = 0;\n      }\n\n      // Keep the original reference around\n      var original = originalRow;\n      var id = getRowId(originalRow, rowIndex, parent);\n      var row = rowsById[id]; // If the row hasn't been created, let's make it\n\n      if (!row) {\n        row = {\n          id: id,\n          original: original,\n          index: rowIndex,\n          depth: depth,\n          cells: [{}] // This is a dummy cell\n\n        }; // Override common array functions (and the dummy cell's getCellProps function)\n        // to show an error if it is accessed without calling prepareRow\n\n        row.cells.map = unpreparedAccessWarning;\n        row.cells.filter = unpreparedAccessWarning;\n        row.cells.forEach = unpreparedAccessWarning;\n        row.cells[0].getCellProps = unpreparedAccessWarning; // Create the cells and values\n\n        row.values = {}; // Push this row into the parentRows array\n\n        parentRows.push(row); // Keep track of every row in a flat array\n\n        flatRows.push(row); // Also keep track of every row by its ID\n\n        rowsById[id] = row; // Get the original subrows\n\n        row.originalSubRows = getSubRows(originalRow, rowIndex); // Then recursively access them\n\n        if (row.originalSubRows) {\n          var subRows = [];\n          row.originalSubRows.forEach(function (d, i) {\n            return accessRow(d, i, depth + 1, row, subRows);\n          }); // Keep the new subRows array on the row\n\n          row.subRows = subRows;\n        }\n      } else if (row.subRows) {\n        // If the row exists, then it's already been accessed\n        // Keep recursing, but don't worry about passing the\n        // accumlator array (those rows already exist)\n        row.originalSubRows.forEach(function (d, i) {\n          return accessRow(d, i, depth + 1, row);\n        });\n      } // If the column has an accessor, use it to get a value\n\n\n      if (column.accessor) {\n        row.values[column.id] = column.accessor(originalRow, rowIndex, row, parentRows, data);\n      } // Allow plugins to manipulate the column value\n\n\n      row.values[column.id] = reduceHooks(accessValueHooks, row.values[column.id], {\n        row: row,\n        column: column,\n        instance: getInstance()\n      }, true);\n    };\n\n    data.forEach(function (originalRow, rowIndex) {\n      return accessRow(originalRow, rowIndex, 0, undefined, rows);\n    });\n  }\n\n  actions.resetExpanded = 'resetExpanded';\n  actions.toggleRowExpanded = 'toggleRowExpanded';\n  actions.toggleAllRowsExpanded = 'toggleAllRowsExpanded';\n  var useExpanded = function useExpanded(hooks) {\n    hooks.getToggleAllRowsExpandedProps = [defaultGetToggleAllRowsExpandedProps];\n    hooks.getToggleRowExpandedProps = [defaultGetToggleRowExpandedProps];\n    hooks.stateReducers.push(reducer$1);\n    hooks.useInstance.push(useInstance$1);\n    hooks.prepareRow.push(prepareRow);\n  };\n  useExpanded.pluginName = 'useExpanded';\n\n  var defaultGetToggleAllRowsExpandedProps = function defaultGetToggleAllRowsExpandedProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      onClick: function onClick(e) {\n        instance.toggleAllRowsExpanded();\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      title: 'Toggle All Rows Expanded'\n    }];\n  };\n\n  var defaultGetToggleRowExpandedProps = function defaultGetToggleRowExpandedProps(props, _ref2) {\n    var row = _ref2.row;\n    return [props, {\n      onClick: function onClick() {\n        row.toggleRowExpanded();\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      title: 'Toggle Row Expanded'\n    }];\n  }; // Reducer\n\n\n  function reducer$1(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        expanded: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetExpanded) {\n      return _extends({}, state, {\n        expanded: instance.initialState.expanded || {}\n      });\n    }\n\n    if (action.type === actions.toggleAllRowsExpanded) {\n      var value = action.value;\n      var isAllRowsExpanded = instance.isAllRowsExpanded,\n          rowsById = instance.rowsById;\n      var expandAll = typeof value !== 'undefined' ? value : !isAllRowsExpanded;\n\n      if (expandAll) {\n        var expanded = {};\n        Object.keys(rowsById).forEach(function (rowId) {\n          expanded[rowId] = true;\n        });\n        return _extends({}, state, {\n          expanded: expanded\n        });\n      }\n\n      return _extends({}, state, {\n        expanded: {}\n      });\n    }\n\n    if (action.type === actions.toggleRowExpanded) {\n      var id = action.id,\n          setExpanded = action.value;\n      var exists = state.expanded[id];\n      var shouldExist = typeof setExpanded !== 'undefined' ? setExpanded : !exists;\n\n      if (!exists && shouldExist) {\n        var _extends2;\n\n        return _extends({}, state, {\n          expanded: _extends({}, state.expanded, (_extends2 = {}, _extends2[id] = true, _extends2))\n        });\n      } else if (exists && !shouldExist) {\n        var _state$expanded = state.expanded,\n            _ = _state$expanded[id],\n            rest = _objectWithoutPropertiesLoose(_state$expanded, [id].map(_toPropertyKey));\n\n        return _extends({}, state, {\n          expanded: rest\n        });\n      } else {\n        return state;\n      }\n    }\n  }\n\n  function useInstance$1(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        rowsById = instance.rowsById,\n        _instance$manualExpan = instance.manualExpandedKey,\n        manualExpandedKey = _instance$manualExpan === void 0 ? 'expanded' : _instance$manualExpan,\n        _instance$paginateExp = instance.paginateExpandedRows,\n        paginateExpandedRows = _instance$paginateExp === void 0 ? true : _instance$paginateExp,\n        _instance$expandSubRo = instance.expandSubRows,\n        expandSubRows = _instance$expandSubRo === void 0 ? true : _instance$expandSubRo,\n        _instance$autoResetEx = instance.autoResetExpanded,\n        autoResetExpanded = _instance$autoResetEx === void 0 ? true : _instance$autoResetEx,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        expanded = instance.state.expanded,\n        dispatch = instance.dispatch;\n    ensurePluginOrder(plugins, ['useSortBy', 'useGroupBy', 'usePivotColumns', 'useGlobalFilter'], 'useExpanded');\n    var getAutoResetExpanded = useGetLatest(autoResetExpanded);\n    var isAllRowsExpanded = Boolean(Object.keys(rowsById).length && Object.keys(expanded).length);\n\n    if (isAllRowsExpanded) {\n      if (Object.keys(rowsById).some(function (id) {\n        return !expanded[id];\n      })) {\n        isAllRowsExpanded = false;\n      }\n    } // Bypass any effects from firing when this changes\n\n\n    useMountedLayoutEffect(function () {\n      if (getAutoResetExpanded()) {\n        dispatch({\n          type: actions.resetExpanded\n        });\n      }\n    }, [dispatch, data]);\n    var toggleRowExpanded = React.useCallback(function (id, value) {\n      dispatch({\n        type: actions.toggleRowExpanded,\n        id: id,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleAllRowsExpanded = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllRowsExpanded,\n        value: value\n      });\n    }, [dispatch]);\n    var expandedRows = React.useMemo(function () {\n      if (paginateExpandedRows) {\n        return expandRows(rows, {\n          manualExpandedKey: manualExpandedKey,\n          expanded: expanded,\n          expandSubRows: expandSubRows\n        });\n      }\n\n      return rows;\n    }, [paginateExpandedRows, rows, manualExpandedKey, expanded, expandSubRows]);\n    var expandedDepth = React.useMemo(function () {\n      return findExpandedDepth(expanded);\n    }, [expanded]);\n    var getInstance = useGetLatest(instance);\n    var getToggleAllRowsExpandedProps = makePropGetter(getHooks().getToggleAllRowsExpandedProps, {\n      instance: getInstance()\n    });\n    Object.assign(instance, {\n      preExpandedRows: rows,\n      expandedRows: expandedRows,\n      rows: expandedRows,\n      expandedDepth: expandedDepth,\n      isAllRowsExpanded: isAllRowsExpanded,\n      toggleRowExpanded: toggleRowExpanded,\n      toggleAllRowsExpanded: toggleAllRowsExpanded,\n      getToggleAllRowsExpandedProps: getToggleAllRowsExpandedProps\n    });\n  }\n\n  function prepareRow(row, _ref3) {\n    var getHooks = _ref3.instance.getHooks,\n        instance = _ref3.instance;\n\n    row.toggleRowExpanded = function (set) {\n      return instance.toggleRowExpanded(row.id, set);\n    };\n\n    row.getToggleRowExpandedProps = makePropGetter(getHooks().getToggleRowExpandedProps, {\n      instance: instance,\n      row: row\n    });\n  }\n\n  function findExpandedDepth(expanded) {\n    var maxDepth = 0;\n    Object.keys(expanded).forEach(function (id) {\n      var splitId = id.split('.');\n      maxDepth = Math.max(maxDepth, splitId.length);\n    });\n    return maxDepth;\n  }\n\n  var text = function text(rows, ids, filterValue) {\n    rows = rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return String(rowValue).toLowerCase().includes(String(filterValue).toLowerCase());\n      });\n    });\n    return rows;\n  };\n\n  text.autoRemove = function (val) {\n    return !val;\n  };\n\n  var exactText = function exactText(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue !== undefined ? String(rowValue).toLowerCase() === String(filterValue).toLowerCase() : true;\n      });\n    });\n  };\n\n  exactText.autoRemove = function (val) {\n    return !val;\n  };\n\n  var exactTextCase = function exactTextCase(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue !== undefined ? String(rowValue) === String(filterValue) : true;\n      });\n    });\n  };\n\n  exactTextCase.autoRemove = function (val) {\n    return !val;\n  };\n\n  var includes = function includes(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue.includes(filterValue);\n      });\n    });\n  };\n\n  includes.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesAll = function includesAll(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue && rowValue.length && filterValue.every(function (val) {\n          return rowValue.includes(val);\n        });\n      });\n    });\n  };\n\n  includesAll.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesSome = function includesSome(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue && rowValue.length && filterValue.some(function (val) {\n          return rowValue.includes(val);\n        });\n      });\n    });\n  };\n\n  includesSome.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var includesValue = function includesValue(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return filterValue.includes(rowValue);\n      });\n    });\n  };\n\n  includesValue.autoRemove = function (val) {\n    return !val || !val.length;\n  };\n\n  var exact = function exact(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue === filterValue;\n      });\n    });\n  };\n\n  exact.autoRemove = function (val) {\n    return typeof val === 'undefined';\n  };\n\n  var equals = function equals(rows, ids, filterValue) {\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id]; // eslint-disable-next-line eqeqeq\n\n        return rowValue == filterValue;\n      });\n    });\n  };\n\n  equals.autoRemove = function (val) {\n    return val == null;\n  };\n\n  var between = function between(rows, ids, filterValue) {\n    var _ref = filterValue || [],\n        min = _ref[0],\n        max = _ref[1];\n\n    min = typeof min === 'number' ? min : -Infinity;\n    max = typeof max === 'number' ? max : Infinity;\n\n    if (min > max) {\n      var temp = min;\n      min = max;\n      max = temp;\n    }\n\n    return rows.filter(function (row) {\n      return ids.some(function (id) {\n        var rowValue = row.values[id];\n        return rowValue >= min && rowValue <= max;\n      });\n    });\n  };\n\n  between.autoRemove = function (val) {\n    return !val || typeof val[0] !== 'number' && typeof val[1] !== 'number';\n  };\n\n  var filterTypes = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    text: text,\n    exactText: exactText,\n    exactTextCase: exactTextCase,\n    includes: includes,\n    includesAll: includesAll,\n    includesSome: includesSome,\n    includesValue: includesValue,\n    exact: exact,\n    equals: equals,\n    between: between\n  });\n\n  actions.resetFilters = 'resetFilters';\n  actions.setFilter = 'setFilter';\n  actions.setAllFilters = 'setAllFilters';\n  var useFilters = function useFilters(hooks) {\n    hooks.stateReducers.push(reducer$2);\n    hooks.useInstance.push(useInstance$2);\n  };\n  useFilters.pluginName = 'useFilters';\n\n  function reducer$2(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        filters: []\n      }, state);\n    }\n\n    if (action.type === actions.resetFilters) {\n      return _extends({}, state, {\n        filters: instance.initialState.filters || []\n      });\n    }\n\n    if (action.type === actions.setFilter) {\n      var columnId = action.columnId,\n          filterValue = action.filterValue;\n      var allColumns = instance.allColumns,\n          userFilterTypes = instance.filterTypes;\n      var column = allColumns.find(function (d) {\n        return d.id === columnId;\n      });\n\n      if (!column) {\n        throw new Error(\"React-Table: Could not find a column with id: \" + columnId);\n      }\n\n      var filterMethod = getFilterMethod(column.filter, userFilterTypes || {}, filterTypes);\n      var previousfilter = state.filters.find(function (d) {\n        return d.id === columnId;\n      });\n      var newFilter = functionalUpdate(filterValue, previousfilter && previousfilter.value); //\n\n      if (shouldAutoRemoveFilter(filterMethod.autoRemove, newFilter, column)) {\n        return _extends({}, state, {\n          filters: state.filters.filter(function (d) {\n            return d.id !== columnId;\n          })\n        });\n      }\n\n      if (previousfilter) {\n        return _extends({}, state, {\n          filters: state.filters.map(function (d) {\n            if (d.id === columnId) {\n              return {\n                id: columnId,\n                value: newFilter\n              };\n            }\n\n            return d;\n          })\n        });\n      }\n\n      return _extends({}, state, {\n        filters: [].concat(state.filters, [{\n          id: columnId,\n          value: newFilter\n        }])\n      });\n    }\n\n    if (action.type === actions.setAllFilters) {\n      var filters = action.filters;\n      var _allColumns = instance.allColumns,\n          _userFilterTypes = instance.filterTypes;\n      return _extends({}, state, {\n        // Filter out undefined values\n        filters: functionalUpdate(filters, state.filters).filter(function (filter) {\n          var column = _allColumns.find(function (d) {\n            return d.id === filter.id;\n          });\n\n          var filterMethod = getFilterMethod(column.filter, _userFilterTypes || {}, filterTypes);\n\n          if (shouldAutoRemoveFilter(filterMethod.autoRemove, filter.value, column)) {\n            return false;\n          }\n\n          return true;\n        })\n      });\n    }\n  }\n\n  function useInstance$2(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        userFilterTypes = instance.filterTypes,\n        manualFilters = instance.manualFilters,\n        _instance$defaultCanF = instance.defaultCanFilter,\n        defaultCanFilter = _instance$defaultCanF === void 0 ? false : _instance$defaultCanF,\n        disableFilters = instance.disableFilters,\n        filters = instance.state.filters,\n        dispatch = instance.dispatch,\n        _instance$autoResetFi = instance.autoResetFilters,\n        autoResetFilters = _instance$autoResetFi === void 0 ? true : _instance$autoResetFi;\n    var setFilter = React.useCallback(function (columnId, filterValue) {\n      dispatch({\n        type: actions.setFilter,\n        columnId: columnId,\n        filterValue: filterValue\n      });\n    }, [dispatch]);\n    var setAllFilters = React.useCallback(function (filters) {\n      dispatch({\n        type: actions.setAllFilters,\n        filters: filters\n      });\n    }, [dispatch]);\n    allColumns.forEach(function (column) {\n      var id = column.id,\n          accessor = column.accessor,\n          columnDefaultCanFilter = column.defaultCanFilter,\n          columnDisableFilters = column.disableFilters; // Determine if a column is filterable\n\n      column.canFilter = accessor ? getFirstDefined(columnDisableFilters === true ? false : undefined, disableFilters === true ? false : undefined, true) : getFirstDefined(columnDefaultCanFilter, defaultCanFilter, false); // Provide the column a way of updating the filter value\n\n      column.setFilter = function (val) {\n        return setFilter(column.id, val);\n      }; // Provide the current filter value to the column for\n      // convenience\n\n\n      var found = filters.find(function (d) {\n        return d.id === id;\n      });\n      column.filterValue = found && found.value;\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualFilters || !filters.length) {\n        return [rows, flatRows, rowsById];\n      }\n\n      var filteredFlatRows = [];\n      var filteredRowsById = {}; // Filters top level and nested rows\n\n      var filterRows = function filterRows(rows, depth) {\n        if (depth === void 0) {\n          depth = 0;\n        }\n\n        var filteredRows = rows;\n        filteredRows = filters.reduce(function (filteredSoFar, _ref) {\n          var columnId = _ref.id,\n              filterValue = _ref.value;\n          // Find the filters column\n          var column = allColumns.find(function (d) {\n            return d.id === columnId;\n          });\n\n          if (!column) {\n            return filteredSoFar;\n          }\n\n          if (depth === 0) {\n            column.preFilteredRows = filteredSoFar;\n          }\n\n          var filterMethod = getFilterMethod(column.filter, userFilterTypes || {}, filterTypes);\n\n          if (!filterMethod) {\n            console.warn(\"Could not find a valid 'column.filter' for column with the ID: \" + column.id + \".\");\n            return filteredSoFar;\n          } // Pass the rows, id, filterValue and column to the filterMethod\n          // to get the filtered rows back\n\n\n          column.filteredRows = filterMethod(filteredSoFar, [columnId], filterValue);\n          return column.filteredRows;\n        }, rows); // Apply the filter to any subRows\n        // We technically could do this recursively in the above loop,\n        // but that would severely hinder the API for the user, since they\n        // would be required to do that recursion in some scenarios\n\n        filteredRows.forEach(function (row) {\n          filteredFlatRows.push(row);\n          filteredRowsById[row.id] = row;\n\n          if (!row.subRows) {\n            return;\n          }\n\n          row.subRows = row.subRows && row.subRows.length > 0 ? filterRows(row.subRows, depth + 1) : row.subRows;\n        });\n        return filteredRows;\n      };\n\n      return [filterRows(rows), filteredFlatRows, filteredRowsById];\n    }, [manualFilters, filters, rows, flatRows, rowsById, allColumns, userFilterTypes]),\n        filteredRows = _React$useMemo[0],\n        filteredFlatRows = _React$useMemo[1],\n        filteredRowsById = _React$useMemo[2];\n\n    React.useMemo(function () {\n      // Now that each filtered column has it's partially filtered rows,\n      // lets assign the final filtered rows to all of the other columns\n      var nonFilteredColumns = allColumns.filter(function (column) {\n        return !filters.find(function (d) {\n          return d.id === column.id;\n        });\n      }); // This essentially enables faceted filter options to be built easily\n      // using every column's preFilteredRows value\n\n      nonFilteredColumns.forEach(function (column) {\n        column.preFilteredRows = filteredRows;\n        column.filteredRows = filteredRows;\n      });\n    }, [filteredRows, filters, allColumns]);\n    var getAutoResetFilters = useGetLatest(autoResetFilters);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetFilters()) {\n        dispatch({\n          type: actions.resetFilters\n        });\n      }\n    }, [dispatch, manualFilters ? null : data]);\n    Object.assign(instance, {\n      preFilteredRows: rows,\n      preFilteredFlatRows: flatRows,\n      preFilteredRowsById: rowsById,\n      filteredRows: filteredRows,\n      filteredFlatRows: filteredFlatRows,\n      filteredRowsById: filteredRowsById,\n      rows: filteredRows,\n      flatRows: filteredFlatRows,\n      rowsById: filteredRowsById,\n      setFilter: setFilter,\n      setAllFilters: setAllFilters\n    });\n  }\n\n  actions.resetGlobalFilter = 'resetGlobalFilter';\n  actions.setGlobalFilter = 'setGlobalFilter';\n  var useGlobalFilter = function useGlobalFilter(hooks) {\n    hooks.stateReducers.push(reducer$3);\n    hooks.useInstance.push(useInstance$3);\n  };\n  useGlobalFilter.pluginName = 'useGlobalFilter';\n\n  function reducer$3(state, action, previousState, instance) {\n    if (action.type === actions.resetGlobalFilter) {\n      return _extends({}, state, {\n        globalFilter: instance.initialState.globalFilter || undefined\n      });\n    }\n\n    if (action.type === actions.setGlobalFilter) {\n      var filterValue = action.filterValue;\n      var userFilterTypes = instance.userFilterTypes;\n      var filterMethod = getFilterMethod(instance.globalFilter, userFilterTypes || {}, filterTypes);\n      var newFilter = functionalUpdate(filterValue, state.globalFilter); //\n\n      if (shouldAutoRemoveFilter(filterMethod.autoRemove, newFilter)) {\n        var globalFilter = state.globalFilter,\n            stateWithoutGlobalFilter = _objectWithoutPropertiesLoose(state, [\"globalFilter\"]);\n\n        return stateWithoutGlobalFilter;\n      }\n\n      return _extends({}, state, {\n        globalFilter: newFilter\n      });\n    }\n  }\n\n  function useInstance$3(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        userFilterTypes = instance.filterTypes,\n        globalFilter = instance.globalFilter,\n        manualGlobalFilter = instance.manualGlobalFilter,\n        globalFilterValue = instance.state.globalFilter,\n        dispatch = instance.dispatch,\n        _instance$autoResetGl = instance.autoResetGlobalFilter,\n        autoResetGlobalFilter = _instance$autoResetGl === void 0 ? true : _instance$autoResetGl,\n        disableGlobalFilter = instance.disableGlobalFilter;\n    var setGlobalFilter = React.useCallback(function (filterValue) {\n      dispatch({\n        type: actions.setGlobalFilter,\n        filterValue: filterValue\n      });\n    }, [dispatch]); // TODO: Create a filter cache for incremental high speed multi-filtering\n    // This gets pretty complicated pretty fast, since you have to maintain a\n    // cache for each row group (top-level rows, and each row's recursive subrows)\n    // This would make multi-filtering a lot faster though. Too far?\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualGlobalFilter || typeof globalFilterValue === 'undefined') {\n        return [rows, flatRows, rowsById];\n      }\n\n      var filteredFlatRows = [];\n      var filteredRowsById = {};\n      var filterMethod = getFilterMethod(globalFilter, userFilterTypes || {}, filterTypes);\n\n      if (!filterMethod) {\n        console.warn(\"Could not find a valid 'globalFilter' option.\");\n        return rows;\n      }\n\n      allColumns.forEach(function (column) {\n        var columnDisableGlobalFilter = column.disableGlobalFilter;\n        column.canFilter = getFirstDefined(columnDisableGlobalFilter === true ? false : undefined, disableGlobalFilter === true ? false : undefined, true);\n      });\n      var filterableColumns = allColumns.filter(function (c) {\n        return c.canFilter === true;\n      }); // Filters top level and nested rows\n\n      var filterRows = function filterRows(filteredRows) {\n        filteredRows = filterMethod(filteredRows, filterableColumns.map(function (d) {\n          return d.id;\n        }), globalFilterValue);\n        filteredRows.forEach(function (row) {\n          filteredFlatRows.push(row);\n          filteredRowsById[row.id] = row;\n          row.subRows = row.subRows && row.subRows.length ? filterRows(row.subRows) : row.subRows;\n        });\n        return filteredRows;\n      };\n\n      return [filterRows(rows), filteredFlatRows, filteredRowsById];\n    }, [manualGlobalFilter, globalFilterValue, globalFilter, userFilterTypes, allColumns, rows, flatRows, rowsById, disableGlobalFilter]),\n        globalFilteredRows = _React$useMemo[0],\n        globalFilteredFlatRows = _React$useMemo[1],\n        globalFilteredRowsById = _React$useMemo[2];\n\n    var getAutoResetGlobalFilter = useGetLatest(autoResetGlobalFilter);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetGlobalFilter()) {\n        dispatch({\n          type: actions.resetGlobalFilter\n        });\n      }\n    }, [dispatch, manualGlobalFilter ? null : data]);\n    Object.assign(instance, {\n      preGlobalFilteredRows: rows,\n      preGlobalFilteredFlatRows: flatRows,\n      preGlobalFilteredRowsById: rowsById,\n      globalFilteredRows: globalFilteredRows,\n      globalFilteredFlatRows: globalFilteredFlatRows,\n      globalFilteredRowsById: globalFilteredRowsById,\n      rows: globalFilteredRows,\n      flatRows: globalFilteredFlatRows,\n      rowsById: globalFilteredRowsById,\n      setGlobalFilter: setGlobalFilter,\n      disableGlobalFilter: disableGlobalFilter\n    });\n  }\n\n  function sum(values, aggregatedValues) {\n    // It's faster to just add the aggregations together instead of\n    // process leaf nodes individually\n    return aggregatedValues.reduce(function (sum, next) {\n      return sum + (typeof next === 'number' ? next : 0);\n    }, 0);\n  }\n  function min(values) {\n    var min = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        min = Math.min(min, value);\n      }\n    });\n    return min;\n  }\n  function max(values) {\n    var max = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        max = Math.max(max, value);\n      }\n    });\n    return max;\n  }\n  function minMax(values) {\n    var min = values[0] || 0;\n    var max = values[0] || 0;\n    values.forEach(function (value) {\n      if (typeof value === 'number') {\n        min = Math.min(min, value);\n        max = Math.max(max, value);\n      }\n    });\n    return min + \"..\" + max;\n  }\n  function average(values) {\n    return sum(null, values) / values.length;\n  }\n  function median(values) {\n    if (!values.length) {\n      return null;\n    }\n\n    var mid = Math.floor(values.length / 2);\n    var nums = [].concat(values).sort(function (a, b) {\n      return a - b;\n    });\n    return values.length % 2 !== 0 ? nums[mid] : (nums[mid - 1] + nums[mid]) / 2;\n  }\n  function unique(values) {\n    return Array.from(new Set(values).values());\n  }\n  function uniqueCount(values) {\n    return new Set(values).size;\n  }\n  function count(values) {\n    return values.length;\n  }\n\n  var aggregations = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    sum: sum,\n    min: min,\n    max: max,\n    minMax: minMax,\n    average: average,\n    median: median,\n    unique: unique,\n    uniqueCount: uniqueCount,\n    count: count\n  });\n\n  var emptyArray = [];\n  var emptyObject = {}; // Actions\n\n  actions.resetGroupBy = 'resetGroupBy';\n  actions.setGroupBy = 'setGroupBy';\n  actions.toggleGroupBy = 'toggleGroupBy';\n  var useGroupBy = function useGroupBy(hooks) {\n    hooks.getGroupByToggleProps = [defaultGetGroupByToggleProps];\n    hooks.stateReducers.push(reducer$4);\n    hooks.visibleColumnsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.groupBy]);\n    });\n    hooks.visibleColumns.push(visibleColumns);\n    hooks.useInstance.push(useInstance$4);\n    hooks.prepareRow.push(prepareRow$1);\n  };\n  useGroupBy.pluginName = 'useGroupBy';\n\n  var defaultGetGroupByToggleProps = function defaultGetGroupByToggleProps(props, _ref2) {\n    var header = _ref2.header;\n    return [props, {\n      onClick: header.canGroupBy ? function (e) {\n        e.persist();\n        header.toggleGroupBy();\n      } : undefined,\n      style: {\n        cursor: header.canGroupBy ? 'pointer' : undefined\n      },\n      title: 'Toggle GroupBy'\n    }];\n  }; // Reducer\n\n\n  function reducer$4(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        groupBy: []\n      }, state);\n    }\n\n    if (action.type === actions.resetGroupBy) {\n      return _extends({}, state, {\n        groupBy: instance.initialState.groupBy || []\n      });\n    }\n\n    if (action.type === actions.setGroupBy) {\n      var value = action.value;\n      return _extends({}, state, {\n        groupBy: value\n      });\n    }\n\n    if (action.type === actions.toggleGroupBy) {\n      var columnId = action.columnId,\n          setGroupBy = action.value;\n      var resolvedGroupBy = typeof setGroupBy !== 'undefined' ? setGroupBy : !state.groupBy.includes(columnId);\n\n      if (resolvedGroupBy) {\n        return _extends({}, state, {\n          groupBy: [].concat(state.groupBy, [columnId])\n        });\n      }\n\n      return _extends({}, state, {\n        groupBy: state.groupBy.filter(function (d) {\n          return d !== columnId;\n        })\n      });\n    }\n  }\n\n  function visibleColumns(columns, _ref3) {\n    var groupBy = _ref3.instance.state.groupBy;\n    // Sort grouped columns to the start of the column list\n    // before the headers are built\n    var groupByColumns = groupBy.map(function (g) {\n      return columns.find(function (col) {\n        return col.id === g;\n      });\n    }).filter(Boolean);\n    var nonGroupByColumns = columns.filter(function (col) {\n      return !groupBy.includes(col.id);\n    });\n    columns = [].concat(groupByColumns, nonGroupByColumns);\n    columns.forEach(function (column) {\n      column.isGrouped = groupBy.includes(column.id);\n      column.groupedIndex = groupBy.indexOf(column.id);\n    });\n    return columns;\n  }\n\n  var defaultUserAggregations = {};\n\n  function useInstance$4(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        rowsById = instance.rowsById,\n        allColumns = instance.allColumns,\n        flatHeaders = instance.flatHeaders,\n        _instance$groupByFn = instance.groupByFn,\n        groupByFn = _instance$groupByFn === void 0 ? defaultGroupByFn : _instance$groupByFn,\n        manualGroupBy = instance.manualGroupBy,\n        _instance$aggregation = instance.aggregations,\n        userAggregations = _instance$aggregation === void 0 ? defaultUserAggregations : _instance$aggregation,\n        plugins = instance.plugins,\n        groupBy = instance.state.groupBy,\n        dispatch = instance.dispatch,\n        _instance$autoResetGr = instance.autoResetGroupBy,\n        autoResetGroupBy = _instance$autoResetGr === void 0 ? true : _instance$autoResetGr,\n        disableGroupBy = instance.disableGroupBy,\n        defaultCanGroupBy = instance.defaultCanGroupBy,\n        getHooks = instance.getHooks;\n    ensurePluginOrder(plugins, ['useColumnOrder', 'useFilters'], 'useGroupBy');\n    var getInstance = useGetLatest(instance);\n    allColumns.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnGroupBy = column.defaultGroupBy,\n          columnDisableGroupBy = column.disableGroupBy;\n      column.canGroupBy = accessor ? getFirstDefined(column.canGroupBy, columnDisableGroupBy === true ? false : undefined, disableGroupBy === true ? false : undefined, true) : getFirstDefined(column.canGroupBy, defaultColumnGroupBy, defaultCanGroupBy, false);\n\n      if (column.canGroupBy) {\n        column.toggleGroupBy = function () {\n          return instance.toggleGroupBy(column.id);\n        };\n      }\n\n      column.Aggregated = column.Aggregated || column.Cell;\n    });\n    var toggleGroupBy = React.useCallback(function (columnId, value) {\n      dispatch({\n        type: actions.toggleGroupBy,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var setGroupBy = React.useCallback(function (value) {\n      dispatch({\n        type: actions.setGroupBy,\n        value: value\n      });\n    }, [dispatch]);\n    flatHeaders.forEach(function (header) {\n      header.getGroupByToggleProps = makePropGetter(getHooks().getGroupByToggleProps, {\n        instance: getInstance(),\n        header: header\n      });\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualGroupBy || !groupBy.length) {\n        return [rows, flatRows, rowsById, emptyArray, emptyObject, flatRows, rowsById];\n      } // Ensure that the list of filtered columns exist\n\n\n      var existingGroupBy = groupBy.filter(function (g) {\n        return allColumns.find(function (col) {\n          return col.id === g;\n        });\n      }); // Find the columns that can or are aggregating\n      // Uses each column to aggregate rows into a single value\n\n      var aggregateRowsToValues = function aggregateRowsToValues(leafRows, groupedRows, depth) {\n        var values = {};\n        allColumns.forEach(function (column) {\n          // Don't aggregate columns that are in the groupBy\n          if (existingGroupBy.includes(column.id)) {\n            values[column.id] = groupedRows[0] ? groupedRows[0].values[column.id] : null;\n            return;\n          } // Aggregate the values\n\n\n          var aggregateFn = typeof column.aggregate === 'function' ? column.aggregate : userAggregations[column.aggregate] || aggregations[column.aggregate];\n\n          if (aggregateFn) {\n            // Get the columnValues to aggregate\n            var groupedValues = groupedRows.map(function (row) {\n              return row.values[column.id];\n            }); // Get the columnValues to aggregate\n\n            var leafValues = leafRows.map(function (row) {\n              var columnValue = row.values[column.id];\n\n              if (!depth && column.aggregateValue) {\n                var aggregateValueFn = typeof column.aggregateValue === 'function' ? column.aggregateValue : userAggregations[column.aggregateValue] || aggregations[column.aggregateValue];\n\n                if (!aggregateValueFn) {\n                  console.info({\n                    column: column\n                  });\n                  throw new Error(\"React Table: Invalid column.aggregateValue option for column listed above\");\n                }\n\n                columnValue = aggregateValueFn(columnValue, row, column);\n              }\n\n              return columnValue;\n            });\n            values[column.id] = aggregateFn(leafValues, groupedValues);\n          } else if (column.aggregate) {\n            console.info({\n              column: column\n            });\n            throw new Error(\"React Table: Invalid column.aggregate option for column listed above\");\n          } else {\n            values[column.id] = null;\n          }\n        });\n        return values;\n      };\n\n      var groupedFlatRows = [];\n      var groupedRowsById = {};\n      var onlyGroupedFlatRows = [];\n      var onlyGroupedRowsById = {};\n      var nonGroupedFlatRows = [];\n      var nonGroupedRowsById = {}; // Recursively group the data\n\n      var groupUpRecursively = function groupUpRecursively(rows, depth, parentId) {\n        if (depth === void 0) {\n          depth = 0;\n        }\n\n        // This is the last level, just return the rows\n        if (depth === existingGroupBy.length) {\n          return rows;\n        }\n\n        var columnId = existingGroupBy[depth]; // Group the rows together for this level\n\n        var rowGroupsMap = groupByFn(rows, columnId); // Peform aggregations for each group\n\n        var aggregatedGroupedRows = Object.entries(rowGroupsMap).map(function (_ref4, index) {\n          var groupByVal = _ref4[0],\n              groupedRows = _ref4[1];\n          var id = columnId + \":\" + groupByVal;\n          id = parentId ? parentId + \">\" + id : id; // First, Recurse to group sub rows before aggregation\n\n          var subRows = groupUpRecursively(groupedRows, depth + 1, id); // Flatten the leaf rows of the rows in this group\n\n          var leafRows = depth ? flattenBy(groupedRows, 'leafRows') : groupedRows;\n          var values = aggregateRowsToValues(leafRows, groupedRows, depth);\n          var row = {\n            id: id,\n            isGrouped: true,\n            groupByID: columnId,\n            groupByVal: groupByVal,\n            values: values,\n            subRows: subRows,\n            leafRows: leafRows,\n            depth: depth,\n            index: index\n          };\n          subRows.forEach(function (subRow) {\n            groupedFlatRows.push(subRow);\n            groupedRowsById[subRow.id] = subRow;\n\n            if (subRow.isGrouped) {\n              onlyGroupedFlatRows.push(subRow);\n              onlyGroupedRowsById[subRow.id] = subRow;\n            } else {\n              nonGroupedFlatRows.push(subRow);\n              nonGroupedRowsById[subRow.id] = subRow;\n            }\n          });\n          return row;\n        });\n        return aggregatedGroupedRows;\n      };\n\n      var groupedRows = groupUpRecursively(rows);\n      groupedRows.forEach(function (subRow) {\n        groupedFlatRows.push(subRow);\n        groupedRowsById[subRow.id] = subRow;\n\n        if (subRow.isGrouped) {\n          onlyGroupedFlatRows.push(subRow);\n          onlyGroupedRowsById[subRow.id] = subRow;\n        } else {\n          nonGroupedFlatRows.push(subRow);\n          nonGroupedRowsById[subRow.id] = subRow;\n        }\n      }); // Assign the new data\n\n      return [groupedRows, groupedFlatRows, groupedRowsById, onlyGroupedFlatRows, onlyGroupedRowsById, nonGroupedFlatRows, nonGroupedRowsById];\n    }, [manualGroupBy, groupBy, rows, flatRows, rowsById, allColumns, userAggregations, groupByFn]),\n        groupedRows = _React$useMemo[0],\n        groupedFlatRows = _React$useMemo[1],\n        groupedRowsById = _React$useMemo[2],\n        onlyGroupedFlatRows = _React$useMemo[3],\n        onlyGroupedRowsById = _React$useMemo[4],\n        nonGroupedFlatRows = _React$useMemo[5],\n        nonGroupedRowsById = _React$useMemo[6];\n\n    var getAutoResetGroupBy = useGetLatest(autoResetGroupBy);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetGroupBy()) {\n        dispatch({\n          type: actions.resetGroupBy\n        });\n      }\n    }, [dispatch, manualGroupBy ? null : data]);\n    Object.assign(instance, {\n      preGroupedRows: rows,\n      preGroupedFlatRow: flatRows,\n      preGroupedRowsById: rowsById,\n      groupedRows: groupedRows,\n      groupedFlatRows: groupedFlatRows,\n      groupedRowsById: groupedRowsById,\n      onlyGroupedFlatRows: onlyGroupedFlatRows,\n      onlyGroupedRowsById: onlyGroupedRowsById,\n      nonGroupedFlatRows: nonGroupedFlatRows,\n      nonGroupedRowsById: nonGroupedRowsById,\n      rows: groupedRows,\n      flatRows: groupedFlatRows,\n      rowsById: groupedRowsById,\n      toggleGroupBy: toggleGroupBy,\n      setGroupBy: setGroupBy\n    });\n  }\n\n  function prepareRow$1(row) {\n    row.allCells.forEach(function (cell) {\n      var _row$subRows;\n\n      // Grouped cells are in the groupBy and the pivot cell for the row\n      cell.isGrouped = cell.column.isGrouped && cell.column.id === row.groupByID; // Placeholder cells are any columns in the groupBy that are not grouped\n\n      cell.isPlaceholder = !cell.isGrouped && cell.column.isGrouped; // Aggregated cells are not grouped, not repeated, but still have subRows\n\n      cell.isAggregated = !cell.isGrouped && !cell.isPlaceholder && ((_row$subRows = row.subRows) == null ? void 0 : _row$subRows.length);\n    });\n  }\n\n  function defaultGroupByFn(rows, columnId) {\n    return rows.reduce(function (prev, row, i) {\n      // TODO: Might want to implement a key serializer here so\n      // irregular column values can still be grouped if needed?\n      var resKey = \"\" + row.values[columnId];\n      prev[resKey] = Array.isArray(prev[resKey]) ? prev[resKey] : [];\n      prev[resKey].push(row);\n      return prev;\n    }, {});\n  }\n\n  var reSplitAlphaNumeric = /([0-9]+)/gm; // Mixed sorting is slow, but very inclusive of many edge cases.\n  // It handles numbers, mixed alphanumeric combinations, and even\n  // null, undefined, and Infinity\n\n  var alphanumeric = function alphanumeric(rowA, rowB, columnId) {\n    var _getRowValuesByColumn = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn[0],\n        b = _getRowValuesByColumn[1]; // Force to strings (or \"\" for unsupported types)\n\n\n    a = toString(a);\n    b = toString(b); // Split on number groups, but keep the delimiter\n    // Then remove falsey split values\n\n    a = a.split(reSplitAlphaNumeric).filter(Boolean);\n    b = b.split(reSplitAlphaNumeric).filter(Boolean); // While\n\n    while (a.length && b.length) {\n      var aa = a.shift();\n      var bb = b.shift();\n      var an = parseInt(aa, 10);\n      var bn = parseInt(bb, 10);\n      var combo = [an, bn].sort(); // Both are string\n\n      if (isNaN(combo[0])) {\n        if (aa > bb) {\n          return 1;\n        }\n\n        if (bb > aa) {\n          return -1;\n        }\n\n        continue;\n      } // One is a string, one is a number\n\n\n      if (isNaN(combo[1])) {\n        return isNaN(an) ? -1 : 1;\n      } // Both are numbers\n\n\n      if (an > bn) {\n        return 1;\n      }\n\n      if (bn > an) {\n        return -1;\n      }\n    }\n\n    return a.length - b.length;\n  };\n  function datetime(rowA, rowB, columnId) {\n    var _getRowValuesByColumn2 = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn2[0],\n        b = _getRowValuesByColumn2[1];\n\n    a = a.getTime();\n    b = b.getTime();\n    return compareBasic(a, b);\n  }\n  function basic(rowA, rowB, columnId) {\n    var _getRowValuesByColumn3 = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn3[0],\n        b = _getRowValuesByColumn3[1];\n\n    return compareBasic(a, b);\n  }\n  function string(rowA, rowB, columnId) {\n    var _getRowValuesByColumn4 = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn4[0],\n        b = _getRowValuesByColumn4[1];\n\n    a = a.split('').filter(Boolean);\n    b = b.split('').filter(Boolean);\n\n    while (a.length && b.length) {\n      var aa = a.shift();\n      var bb = b.shift();\n      var alower = aa.toLowerCase();\n      var blower = bb.toLowerCase(); // Case insensitive comparison until characters match\n\n      if (alower > blower) {\n        return 1;\n      }\n\n      if (blower > alower) {\n        return -1;\n      } // If lowercase characters are identical\n\n\n      if (aa > bb) {\n        return 1;\n      }\n\n      if (bb > aa) {\n        return -1;\n      }\n\n      continue;\n    }\n\n    return a.length - b.length;\n  }\n  function number(rowA, rowB, columnId) {\n    var _getRowValuesByColumn5 = getRowValuesByColumnID(rowA, rowB, columnId),\n        a = _getRowValuesByColumn5[0],\n        b = _getRowValuesByColumn5[1];\n\n    var replaceNonNumeric = /[^0-9.]/gi;\n    a = Number(String(a).replace(replaceNonNumeric, ''));\n    b = Number(String(b).replace(replaceNonNumeric, ''));\n    return compareBasic(a, b);\n  } // Utils\n\n  function compareBasic(a, b) {\n    return a === b ? 0 : a > b ? 1 : -1;\n  }\n\n  function getRowValuesByColumnID(row1, row2, columnId) {\n    return [row1.values[columnId], row2.values[columnId]];\n  }\n\n  function toString(a) {\n    if (typeof a === 'number') {\n      if (isNaN(a) || a === Infinity || a === -Infinity) {\n        return '';\n      }\n\n      return String(a);\n    }\n\n    if (typeof a === 'string') {\n      return a;\n    }\n\n    return '';\n  }\n\n  var sortTypes = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    alphanumeric: alphanumeric,\n    datetime: datetime,\n    basic: basic,\n    string: string,\n    number: number\n  });\n\n  actions.resetSortBy = 'resetSortBy';\n  actions.setSortBy = 'setSortBy';\n  actions.toggleSortBy = 'toggleSortBy';\n  actions.clearSortBy = 'clearSortBy';\n  defaultColumn.sortType = 'alphanumeric';\n  defaultColumn.sortDescFirst = false;\n  var useSortBy = function useSortBy(hooks) {\n    hooks.getSortByToggleProps = [defaultGetSortByToggleProps];\n    hooks.stateReducers.push(reducer$5);\n    hooks.useInstance.push(useInstance$5);\n  };\n  useSortBy.pluginName = 'useSortBy';\n\n  var defaultGetSortByToggleProps = function defaultGetSortByToggleProps(props, _ref) {\n    var instance = _ref.instance,\n        column = _ref.column;\n    var _instance$isMultiSort = instance.isMultiSortEvent,\n        isMultiSortEvent = _instance$isMultiSort === void 0 ? function (e) {\n      return e.shiftKey;\n    } : _instance$isMultiSort;\n    return [props, {\n      onClick: column.canSort ? function (e) {\n        e.persist();\n        column.toggleSortBy(undefined, !instance.disableMultiSort && isMultiSortEvent(e));\n      } : undefined,\n      style: {\n        cursor: column.canSort ? 'pointer' : undefined\n      },\n      title: column.canSort ? 'Toggle SortBy' : undefined\n    }];\n  }; // Reducer\n\n\n  function reducer$5(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        sortBy: []\n      }, state);\n    }\n\n    if (action.type === actions.resetSortBy) {\n      return _extends({}, state, {\n        sortBy: instance.initialState.sortBy || []\n      });\n    }\n\n    if (action.type === actions.clearSortBy) {\n      var sortBy = state.sortBy;\n      var newSortBy = sortBy.filter(function (d) {\n        return d.id !== action.columnId;\n      });\n      return _extends({}, state, {\n        sortBy: newSortBy\n      });\n    }\n\n    if (action.type === actions.setSortBy) {\n      var _sortBy = action.sortBy;\n      return _extends({}, state, {\n        sortBy: _sortBy\n      });\n    }\n\n    if (action.type === actions.toggleSortBy) {\n      var columnId = action.columnId,\n          desc = action.desc,\n          multi = action.multi;\n      var allColumns = instance.allColumns,\n          disableMultiSort = instance.disableMultiSort,\n          disableSortRemove = instance.disableSortRemove,\n          disableMultiRemove = instance.disableMultiRemove,\n          _instance$maxMultiSor = instance.maxMultiSortColCount,\n          maxMultiSortColCount = _instance$maxMultiSor === void 0 ? Number.MAX_SAFE_INTEGER : _instance$maxMultiSor;\n      var _sortBy2 = state.sortBy; // Find the column for this columnId\n\n      var column = allColumns.find(function (d) {\n        return d.id === columnId;\n      });\n      var sortDescFirst = column.sortDescFirst; // Find any existing sortBy for this column\n\n      var existingSortBy = _sortBy2.find(function (d) {\n        return d.id === columnId;\n      });\n\n      var existingIndex = _sortBy2.findIndex(function (d) {\n        return d.id === columnId;\n      });\n\n      var hasDescDefined = typeof desc !== 'undefined' && desc !== null;\n      var _newSortBy = []; // What should we do with this sort action?\n\n      var sortAction;\n\n      if (!disableMultiSort && multi) {\n        if (existingSortBy) {\n          sortAction = 'toggle';\n        } else {\n          sortAction = 'add';\n        }\n      } else {\n        // Normal mode\n        if (existingIndex !== _sortBy2.length - 1 || _sortBy2.length !== 1) {\n          sortAction = 'replace';\n        } else if (existingSortBy) {\n          sortAction = 'toggle';\n        } else {\n          sortAction = 'replace';\n        }\n      } // Handle toggle states that will remove the sortBy\n\n\n      if (sortAction === 'toggle' && // Must be toggling\n      !disableSortRemove && // If disableSortRemove, disable in general\n      !hasDescDefined && ( // Must not be setting desc\n      multi ? !disableMultiRemove : true) && ( // If multi, don't allow if disableMultiRemove\n      existingSortBy && // Finally, detect if it should indeed be removed\n      existingSortBy.desc && !sortDescFirst || !existingSortBy.desc && sortDescFirst)) {\n        sortAction = 'remove';\n      }\n\n      if (sortAction === 'replace') {\n        _newSortBy = [{\n          id: columnId,\n          desc: hasDescDefined ? desc : sortDescFirst\n        }];\n      } else if (sortAction === 'add') {\n        _newSortBy = [].concat(_sortBy2, [{\n          id: columnId,\n          desc: hasDescDefined ? desc : sortDescFirst\n        }]); // Take latest n columns\n\n        _newSortBy.splice(0, _newSortBy.length - maxMultiSortColCount);\n      } else if (sortAction === 'toggle') {\n        // This flips (or sets) the\n        _newSortBy = _sortBy2.map(function (d) {\n          if (d.id === columnId) {\n            return _extends({}, d, {\n              desc: hasDescDefined ? desc : !existingSortBy.desc\n            });\n          }\n\n          return d;\n        });\n      } else if (sortAction === 'remove') {\n        _newSortBy = _sortBy2.filter(function (d) {\n          return d.id !== columnId;\n        });\n      }\n\n      return _extends({}, state, {\n        sortBy: _newSortBy\n      });\n    }\n  }\n\n  function useInstance$5(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        flatRows = instance.flatRows,\n        allColumns = instance.allColumns,\n        _instance$orderByFn = instance.orderByFn,\n        orderByFn = _instance$orderByFn === void 0 ? defaultOrderByFn : _instance$orderByFn,\n        userSortTypes = instance.sortTypes,\n        manualSortBy = instance.manualSortBy,\n        defaultCanSort = instance.defaultCanSort,\n        disableSortBy = instance.disableSortBy,\n        flatHeaders = instance.flatHeaders,\n        sortBy = instance.state.sortBy,\n        dispatch = instance.dispatch,\n        plugins = instance.plugins,\n        getHooks = instance.getHooks,\n        _instance$autoResetSo = instance.autoResetSortBy,\n        autoResetSortBy = _instance$autoResetSo === void 0 ? true : _instance$autoResetSo;\n    ensurePluginOrder(plugins, ['useFilters', 'useGlobalFilter', 'useGroupBy', 'usePivotColumns'], 'useSortBy');\n    var setSortBy = React.useCallback(function (sortBy) {\n      dispatch({\n        type: actions.setSortBy,\n        sortBy: sortBy\n      });\n    }, [dispatch]); // Updates sorting based on a columnId, desc flag and multi flag\n\n    var toggleSortBy = React.useCallback(function (columnId, desc, multi) {\n      dispatch({\n        type: actions.toggleSortBy,\n        columnId: columnId,\n        desc: desc,\n        multi: multi\n      });\n    }, [dispatch]); // use reference to avoid memory leak in #1608\n\n    var getInstance = useGetLatest(instance); // Add the getSortByToggleProps method to columns and headers\n\n    flatHeaders.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnCanSort = column.canSort,\n          columnDisableSortBy = column.disableSortBy,\n          id = column.id;\n      var canSort = accessor ? getFirstDefined(columnDisableSortBy === true ? false : undefined, disableSortBy === true ? false : undefined, true) : getFirstDefined(defaultCanSort, defaultColumnCanSort, false);\n      column.canSort = canSort;\n\n      if (column.canSort) {\n        column.toggleSortBy = function (desc, multi) {\n          return toggleSortBy(column.id, desc, multi);\n        };\n\n        column.clearSortBy = function () {\n          dispatch({\n            type: actions.clearSortBy,\n            columnId: column.id\n          });\n        };\n      }\n\n      column.getSortByToggleProps = makePropGetter(getHooks().getSortByToggleProps, {\n        instance: getInstance(),\n        column: column\n      });\n      var columnSort = sortBy.find(function (d) {\n        return d.id === id;\n      });\n      column.isSorted = !!columnSort;\n      column.sortedIndex = sortBy.findIndex(function (d) {\n        return d.id === id;\n      });\n      column.isSortedDesc = column.isSorted ? columnSort.desc : undefined;\n    });\n\n    var _React$useMemo = React.useMemo(function () {\n      if (manualSortBy || !sortBy.length) {\n        return [rows, flatRows];\n      }\n\n      var sortedFlatRows = []; // Filter out sortBys that correspond to non existing columns\n\n      var availableSortBy = sortBy.filter(function (sort) {\n        return allColumns.find(function (col) {\n          return col.id === sort.id;\n        });\n      });\n\n      var sortData = function sortData(rows) {\n        // Use the orderByFn to compose multiple sortBy's together.\n        // This will also perform a stable sorting using the row index\n        // if needed.\n        var sortedData = orderByFn(rows, availableSortBy.map(function (sort) {\n          // Support custom sorting methods for each column\n          var column = allColumns.find(function (d) {\n            return d.id === sort.id;\n          });\n\n          if (!column) {\n            throw new Error(\"React-Table: Could not find a column with id: \" + sort.id + \" while sorting\");\n          }\n\n          var sortType = column.sortType; // Look up sortBy functions in this order:\n          // column function\n          // column string lookup on user sortType\n          // column string lookup on built-in sortType\n          // default function\n          // default string lookup on user sortType\n          // default string lookup on built-in sortType\n\n          var sortMethod = isFunction(sortType) || (userSortTypes || {})[sortType] || sortTypes[sortType];\n\n          if (!sortMethod) {\n            throw new Error(\"React-Table: Could not find a valid sortType of '\" + sortType + \"' for column '\" + sort.id + \"'.\");\n          } // Return the correct sortFn.\n          // This function should always return in ascending order\n\n\n          return function (a, b) {\n            return sortMethod(a, b, sort.id, sort.desc);\n          };\n        }), // Map the directions\n        availableSortBy.map(function (sort) {\n          // Detect and use the sortInverted option\n          var column = allColumns.find(function (d) {\n            return d.id === sort.id;\n          });\n\n          if (column && column.sortInverted) {\n            return sort.desc;\n          }\n\n          return !sort.desc;\n        })); // If there are sub-rows, sort them\n\n        sortedData.forEach(function (row) {\n          sortedFlatRows.push(row);\n\n          if (!row.subRows || row.subRows.length === 0) {\n            return;\n          }\n\n          row.subRows = sortData(row.subRows);\n        });\n        return sortedData;\n      };\n\n      return [sortData(rows), sortedFlatRows];\n    }, [manualSortBy, sortBy, rows, flatRows, allColumns, orderByFn, userSortTypes]),\n        sortedRows = _React$useMemo[0],\n        sortedFlatRows = _React$useMemo[1];\n\n    var getAutoResetSortBy = useGetLatest(autoResetSortBy);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetSortBy()) {\n        dispatch({\n          type: actions.resetSortBy\n        });\n      }\n    }, [manualSortBy ? null : data]);\n    Object.assign(instance, {\n      preSortedRows: rows,\n      preSortedFlatRows: flatRows,\n      sortedRows: sortedRows,\n      sortedFlatRows: sortedFlatRows,\n      rows: sortedRows,\n      flatRows: sortedFlatRows,\n      setSortBy: setSortBy,\n      toggleSortBy: toggleSortBy\n    });\n  }\n\n  function defaultOrderByFn(arr, funcs, dirs) {\n    return [].concat(arr).sort(function (rowA, rowB) {\n      for (var i = 0; i < funcs.length; i += 1) {\n        var sortFn = funcs[i];\n        var desc = dirs[i] === false || dirs[i] === 'desc';\n        var sortInt = sortFn(rowA, rowB);\n\n        if (sortInt !== 0) {\n          return desc ? -sortInt : sortInt;\n        }\n      }\n\n      return dirs[0] ? rowA.index - rowB.index : rowB.index - rowA.index;\n    });\n  }\n\n  var pluginName = 'usePagination'; // Actions\n\n  actions.resetPage = 'resetPage';\n  actions.gotoPage = 'gotoPage';\n  actions.setPageSize = 'setPageSize';\n  var usePagination = function usePagination(hooks) {\n    hooks.stateReducers.push(reducer$6);\n    hooks.useInstance.push(useInstance$6);\n  };\n  usePagination.pluginName = pluginName;\n\n  function reducer$6(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        pageSize: 10,\n        pageIndex: 0\n      }, state);\n    }\n\n    if (action.type === actions.resetPage) {\n      return _extends({}, state, {\n        pageIndex: instance.initialState.pageIndex || 0\n      });\n    }\n\n    if (action.type === actions.gotoPage) {\n      var pageCount = instance.pageCount,\n          page = instance.page;\n      var newPageIndex = functionalUpdate(action.pageIndex, state.pageIndex);\n      var canNavigate = false;\n\n      if (newPageIndex > state.pageIndex) {\n        // next page\n        canNavigate = pageCount === -1 ? page.length >= state.pageSize : newPageIndex < pageCount;\n      } else if (newPageIndex < state.pageIndex) {\n        // prev page\n        canNavigate = newPageIndex > -1;\n      }\n\n      if (!canNavigate) {\n        return state;\n      }\n\n      return _extends({}, state, {\n        pageIndex: newPageIndex\n      });\n    }\n\n    if (action.type === actions.setPageSize) {\n      var pageSize = action.pageSize;\n      var topRowIndex = state.pageSize * state.pageIndex;\n      var pageIndex = Math.floor(topRowIndex / pageSize);\n      return _extends({}, state, {\n        pageIndex: pageIndex,\n        pageSize: pageSize\n      });\n    }\n  }\n\n  function useInstance$6(instance) {\n    var rows = instance.rows,\n        _instance$autoResetPa = instance.autoResetPage,\n        autoResetPage = _instance$autoResetPa === void 0 ? true : _instance$autoResetPa,\n        _instance$manualExpan = instance.manualExpandedKey,\n        manualExpandedKey = _instance$manualExpan === void 0 ? 'expanded' : _instance$manualExpan,\n        plugins = instance.plugins,\n        userPageCount = instance.pageCount,\n        _instance$paginateExp = instance.paginateExpandedRows,\n        paginateExpandedRows = _instance$paginateExp === void 0 ? true : _instance$paginateExp,\n        _instance$expandSubRo = instance.expandSubRows,\n        expandSubRows = _instance$expandSubRo === void 0 ? true : _instance$expandSubRo,\n        _instance$state = instance.state,\n        pageSize = _instance$state.pageSize,\n        pageIndex = _instance$state.pageIndex,\n        expanded = _instance$state.expanded,\n        globalFilter = _instance$state.globalFilter,\n        filters = _instance$state.filters,\n        groupBy = _instance$state.groupBy,\n        sortBy = _instance$state.sortBy,\n        dispatch = instance.dispatch,\n        data = instance.data,\n        manualPagination = instance.manualPagination;\n    ensurePluginOrder(plugins, ['useGlobalFilter', 'useFilters', 'useGroupBy', 'useSortBy', 'useExpanded'], 'usePagination');\n    var getAutoResetPage = useGetLatest(autoResetPage);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetPage()) {\n        dispatch({\n          type: actions.resetPage\n        });\n      }\n    }, [dispatch, manualPagination ? null : data, globalFilter, filters, groupBy, sortBy]);\n    var pageCount = manualPagination ? userPageCount : Math.ceil(rows.length / pageSize);\n    var pageOptions = React.useMemo(function () {\n      return pageCount > 0 ? [].concat(new Array(pageCount)).fill(null).map(function (d, i) {\n        return i;\n      }) : [];\n    }, [pageCount]);\n    var page = React.useMemo(function () {\n      var page;\n\n      if (manualPagination) {\n        page = rows;\n      } else {\n        var pageStart = pageSize * pageIndex;\n        var pageEnd = pageStart + pageSize;\n        page = rows.slice(pageStart, pageEnd);\n      }\n\n      if (paginateExpandedRows) {\n        return page;\n      }\n\n      return expandRows(page, {\n        manualExpandedKey: manualExpandedKey,\n        expanded: expanded,\n        expandSubRows: expandSubRows\n      });\n    }, [expandSubRows, expanded, manualExpandedKey, manualPagination, pageIndex, pageSize, paginateExpandedRows, rows]);\n    var canPreviousPage = pageIndex > 0;\n    var canNextPage = pageCount === -1 ? page.length >= pageSize : pageIndex < pageCount - 1;\n    var gotoPage = React.useCallback(function (pageIndex) {\n      dispatch({\n        type: actions.gotoPage,\n        pageIndex: pageIndex\n      });\n    }, [dispatch]);\n    var previousPage = React.useCallback(function () {\n      return gotoPage(function (old) {\n        return old - 1;\n      });\n    }, [gotoPage]);\n    var nextPage = React.useCallback(function () {\n      return gotoPage(function (old) {\n        return old + 1;\n      });\n    }, [gotoPage]);\n    var setPageSize = React.useCallback(function (pageSize) {\n      dispatch({\n        type: actions.setPageSize,\n        pageSize: pageSize\n      });\n    }, [dispatch]);\n    Object.assign(instance, {\n      pageOptions: pageOptions,\n      pageCount: pageCount,\n      page: page,\n      canPreviousPage: canPreviousPage,\n      canNextPage: canNextPage,\n      gotoPage: gotoPage,\n      previousPage: previousPage,\n      nextPage: nextPage,\n      setPageSize: setPageSize\n    });\n  }\n\n  actions.resetPivot = 'resetPivot';\n  actions.togglePivot = 'togglePivot';\n  var _UNSTABLE_usePivotColumns = function _UNSTABLE_usePivotColumns(hooks) {\n    hooks.getPivotToggleProps = [defaultGetPivotToggleProps];\n    hooks.stateReducers.push(reducer$7);\n    hooks.useInstanceAfterData.push(useInstanceAfterData);\n    hooks.allColumns.push(allColumns);\n    hooks.accessValue.push(accessValue);\n    hooks.materializedColumns.push(materializedColumns);\n    hooks.materializedColumnsDeps.push(materializedColumnsDeps);\n    hooks.visibleColumns.push(visibleColumns$1);\n    hooks.visibleColumnsDeps.push(visibleColumnsDeps);\n    hooks.useInstance.push(useInstance$7);\n    hooks.prepareRow.push(prepareRow$2);\n  };\n  _UNSTABLE_usePivotColumns.pluginName = 'usePivotColumns';\n  var defaultPivotColumns = [];\n\n  var defaultGetPivotToggleProps = function defaultGetPivotToggleProps(props, _ref) {\n    var header = _ref.header;\n    return [props, {\n      onClick: header.canPivot ? function (e) {\n        e.persist();\n        header.togglePivot();\n      } : undefined,\n      style: {\n        cursor: header.canPivot ? 'pointer' : undefined\n      },\n      title: 'Toggle Pivot'\n    }];\n  }; // Reducer\n\n\n  function reducer$7(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        pivotColumns: defaultPivotColumns\n      }, state);\n    }\n\n    if (action.type === actions.resetPivot) {\n      return _extends({}, state, {\n        pivotColumns: instance.initialState.pivotColumns || defaultPivotColumns\n      });\n    }\n\n    if (action.type === actions.togglePivot) {\n      var columnId = action.columnId,\n          setPivot = action.value;\n      var resolvedPivot = typeof setPivot !== 'undefined' ? setPivot : !state.pivotColumns.includes(columnId);\n\n      if (resolvedPivot) {\n        return _extends({}, state, {\n          pivotColumns: [].concat(state.pivotColumns, [columnId])\n        });\n      }\n\n      return _extends({}, state, {\n        pivotColumns: state.pivotColumns.filter(function (d) {\n          return d !== columnId;\n        })\n      });\n    }\n  }\n\n  function useInstanceAfterData(instance) {\n    instance.allColumns.forEach(function (column) {\n      column.isPivotSource = instance.state.pivotColumns.includes(column.id);\n    });\n  }\n\n  function allColumns(columns, _ref2) {\n    var instance = _ref2.instance;\n    columns.forEach(function (column) {\n      column.isPivotSource = instance.state.pivotColumns.includes(column.id);\n      column.uniqueValues = new Set();\n    });\n    return columns;\n  }\n\n  function accessValue(value, _ref3) {\n    var column = _ref3.column;\n\n    if (column.uniqueValues && typeof value !== 'undefined') {\n      column.uniqueValues.add(value);\n    }\n\n    return value;\n  }\n\n  function materializedColumns(materialized, _ref4) {\n    var instance = _ref4.instance;\n    var allColumns = instance.allColumns,\n        state = instance.state;\n\n    if (!state.pivotColumns.length || !state.groupBy || !state.groupBy.length) {\n      return materialized;\n    }\n\n    var pivotColumns = state.pivotColumns.map(function (id) {\n      return allColumns.find(function (d) {\n        return d.id === id;\n      });\n    }).filter(Boolean);\n    var sourceColumns = allColumns.filter(function (d) {\n      return !d.isPivotSource && !state.groupBy.includes(d.id) && !state.pivotColumns.includes(d.id);\n    });\n\n    var buildPivotColumns = function buildPivotColumns(depth, parent, pivotFilters) {\n      if (depth === void 0) {\n        depth = 0;\n      }\n\n      if (pivotFilters === void 0) {\n        pivotFilters = [];\n      }\n\n      var pivotColumn = pivotColumns[depth];\n\n      if (!pivotColumn) {\n        return sourceColumns.map(function (sourceColumn) {\n          // TODO: We could offer support here for renesting pivoted\n          // columns inside copies of their header groups. For now,\n          // that seems like it would be (1) overkill on nesting, considering\n          // you already get nesting for every pivot level and (2)\n          // really hard. :)\n          return _extends({}, sourceColumn, {\n            canPivot: false,\n            isPivoted: true,\n            parent: parent,\n            depth: depth,\n            id: \"\" + (parent ? parent.id + \".\" + sourceColumn.id : sourceColumn.id),\n            accessor: function accessor(originalRow, i, row) {\n              if (pivotFilters.every(function (filter) {\n                return filter(row);\n              })) {\n                return row.values[sourceColumn.id];\n              }\n            }\n          });\n        });\n      }\n\n      var uniqueValues = Array.from(pivotColumn.uniqueValues).sort();\n      return uniqueValues.map(function (uniqueValue) {\n        var columnGroup = _extends({}, pivotColumn, {\n          Header: pivotColumn.PivotHeader || typeof pivotColumn.header === 'string' ? pivotColumn.Header + \": \" + uniqueValue : uniqueValue,\n          isPivotGroup: true,\n          parent: parent,\n          depth: depth,\n          id: parent ? parent.id + \".\" + pivotColumn.id + \".\" + uniqueValue : pivotColumn.id + \".\" + uniqueValue,\n          pivotValue: uniqueValue\n        });\n\n        columnGroup.columns = buildPivotColumns(depth + 1, columnGroup, [].concat(pivotFilters, [function (row) {\n          return row.values[pivotColumn.id] === uniqueValue;\n        }]));\n        return columnGroup;\n      });\n    };\n\n    var newMaterialized = flattenColumns(buildPivotColumns());\n    return [].concat(materialized, newMaterialized);\n  }\n\n  function materializedColumnsDeps(deps, _ref5) {\n    var _ref5$instance$state = _ref5.instance.state,\n        pivotColumns = _ref5$instance$state.pivotColumns,\n        groupBy = _ref5$instance$state.groupBy;\n    return [].concat(deps, [pivotColumns, groupBy]);\n  }\n\n  function visibleColumns$1(visibleColumns, _ref6) {\n    var state = _ref6.instance.state;\n    visibleColumns = visibleColumns.filter(function (d) {\n      return !d.isPivotSource;\n    });\n\n    if (state.pivotColumns.length && state.groupBy && state.groupBy.length) {\n      visibleColumns = visibleColumns.filter(function (column) {\n        return column.isGrouped || column.isPivoted;\n      });\n    }\n\n    return visibleColumns;\n  }\n\n  function visibleColumnsDeps(deps, _ref7) {\n    var instance = _ref7.instance;\n    return [].concat(deps, [instance.state.pivotColumns, instance.state.groupBy]);\n  }\n\n  function useInstance$7(instance) {\n    var columns = instance.columns,\n        allColumns = instance.allColumns,\n        flatHeaders = instance.flatHeaders,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        dispatch = instance.dispatch,\n        _instance$autoResetPi = instance.autoResetPivot,\n        autoResetPivot = _instance$autoResetPi === void 0 ? true : _instance$autoResetPi,\n        manaulPivot = instance.manaulPivot,\n        disablePivot = instance.disablePivot,\n        defaultCanPivot = instance.defaultCanPivot;\n    ensurePluginOrder(plugins, ['useGroupBy'], 'usePivotColumns');\n    var getInstance = useGetLatest(instance);\n    allColumns.forEach(function (column) {\n      var accessor = column.accessor,\n          defaultColumnPivot = column.defaultPivot,\n          columnDisablePivot = column.disablePivot;\n      column.canPivot = accessor ? getFirstDefined(column.canPivot, columnDisablePivot === true ? false : undefined, disablePivot === true ? false : undefined, true) : getFirstDefined(column.canPivot, defaultColumnPivot, defaultCanPivot, false);\n\n      if (column.canPivot) {\n        column.togglePivot = function () {\n          return instance.togglePivot(column.id);\n        };\n      }\n\n      column.Aggregated = column.Aggregated || column.Cell;\n    });\n\n    var togglePivot = function togglePivot(columnId, value) {\n      dispatch({\n        type: actions.togglePivot,\n        columnId: columnId,\n        value: value\n      });\n    };\n\n    flatHeaders.forEach(function (header) {\n      header.getPivotToggleProps = makePropGetter(getHooks().getPivotToggleProps, {\n        instance: getInstance(),\n        header: header\n      });\n    });\n    var getAutoResetPivot = useGetLatest(autoResetPivot);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetPivot()) {\n        dispatch({\n          type: actions.resetPivot\n        });\n      }\n    }, [dispatch, manaulPivot ? null : columns]);\n    Object.assign(instance, {\n      togglePivot: togglePivot\n    });\n  }\n\n  function prepareRow$2(row) {\n    row.allCells.forEach(function (cell) {\n      // Grouped cells are in the pivotColumns and the pivot cell for the row\n      cell.isPivoted = cell.column.isPivoted;\n    });\n  }\n\n  var pluginName$1 = 'useRowSelect'; // Actions\n\n  actions.resetSelectedRows = 'resetSelectedRows';\n  actions.toggleAllRowsSelected = 'toggleAllRowsSelected';\n  actions.toggleRowSelected = 'toggleRowSelected';\n  actions.toggleAllPageRowsSelected = 'toggleAllPageRowsSelected';\n  var useRowSelect = function useRowSelect(hooks) {\n    hooks.getToggleRowSelectedProps = [defaultGetToggleRowSelectedProps];\n    hooks.getToggleAllRowsSelectedProps = [defaultGetToggleAllRowsSelectedProps];\n    hooks.getToggleAllPageRowsSelectedProps = [defaultGetToggleAllPageRowsSelectedProps];\n    hooks.stateReducers.push(reducer$8);\n    hooks.useInstance.push(useInstance$8);\n    hooks.prepareRow.push(prepareRow$3);\n  };\n  useRowSelect.pluginName = pluginName$1;\n\n  var defaultGetToggleRowSelectedProps = function defaultGetToggleRowSelectedProps(props, _ref) {\n    var instance = _ref.instance,\n        row = _ref.row;\n    var _instance$manualRowSe = instance.manualRowSelectedKey,\n        manualRowSelectedKey = _instance$manualRowSe === void 0 ? 'isSelected' : _instance$manualRowSe;\n    var checked = false;\n\n    if (row.original && row.original[manualRowSelectedKey]) {\n      checked = true;\n    } else {\n      checked = row.isSelected;\n    }\n\n    return [props, {\n      onChange: function onChange(e) {\n        row.toggleRowSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: checked,\n      title: 'Toggle Row Selected',\n      indeterminate: row.isSomeSelected\n    }];\n  };\n\n  var defaultGetToggleAllRowsSelectedProps = function defaultGetToggleAllRowsSelectedProps(props, _ref2) {\n    var instance = _ref2.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleAllRowsSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: instance.isAllRowsSelected,\n      title: 'Toggle All Rows Selected',\n      indeterminate: Boolean(!instance.isAllRowsSelected && Object.keys(instance.state.selectedRowIds).length)\n    }];\n  };\n\n  var defaultGetToggleAllPageRowsSelectedProps = function defaultGetToggleAllPageRowsSelectedProps(props, _ref3) {\n    var instance = _ref3.instance;\n    return [props, {\n      onChange: function onChange(e) {\n        instance.toggleAllPageRowsSelected(e.target.checked);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      checked: instance.isAllPageRowsSelected,\n      title: 'Toggle All Current Page Rows Selected',\n      indeterminate: Boolean(!instance.isAllPageRowsSelected && instance.page.some(function (_ref4) {\n        var id = _ref4.id;\n        return instance.state.selectedRowIds[id];\n      }))\n    }];\n  }; // eslint-disable-next-line max-params\n\n\n  function reducer$8(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        selectedRowIds: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetSelectedRows) {\n      return _extends({}, state, {\n        selectedRowIds: instance.initialState.selectedRowIds || {}\n      });\n    }\n\n    if (action.type === actions.toggleAllRowsSelected) {\n      var setSelected = action.value;\n      var isAllRowsSelected = instance.isAllRowsSelected,\n          rowsById = instance.rowsById,\n          _instance$nonGroupedR = instance.nonGroupedRowsById,\n          nonGroupedRowsById = _instance$nonGroupedR === void 0 ? rowsById : _instance$nonGroupedR;\n      var selectAll = typeof setSelected !== 'undefined' ? setSelected : !isAllRowsSelected; // Only remove/add the rows that are visible on the screen\n      //  Leave all the other rows that are selected alone.\n\n      var selectedRowIds = Object.assign({}, state.selectedRowIds);\n\n      if (selectAll) {\n        Object.keys(nonGroupedRowsById).forEach(function (rowId) {\n          selectedRowIds[rowId] = true;\n        });\n      } else {\n        Object.keys(nonGroupedRowsById).forEach(function (rowId) {\n          delete selectedRowIds[rowId];\n        });\n      }\n\n      return _extends({}, state, {\n        selectedRowIds: selectedRowIds\n      });\n    }\n\n    if (action.type === actions.toggleRowSelected) {\n      var id = action.id,\n          _setSelected = action.value;\n      var _rowsById = instance.rowsById,\n          _instance$selectSubRo = instance.selectSubRows,\n          selectSubRows = _instance$selectSubRo === void 0 ? true : _instance$selectSubRo,\n          getSubRows = instance.getSubRows;\n      var isSelected = state.selectedRowIds[id];\n      var shouldExist = typeof _setSelected !== 'undefined' ? _setSelected : !isSelected;\n\n      if (isSelected === shouldExist) {\n        return state;\n      }\n\n      var newSelectedRowIds = _extends({}, state.selectedRowIds);\n\n      var handleRowById = function handleRowById(id) {\n        var row = _rowsById[id];\n\n        if (!row.isGrouped) {\n          if (shouldExist) {\n            newSelectedRowIds[id] = true;\n          } else {\n            delete newSelectedRowIds[id];\n          }\n        }\n\n        if (selectSubRows && getSubRows(row)) {\n          return getSubRows(row).forEach(function (row) {\n            return handleRowById(row.id);\n          });\n        }\n      };\n\n      handleRowById(id);\n      return _extends({}, state, {\n        selectedRowIds: newSelectedRowIds\n      });\n    }\n\n    if (action.type === actions.toggleAllPageRowsSelected) {\n      var _setSelected2 = action.value;\n\n      var page = instance.page,\n          _rowsById2 = instance.rowsById,\n          _instance$selectSubRo2 = instance.selectSubRows,\n          _selectSubRows = _instance$selectSubRo2 === void 0 ? true : _instance$selectSubRo2,\n          isAllPageRowsSelected = instance.isAllPageRowsSelected,\n          _getSubRows = instance.getSubRows;\n\n      var _selectAll = typeof _setSelected2 !== 'undefined' ? _setSelected2 : !isAllPageRowsSelected;\n\n      var _newSelectedRowIds = _extends({}, state.selectedRowIds);\n\n      var _handleRowById = function _handleRowById(id) {\n        var row = _rowsById2[id];\n\n        if (!row.isGrouped) {\n          if (_selectAll) {\n            _newSelectedRowIds[id] = true;\n          } else {\n            delete _newSelectedRowIds[id];\n          }\n        }\n\n        if (_selectSubRows && _getSubRows(row)) {\n          return _getSubRows(row).forEach(function (row) {\n            return _handleRowById(row.id);\n          });\n        }\n      };\n\n      page.forEach(function (row) {\n        return _handleRowById(row.id);\n      });\n      return _extends({}, state, {\n        selectedRowIds: _newSelectedRowIds\n      });\n    }\n\n    return state;\n  }\n\n  function useInstance$8(instance) {\n    var data = instance.data,\n        rows = instance.rows,\n        getHooks = instance.getHooks,\n        plugins = instance.plugins,\n        rowsById = instance.rowsById,\n        _instance$nonGroupedR2 = instance.nonGroupedRowsById,\n        nonGroupedRowsById = _instance$nonGroupedR2 === void 0 ? rowsById : _instance$nonGroupedR2,\n        _instance$autoResetSe = instance.autoResetSelectedRows,\n        autoResetSelectedRows = _instance$autoResetSe === void 0 ? true : _instance$autoResetSe,\n        selectedRowIds = instance.state.selectedRowIds,\n        _instance$selectSubRo3 = instance.selectSubRows,\n        selectSubRows = _instance$selectSubRo3 === void 0 ? true : _instance$selectSubRo3,\n        dispatch = instance.dispatch,\n        page = instance.page,\n        getSubRows = instance.getSubRows;\n    ensurePluginOrder(plugins, ['useFilters', 'useGroupBy', 'useSortBy', 'useExpanded', 'usePagination'], 'useRowSelect');\n    var selectedFlatRows = React.useMemo(function () {\n      var selectedFlatRows = [];\n      rows.forEach(function (row) {\n        var isSelected = selectSubRows ? getRowIsSelected(row, selectedRowIds, getSubRows) : !!selectedRowIds[row.id];\n        row.isSelected = !!isSelected;\n        row.isSomeSelected = isSelected === null;\n\n        if (isSelected) {\n          selectedFlatRows.push(row);\n        }\n      });\n      return selectedFlatRows;\n    }, [rows, selectSubRows, selectedRowIds, getSubRows]);\n    var isAllRowsSelected = Boolean(Object.keys(nonGroupedRowsById).length && Object.keys(selectedRowIds).length);\n    var isAllPageRowsSelected = isAllRowsSelected;\n\n    if (isAllRowsSelected) {\n      if (Object.keys(nonGroupedRowsById).some(function (id) {\n        return !selectedRowIds[id];\n      })) {\n        isAllRowsSelected = false;\n      }\n    }\n\n    if (!isAllRowsSelected) {\n      if (page && page.length && page.some(function (_ref5) {\n        var id = _ref5.id;\n        return !selectedRowIds[id];\n      })) {\n        isAllPageRowsSelected = false;\n      }\n    }\n\n    var getAutoResetSelectedRows = useGetLatest(autoResetSelectedRows);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetSelectedRows()) {\n        dispatch({\n          type: actions.resetSelectedRows\n        });\n      }\n    }, [dispatch, data]);\n    var toggleAllRowsSelected = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllRowsSelected,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleAllPageRowsSelected = React.useCallback(function (value) {\n      return dispatch({\n        type: actions.toggleAllPageRowsSelected,\n        value: value\n      });\n    }, [dispatch]);\n    var toggleRowSelected = React.useCallback(function (id, value) {\n      return dispatch({\n        type: actions.toggleRowSelected,\n        id: id,\n        value: value\n      });\n    }, [dispatch]);\n    var getInstance = useGetLatest(instance);\n    var getToggleAllRowsSelectedProps = makePropGetter(getHooks().getToggleAllRowsSelectedProps, {\n      instance: getInstance()\n    });\n    var getToggleAllPageRowsSelectedProps = makePropGetter(getHooks().getToggleAllPageRowsSelectedProps, {\n      instance: getInstance()\n    });\n    Object.assign(instance, {\n      selectedFlatRows: selectedFlatRows,\n      isAllRowsSelected: isAllRowsSelected,\n      isAllPageRowsSelected: isAllPageRowsSelected,\n      toggleRowSelected: toggleRowSelected,\n      toggleAllRowsSelected: toggleAllRowsSelected,\n      getToggleAllRowsSelectedProps: getToggleAllRowsSelectedProps,\n      getToggleAllPageRowsSelectedProps: getToggleAllPageRowsSelectedProps,\n      toggleAllPageRowsSelected: toggleAllPageRowsSelected\n    });\n  }\n\n  function prepareRow$3(row, _ref6) {\n    var instance = _ref6.instance;\n\n    row.toggleRowSelected = function (set) {\n      return instance.toggleRowSelected(row.id, set);\n    };\n\n    row.getToggleRowSelectedProps = makePropGetter(instance.getHooks().getToggleRowSelectedProps, {\n      instance: instance,\n      row: row\n    });\n  }\n\n  function getRowIsSelected(row, selectedRowIds, getSubRows) {\n    if (selectedRowIds[row.id]) {\n      return true;\n    }\n\n    var subRows = getSubRows(row);\n\n    if (subRows && subRows.length) {\n      var allChildrenSelected = true;\n      var someSelected = false;\n      subRows.forEach(function (subRow) {\n        // Bail out early if we know both of these\n        if (someSelected && !allChildrenSelected) {\n          return;\n        }\n\n        if (getRowIsSelected(subRow, selectedRowIds, getSubRows)) {\n          someSelected = true;\n        } else {\n          allChildrenSelected = false;\n        }\n      });\n      return allChildrenSelected ? true : someSelected ? null : false;\n    }\n\n    return false;\n  }\n\n  var defaultInitialRowStateAccessor = function defaultInitialRowStateAccessor(row) {\n    return {};\n  };\n\n  var defaultInitialCellStateAccessor = function defaultInitialCellStateAccessor(cell) {\n    return {};\n  }; // Actions\n\n\n  actions.setRowState = 'setRowState';\n  actions.setCellState = 'setCellState';\n  actions.resetRowState = 'resetRowState';\n  var useRowState = function useRowState(hooks) {\n    hooks.stateReducers.push(reducer$9);\n    hooks.useInstance.push(useInstance$9);\n    hooks.prepareRow.push(prepareRow$4);\n  };\n  useRowState.pluginName = 'useRowState';\n\n  function reducer$9(state, action, previousState, instance) {\n    var _instance$initialRowS = instance.initialRowStateAccessor,\n        initialRowStateAccessor = _instance$initialRowS === void 0 ? defaultInitialRowStateAccessor : _instance$initialRowS,\n        _instance$initialCell = instance.initialCellStateAccessor,\n        initialCellStateAccessor = _instance$initialCell === void 0 ? defaultInitialCellStateAccessor : _instance$initialCell,\n        rowsById = instance.rowsById;\n\n    if (action.type === actions.init) {\n      return _extends({\n        rowState: {}\n      }, state);\n    }\n\n    if (action.type === actions.resetRowState) {\n      return _extends({}, state, {\n        rowState: instance.initialState.rowState || {}\n      });\n    }\n\n    if (action.type === actions.setRowState) {\n      var _extends2;\n\n      var rowId = action.rowId,\n          value = action.value;\n      var oldRowState = typeof state.rowState[rowId] !== 'undefined' ? state.rowState[rowId] : initialRowStateAccessor(rowsById[rowId]);\n      return _extends({}, state, {\n        rowState: _extends({}, state.rowState, (_extends2 = {}, _extends2[rowId] = functionalUpdate(value, oldRowState), _extends2))\n      });\n    }\n\n    if (action.type === actions.setCellState) {\n      var _oldRowState$cellStat, _rowsById$_rowId, _rowsById$_rowId$cell, _extends3, _extends4;\n\n      var _rowId = action.rowId,\n          columnId = action.columnId,\n          _value = action.value;\n\n      var _oldRowState = typeof state.rowState[_rowId] !== 'undefined' ? state.rowState[_rowId] : initialRowStateAccessor(rowsById[_rowId]);\n\n      var oldCellState = typeof (_oldRowState == null ? void 0 : (_oldRowState$cellStat = _oldRowState.cellState) == null ? void 0 : _oldRowState$cellStat[columnId]) !== 'undefined' ? _oldRowState.cellState[columnId] : initialCellStateAccessor((_rowsById$_rowId = rowsById[_rowId]) == null ? void 0 : (_rowsById$_rowId$cell = _rowsById$_rowId.cells) == null ? void 0 : _rowsById$_rowId$cell.find(function (cell) {\n        return cell.column.id === columnId;\n      }));\n      return _extends({}, state, {\n        rowState: _extends({}, state.rowState, (_extends4 = {}, _extends4[_rowId] = _extends({}, _oldRowState, {\n          cellState: _extends({}, _oldRowState.cellState || {}, (_extends3 = {}, _extends3[columnId] = functionalUpdate(_value, oldCellState), _extends3))\n        }), _extends4))\n      });\n    }\n  }\n\n  function useInstance$9(instance) {\n    var _instance$autoResetRo = instance.autoResetRowState,\n        autoResetRowState = _instance$autoResetRo === void 0 ? true : _instance$autoResetRo,\n        data = instance.data,\n        dispatch = instance.dispatch;\n    var setRowState = React.useCallback(function (rowId, value) {\n      return dispatch({\n        type: actions.setRowState,\n        rowId: rowId,\n        value: value\n      });\n    }, [dispatch]);\n    var setCellState = React.useCallback(function (rowId, columnId, value) {\n      return dispatch({\n        type: actions.setCellState,\n        rowId: rowId,\n        columnId: columnId,\n        value: value\n      });\n    }, [dispatch]);\n    var getAutoResetRowState = useGetLatest(autoResetRowState);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetRowState()) {\n        dispatch({\n          type: actions.resetRowState\n        });\n      }\n    }, [data]);\n    Object.assign(instance, {\n      setRowState: setRowState,\n      setCellState: setCellState\n    });\n  }\n\n  function prepareRow$4(row, _ref) {\n    var instance = _ref.instance;\n    var _instance$initialRowS2 = instance.initialRowStateAccessor,\n        initialRowStateAccessor = _instance$initialRowS2 === void 0 ? defaultInitialRowStateAccessor : _instance$initialRowS2,\n        _instance$initialCell2 = instance.initialCellStateAccessor,\n        initialCellStateAccessor = _instance$initialCell2 === void 0 ? defaultInitialCellStateAccessor : _instance$initialCell2,\n        rowState = instance.state.rowState;\n\n    if (row) {\n      row.state = typeof rowState[row.id] !== 'undefined' ? rowState[row.id] : initialRowStateAccessor(row);\n\n      row.setState = function (updater) {\n        return instance.setRowState(row.id, updater);\n      };\n\n      row.cells.forEach(function (cell) {\n        if (!row.state.cellState) {\n          row.state.cellState = {};\n        }\n\n        cell.state = typeof row.state.cellState[cell.column.id] !== 'undefined' ? row.state.cellState[cell.column.id] : initialCellStateAccessor(cell);\n\n        cell.setState = function (updater) {\n          return instance.setCellState(row.id, cell.column.id, updater);\n        };\n      });\n    }\n  }\n\n  actions.resetColumnOrder = 'resetColumnOrder';\n  actions.setColumnOrder = 'setColumnOrder';\n  var useColumnOrder = function useColumnOrder(hooks) {\n    hooks.stateReducers.push(reducer$a);\n    hooks.visibleColumnsDeps.push(function (deps, _ref) {\n      var instance = _ref.instance;\n      return [].concat(deps, [instance.state.columnOrder]);\n    });\n    hooks.visibleColumns.push(visibleColumns$2);\n    hooks.useInstance.push(useInstance$a);\n  };\n  useColumnOrder.pluginName = 'useColumnOrder';\n\n  function reducer$a(state, action, previousState, instance) {\n    if (action.type === actions.init) {\n      return _extends({\n        columnOrder: []\n      }, state);\n    }\n\n    if (action.type === actions.resetColumnOrder) {\n      return _extends({}, state, {\n        columnOrder: instance.initialState.columnOrder || []\n      });\n    }\n\n    if (action.type === actions.setColumnOrder) {\n      return _extends({}, state, {\n        columnOrder: functionalUpdate(action.columnOrder, state.columnOrder)\n      });\n    }\n  }\n\n  function visibleColumns$2(columns, _ref2) {\n    var columnOrder = _ref2.instance.state.columnOrder;\n\n    // If there is no order, return the normal columns\n    if (!columnOrder || !columnOrder.length) {\n      return columns;\n    }\n\n    var columnOrderCopy = [].concat(columnOrder); // If there is an order, make a copy of the columns\n\n    var columnsCopy = [].concat(columns); // And make a new ordered array of the columns\n\n    var columnsInOrder = []; // Loop over the columns and place them in order into the new array\n\n    var _loop = function _loop() {\n      var targetColumnId = columnOrderCopy.shift();\n      var foundIndex = columnsCopy.findIndex(function (d) {\n        return d.id === targetColumnId;\n      });\n\n      if (foundIndex > -1) {\n        columnsInOrder.push(columnsCopy.splice(foundIndex, 1)[0]);\n      }\n    };\n\n    while (columnsCopy.length && columnOrderCopy.length) {\n      _loop();\n    } // If there are any columns left, add them to the end\n\n\n    return [].concat(columnsInOrder, columnsCopy);\n  }\n\n  function useInstance$a(instance) {\n    var dispatch = instance.dispatch;\n    instance.setColumnOrder = React.useCallback(function (columnOrder) {\n      return dispatch({\n        type: actions.setColumnOrder,\n        columnOrder: columnOrder\n      });\n    }, [dispatch]);\n  }\n\n  defaultColumn.canResize = true; // Actions\n\n  actions.columnStartResizing = 'columnStartResizing';\n  actions.columnResizing = 'columnResizing';\n  actions.columnDoneResizing = 'columnDoneResizing';\n  actions.resetResize = 'resetResize';\n  var useResizeColumns = function useResizeColumns(hooks) {\n    hooks.getResizerProps = [defaultGetResizerProps];\n    hooks.getHeaderProps.push({\n      style: {\n        position: 'relative'\n      }\n    });\n    hooks.stateReducers.push(reducer$b);\n    hooks.useInstance.push(useInstance$b);\n    hooks.useInstanceBeforeDimensions.push(useInstanceBeforeDimensions$1);\n  };\n\n  var defaultGetResizerProps = function defaultGetResizerProps(props, _ref) {\n    var instance = _ref.instance,\n        header = _ref.header;\n    var dispatch = instance.dispatch;\n\n    var onResizeStart = function onResizeStart(e, header) {\n      var isTouchEvent = false;\n\n      if (e.type === 'touchstart') {\n        // lets not respond to multiple touches (e.g. 2 or 3 fingers)\n        if (e.touches && e.touches.length > 1) {\n          return;\n        }\n\n        isTouchEvent = true;\n      }\n\n      var headersToResize = getLeafHeaders(header);\n      var headerIdWidths = headersToResize.map(function (d) {\n        return [d.id, d.totalWidth];\n      });\n      var clientX = isTouchEvent ? Math.round(e.touches[0].clientX) : e.clientX;\n\n      var dispatchMove = function dispatchMove(clientXPos) {\n        dispatch({\n          type: actions.columnResizing,\n          clientX: clientXPos\n        });\n      };\n\n      var dispatchEnd = function dispatchEnd() {\n        return dispatch({\n          type: actions.columnDoneResizing\n        });\n      };\n\n      var handlersAndEvents = {\n        mouse: {\n          moveEvent: 'mousemove',\n          moveHandler: function moveHandler(e) {\n            return dispatchMove(e.clientX);\n          },\n          upEvent: 'mouseup',\n          upHandler: function upHandler(e) {\n            document.removeEventListener('mousemove', handlersAndEvents.mouse.moveHandler);\n            document.removeEventListener('mouseup', handlersAndEvents.mouse.upHandler);\n            dispatchEnd();\n          }\n        },\n        touch: {\n          moveEvent: 'touchmove',\n          moveHandler: function moveHandler(e) {\n            if (e.cancelable) {\n              e.preventDefault();\n              e.stopPropagation();\n            }\n\n            dispatchMove(e.touches[0].clientX);\n            return false;\n          },\n          upEvent: 'touchend',\n          upHandler: function upHandler(e) {\n            document.removeEventListener(handlersAndEvents.touch.moveEvent, handlersAndEvents.touch.moveHandler);\n            document.removeEventListener(handlersAndEvents.touch.upEvent, handlersAndEvents.touch.moveHandler);\n            dispatchEnd();\n          }\n        }\n      };\n      var events = isTouchEvent ? handlersAndEvents.touch : handlersAndEvents.mouse;\n      var passiveIfSupported = passiveEventSupported() ? {\n        passive: false\n      } : false;\n      document.addEventListener(events.moveEvent, events.moveHandler, passiveIfSupported);\n      document.addEventListener(events.upEvent, events.upHandler, passiveIfSupported);\n      dispatch({\n        type: actions.columnStartResizing,\n        columnId: header.id,\n        columnWidth: header.totalWidth,\n        headerIdWidths: headerIdWidths,\n        clientX: clientX\n      });\n    };\n\n    return [props, {\n      onMouseDown: function onMouseDown(e) {\n        return e.persist() || onResizeStart(e, header);\n      },\n      onTouchStart: function onTouchStart(e) {\n        return e.persist() || onResizeStart(e, header);\n      },\n      style: {\n        cursor: 'col-resize'\n      },\n      draggable: false,\n      role: 'separator'\n    }];\n  };\n\n  useResizeColumns.pluginName = 'useResizeColumns';\n\n  function reducer$b(state, action) {\n    if (action.type === actions.init) {\n      return _extends({\n        columnResizing: {\n          columnWidths: {}\n        }\n      }, state);\n    }\n\n    if (action.type === actions.resetResize) {\n      return _extends({}, state, {\n        columnResizing: {\n          columnWidths: {}\n        }\n      });\n    }\n\n    if (action.type === actions.columnStartResizing) {\n      var clientX = action.clientX,\n          columnId = action.columnId,\n          columnWidth = action.columnWidth,\n          headerIdWidths = action.headerIdWidths;\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          startX: clientX,\n          headerIdWidths: headerIdWidths,\n          columnWidth: columnWidth,\n          isResizingColumn: columnId\n        })\n      });\n    }\n\n    if (action.type === actions.columnResizing) {\n      var _clientX = action.clientX;\n\n      var _state$columnResizing = state.columnResizing,\n          startX = _state$columnResizing.startX,\n          _columnWidth = _state$columnResizing.columnWidth,\n          _state$columnResizing2 = _state$columnResizing.headerIdWidths,\n          _headerIdWidths = _state$columnResizing2 === void 0 ? [] : _state$columnResizing2;\n\n      var deltaX = _clientX - startX;\n      var percentageDeltaX = deltaX / _columnWidth;\n      var newColumnWidths = {};\n\n      _headerIdWidths.forEach(function (_ref2) {\n        var headerId = _ref2[0],\n            headerWidth = _ref2[1];\n        newColumnWidths[headerId] = Math.max(headerWidth + headerWidth * percentageDeltaX, 0);\n      });\n\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          columnWidths: _extends({}, state.columnResizing.columnWidths, {}, newColumnWidths)\n        })\n      });\n    }\n\n    if (action.type === actions.columnDoneResizing) {\n      return _extends({}, state, {\n        columnResizing: _extends({}, state.columnResizing, {\n          startX: null,\n          isResizingColumn: null\n        })\n      });\n    }\n  }\n\n  var useInstanceBeforeDimensions$1 = function useInstanceBeforeDimensions(instance) {\n    var flatHeaders = instance.flatHeaders,\n        disableResizing = instance.disableResizing,\n        getHooks = instance.getHooks,\n        columnResizing = instance.state.columnResizing;\n    var getInstance = useGetLatest(instance);\n    flatHeaders.forEach(function (header) {\n      var canResize = getFirstDefined(header.disableResizing === true ? false : undefined, disableResizing === true ? false : undefined, true);\n      header.canResize = canResize;\n      header.width = columnResizing.columnWidths[header.id] || header.originalWidth || header.width;\n      header.isResizing = columnResizing.isResizingColumn === header.id;\n\n      if (canResize) {\n        header.getResizerProps = makePropGetter(getHooks().getResizerProps, {\n          instance: getInstance(),\n          header: header\n        });\n      }\n    });\n  };\n\n  function useInstance$b(instance) {\n    var plugins = instance.plugins,\n        dispatch = instance.dispatch,\n        _instance$autoResetRe = instance.autoResetResize,\n        autoResetResize = _instance$autoResetRe === void 0 ? true : _instance$autoResetRe,\n        columns = instance.columns;\n    ensurePluginOrder(plugins, ['useAbsoluteLayout'], 'useResizeColumns');\n    var getAutoResetResize = useGetLatest(autoResetResize);\n    useMountedLayoutEffect(function () {\n      if (getAutoResetResize()) {\n        dispatch({\n          type: actions.resetResize\n        });\n      }\n    }, [columns]);\n    var resetResizing = React.useCallback(function () {\n      return dispatch({\n        type: actions.resetResize\n      });\n    }, [dispatch]);\n    Object.assign(instance, {\n      resetResizing: resetResizing\n    });\n  }\n\n  function getLeafHeaders(header) {\n    var leafHeaders = [];\n\n    var recurseHeader = function recurseHeader(header) {\n      if (header.columns && header.columns.length) {\n        header.columns.map(recurseHeader);\n      }\n\n      leafHeaders.push(header);\n    };\n\n    recurseHeader(header);\n    return leafHeaders;\n  }\n\n  var cellStyles = {\n    position: 'absolute',\n    top: 0\n  };\n  var useAbsoluteLayout = function useAbsoluteLayout(hooks) {\n    hooks.getTableBodyProps.push(getRowStyles);\n    hooks.getRowProps.push(getRowStyles);\n    hooks.getHeaderGroupProps.push(getRowStyles);\n    hooks.getFooterGroupProps.push(getRowStyles);\n    hooks.getHeaderProps.push(function (props, _ref) {\n      var column = _ref.column;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: column.totalLeft + \"px\",\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getCellProps.push(function (props, _ref2) {\n      var cell = _ref2.cell;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: cell.column.totalLeft + \"px\",\n          width: cell.column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getFooterProps.push(function (props, _ref3) {\n      var column = _ref3.column;\n      return [props, {\n        style: _extends({}, cellStyles, {\n          left: column.totalLeft + \"px\",\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n  };\n  useAbsoluteLayout.pluginName = 'useAbsoluteLayout';\n\n  var getRowStyles = function getRowStyles(props, _ref4) {\n    var instance = _ref4.instance;\n    return [props, {\n      style: {\n        position: 'relative',\n        width: instance.totalColumnsWidth + \"px\"\n      }\n    }];\n  };\n\n  var cellStyles$1 = {\n    display: 'inline-block',\n    boxSizing: 'border-box'\n  };\n\n  var getRowStyles$1 = function getRowStyles(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        display: 'flex',\n        width: instance.totalColumnsWidth + \"px\"\n      }\n    }];\n  };\n\n  var useBlockLayout = function useBlockLayout(hooks) {\n    hooks.getRowProps.push(getRowStyles$1);\n    hooks.getHeaderGroupProps.push(getRowStyles$1);\n    hooks.getFooterGroupProps.push(getRowStyles$1);\n    hooks.getHeaderProps.push(function (props, _ref2) {\n      var column = _ref2.column;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getCellProps.push(function (props, _ref3) {\n      var cell = _ref3.cell;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: cell.column.totalWidth + \"px\"\n        })\n      }];\n    });\n    hooks.getFooterProps.push(function (props, _ref4) {\n      var column = _ref4.column;\n      return [props, {\n        style: _extends({}, cellStyles$1, {\n          width: column.totalWidth + \"px\"\n        })\n      }];\n    });\n  };\n  useBlockLayout.pluginName = 'useBlockLayout';\n\n  function useFlexLayout(hooks) {\n    hooks.getTableProps.push(getTableProps);\n    hooks.getRowProps.push(getRowStyles$2);\n    hooks.getHeaderGroupProps.push(getRowStyles$2);\n    hooks.getFooterGroupProps.push(getRowStyles$2);\n    hooks.getHeaderProps.push(getHeaderProps);\n    hooks.getCellProps.push(getCellProps);\n    hooks.getFooterProps.push(getFooterProps);\n  }\n  useFlexLayout.pluginName = 'useFlexLayout';\n\n  var getTableProps = function getTableProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        minWidth: instance.totalColumnsMinWidth + \"px\"\n      }\n    }];\n  };\n\n  var getRowStyles$2 = function getRowStyles(props, _ref2) {\n    var instance = _ref2.instance;\n    return [props, {\n      style: {\n        display: 'flex',\n        flex: '1 0 auto',\n        minWidth: instance.totalColumnsMinWidth + \"px\"\n      }\n    }];\n  };\n\n  var getHeaderProps = function getHeaderProps(props, _ref3) {\n    var column = _ref3.column;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: column.totalFlexWidth ? column.totalFlexWidth + \" 0 auto\" : undefined,\n        minWidth: column.totalMinWidth + \"px\",\n        width: column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  var getCellProps = function getCellProps(props, _ref4) {\n    var cell = _ref4.cell;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: cell.column.totalFlexWidth + \" 0 auto\",\n        minWidth: cell.column.totalMinWidth + \"px\",\n        width: cell.column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  var getFooterProps = function getFooterProps(props, _ref5) {\n    var column = _ref5.column;\n    return [props, {\n      style: {\n        boxSizing: 'border-box',\n        flex: column.totalFlexWidth ? column.totalFlexWidth + \" 0 auto\" : undefined,\n        minWidth: column.totalMinWidth + \"px\",\n        width: column.totalWidth + \"px\"\n      }\n    }];\n  };\n\n  function useGridLayout(hooks) {\n    hooks.stateReducers.push(reducer$c);\n    hooks.getTableProps.push(getTableProps$1);\n    hooks.getHeaderProps.push(getHeaderProps$1);\n  }\n  useGridLayout.pluginName = 'useGridLayout';\n\n  var getTableProps$1 = function getTableProps(props, _ref) {\n    var instance = _ref.instance;\n    return [props, {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: instance.state.gridLayout.columnWidths.map(function (w) {\n          return w;\n        }).join(\" \")\n      }\n    }];\n  };\n\n  var getHeaderProps$1 = function getHeaderProps(props, _ref2) {\n    var column = _ref2.column;\n    return [props, {\n      id: \"header-cell-\" + column.id,\n      style: {\n        position: \"sticky\" //enables a scroll wrapper to be placed around the table and have sticky headers\n\n      }\n    }];\n  };\n\n  function reducer$c(state, action, previousState, instance) {\n    if (action.type === \"init\") {\n      return _extends({\n        gridLayout: {\n          columnWidths: instance.columns.map(function () {\n            return \"auto\";\n          })\n        }\n      }, state);\n    }\n\n    if (action.type === \"columnStartResizing\") {\n      var columnId = action.columnId;\n      var columnIndex = instance.visibleColumns.findIndex(function (col) {\n        return col.id === columnId;\n      });\n      var elWidth = getElementWidth(columnId);\n\n      if (elWidth !== undefined) {\n        return _extends({}, state, {\n          gridLayout: _extends({}, state.gridLayout, {\n            columnId: columnId,\n            columnIndex: columnIndex,\n            startingWidth: elWidth\n          })\n        });\n      } else {\n        return state;\n      }\n    }\n\n    if (action.type === \"columnResizing\") {\n      var _state$gridLayout = state.gridLayout,\n          _columnIndex = _state$gridLayout.columnIndex,\n          startingWidth = _state$gridLayout.startingWidth,\n          columnWidths = _state$gridLayout.columnWidths;\n      var change = state.columnResizing.startX - action.clientX;\n      var newWidth = startingWidth - change;\n      var columnWidthsCopy = [].concat(columnWidths);\n      columnWidthsCopy[_columnIndex] = newWidth + \"px\";\n      return _extends({}, state, {\n        gridLayout: _extends({}, state.gridLayout, {\n          columnWidths: columnWidthsCopy\n        })\n      });\n    }\n  }\n\n  function getElementWidth(columnId) {\n    var _document$getElementB;\n\n    var width = (_document$getElementB = document.getElementById(\"header-cell-\" + columnId)) == null ? void 0 : _document$getElementB.offsetWidth;\n\n    if (width !== undefined) {\n      return width;\n    }\n  }\n\n  exports._UNSTABLE_usePivotColumns = _UNSTABLE_usePivotColumns;\n  exports.actions = actions;\n  exports.defaultColumn = defaultColumn;\n  exports.defaultGroupByFn = defaultGroupByFn;\n  exports.defaultOrderByFn = defaultOrderByFn;\n  exports.defaultRenderer = defaultRenderer;\n  exports.emptyRenderer = emptyRenderer;\n  exports.ensurePluginOrder = ensurePluginOrder;\n  exports.flexRender = flexRender;\n  exports.functionalUpdate = functionalUpdate;\n  exports.loopHooks = loopHooks;\n  exports.makePropGetter = makePropGetter;\n  exports.makeRenderer = makeRenderer;\n  exports.reduceHooks = reduceHooks;\n  exports.safeUseLayoutEffect = safeUseLayoutEffect;\n  exports.useAbsoluteLayout = useAbsoluteLayout;\n  exports.useAsyncDebounce = useAsyncDebounce;\n  exports.useBlockLayout = useBlockLayout;\n  exports.useColumnOrder = useColumnOrder;\n  exports.useExpanded = useExpanded;\n  exports.useFilters = useFilters;\n  exports.useFlexLayout = useFlexLayout;\n  exports.useGetLatest = useGetLatest;\n  exports.useGlobalFilter = useGlobalFilter;\n  exports.useGridLayout = useGridLayout;\n  exports.useGroupBy = useGroupBy;\n  exports.useMountedLayoutEffect = useMountedLayoutEffect;\n  exports.usePagination = usePagination;\n  exports.useResizeColumns = useResizeColumns;\n  exports.useRowSelect = useRowSelect;\n  exports.useRowState = useRowState;\n  exports.useSortBy = useSortBy;\n  exports.useTable = useTable;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"]},"metadata":{},"sourceType":"script"}